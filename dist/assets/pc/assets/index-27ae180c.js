var qh=Object.defineProperty;var Vh=(e,r,t)=>r in e?qh(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var d=(e,r,t)=>(Vh(e,typeof r!="symbol"?r+"":r,t),t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function To(e,r){const t=Object.create(null),n=e.split(",");for(let s=0;s<n.length;s++)t[n[s]]=!0;return r?s=>!!t[s.toLowerCase()]:s=>!!t[s]}const Oe={},Gr=[],At=()=>{},Wh=()=>!1,Gh=/^on[^a-z]/,Vs=e=>Gh.test(e),Eo=e=>e.startsWith("onUpdate:"),Xe=Object.assign,Po=(e,r)=>{const t=e.indexOf(r);t>-1&&e.splice(t,1)},Kh=Object.prototype.hasOwnProperty,ye=(e,r)=>Kh.call(e,r),ce=Array.isArray,Kr=e=>Ws(e)==="[object Map]",oc=e=>Ws(e)==="[object Set]",de=e=>typeof e=="function",ze=e=>typeof e=="string",ko=e=>typeof e=="symbol",Re=e=>e!==null&&typeof e=="object",ac=e=>Re(e)&&de(e.then)&&de(e.catch),lc=Object.prototype.toString,Ws=e=>lc.call(e),Yh=e=>Ws(e).slice(8,-1),cc=e=>Ws(e)==="[object Object]",Ao=e=>ze(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ws=To(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gs=e=>{const r=Object.create(null);return t=>r[t]||(r[t]=e(t))},Jh=/-(\w)/g,Ut=Gs(e=>e.replace(Jh,(r,t)=>t?t.toUpperCase():"")),Xh=/\B([A-Z])/g,ln=Gs(e=>e.replace(Xh,"-$1").toLowerCase()),Ks=Gs(e=>e.charAt(0).toUpperCase()+e.slice(1)),ci=Gs(e=>e?`on${Ks(e)}`:""),Fn=(e,r)=>!Object.is(e,r),ui=(e,r)=>{for(let t=0;t<e.length;t++)e[t](r)},ks=(e,r,t)=>{Object.defineProperty(e,r,{configurable:!0,enumerable:!1,value:t})},Qh=e=>{const r=parseFloat(e);return isNaN(r)?e:r};let Ca;const Ui=()=>Ca||(Ca=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function dt(e){if(ce(e)){const r={};for(let t=0;t<e.length;t++){const n=e[t],s=ze(n)?rd(n):dt(n);if(s)for(const i in s)r[i]=s[i]}return r}else{if(ze(e))return e;if(Re(e))return e}}const Zh=/;(?![^(]*\))/g,ed=/:([^]+)/,td=/\/\*[^]*?\*\//g;function rd(e){const r={};return e.replace(td,"").split(Zh).forEach(t=>{if(t){const n=t.split(ed);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function Ce(e){let r="";if(ze(e))r=e;else if(ce(e))for(let t=0;t<e.length;t++){const n=Ce(e[t]);n&&(r+=n+" ")}else if(Re(e))for(const t in e)e[t]&&(r+=t+" ");return r.trim()}const nd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sd=To(nd);function uc(e){return!!e||e===""}const re=e=>ze(e)?e:e==null?"":ce(e)||Re(e)&&(e.toString===lc||!de(e.toString))?JSON.stringify(e,hc,2):String(e),hc=(e,r)=>r&&r.__v_isRef?hc(e,r.value):Kr(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((t,[n,s])=>(t[`${n} =>`]=s,t),{})}:oc(r)?{[`Set(${r.size})`]:[...r.values()]}:Re(r)&&!ce(r)&&!cc(r)?String(r):r;let Tt;class id{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Tt,!r&&Tt&&(this.index=(Tt.scopes||(Tt.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const t=Tt;try{return Tt=this,r()}finally{Tt=t}}}on(){Tt=this}off(){Tt=this.parent}stop(r){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!r){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function od(e,r=Tt){r&&r.active&&r.effects.push(e)}function ad(){return Tt}const Oo=e=>{const r=new Set(e);return r.w=0,r.n=0,r},dc=e=>(e.w&dr)>0,fc=e=>(e.n&dr)>0,ld=({deps:e})=>{if(e.length)for(let r=0;r<e.length;r++)e[r].w|=dr},cd=e=>{const{deps:r}=e;if(r.length){let t=0;for(let n=0;n<r.length;n++){const s=r[n];dc(s)&&!fc(s)?s.delete(e):r[t++]=s,s.w&=~dr,s.n&=~dr}r.length=t}},ji=new WeakMap;let Sn=0,dr=1;const qi=30;let Et;const Pr=Symbol(""),Vi=Symbol("");class Ro{constructor(r,t=null,n){this.fn=r,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,od(this,n)}run(){if(!this.active)return this.fn();let r=Et,t=cr;for(;r;){if(r===this)return;r=r.parent}try{return this.parent=Et,Et=this,cr=!0,dr=1<<++Sn,Sn<=qi?ld(this):$a(this),this.fn()}finally{Sn<=qi&&cd(this),dr=1<<--Sn,Et=this.parent,cr=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Et===this?this.deferStop=!0:this.active&&($a(this),this.onStop&&this.onStop(),this.active=!1)}}function $a(e){const{deps:r}=e;if(r.length){for(let t=0;t<r.length;t++)r[t].delete(e);r.length=0}}let cr=!0;const pc=[];function cn(){pc.push(cr),cr=!1}function un(){const e=pc.pop();cr=e===void 0?!0:e}function ft(e,r,t){if(cr&&Et){let n=ji.get(e);n||ji.set(e,n=new Map);let s=n.get(t);s||n.set(t,s=Oo()),mc(s)}}function mc(e,r){let t=!1;Sn<=qi?fc(e)||(e.n|=dr,t=!dc(e)):t=!e.has(Et),t&&(e.add(Et),Et.deps.push(e))}function Xt(e,r,t,n,s,i){const o=ji.get(e);if(!o)return;let a=[];if(r==="clear")a=[...o.values()];else if(t==="length"&&ce(e)){const c=Number(n);o.forEach((l,u)=>{(u==="length"||u>=c)&&a.push(l)})}else switch(t!==void 0&&a.push(o.get(t)),r){case"add":ce(e)?Ao(t)&&a.push(o.get("length")):(a.push(o.get(Pr)),Kr(e)&&a.push(o.get(Vi)));break;case"delete":ce(e)||(a.push(o.get(Pr)),Kr(e)&&a.push(o.get(Vi)));break;case"set":Kr(e)&&a.push(o.get(Pr));break}if(a.length===1)a[0]&&Wi(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);Wi(Oo(c))}}function Wi(e,r){const t=ce(e)?e:[...e];for(const n of t)n.computed&&Ta(n);for(const n of t)n.computed||Ta(n)}function Ta(e,r){(e!==Et||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const ud=To("__proto__,__v_isRef,__isVue"),gc=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ko)),hd=Mo(),dd=Mo(!1,!0),fd=Mo(!0),Ea=pd();function pd(){const e={};return["includes","indexOf","lastIndexOf"].forEach(r=>{e[r]=function(...t){const n=xe(this);for(let i=0,o=this.length;i<o;i++)ft(n,"get",i+"");const s=n[r](...t);return s===-1||s===!1?n[r](...t.map(xe)):s}}),["push","pop","shift","unshift","splice"].forEach(r=>{e[r]=function(...t){cn();const n=xe(this)[r].apply(this,t);return un(),n}}),e}function md(e){const r=xe(this);return ft(r,"has",e),r.hasOwnProperty(e)}function Mo(e=!1,r=!1){return function(n,s,i){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_isShallow")return r;if(s==="__v_raw"&&i===(e?r?Od:wc:r?bc:_c).get(n))return n;const o=ce(n);if(!e){if(o&&ye(Ea,s))return Reflect.get(Ea,s,i);if(s==="hasOwnProperty")return md}const a=Reflect.get(n,s,i);return(ko(s)?gc.has(s):ud(s))||(e||ft(n,"get",s),r)?a:it(a)?o&&Ao(s)?a:a.value:Re(a)?e?xc(a):Io(a):a}}const gd=yc(),yd=yc(!0);function yc(e=!1){return function(t,n,s,i){let o=t[n];if(en(o)&&it(o)&&!it(s))return!1;if(!e&&(!As(s)&&!en(s)&&(o=xe(o),s=xe(s)),!ce(t)&&it(o)&&!it(s)))return o.value=s,!0;const a=ce(t)&&Ao(n)?Number(n)<t.length:ye(t,n),c=Reflect.set(t,n,s,i);return t===xe(i)&&(a?Fn(s,o)&&Xt(t,"set",n,s):Xt(t,"add",n,s)),c}}function vd(e,r){const t=ye(e,r);e[r];const n=Reflect.deleteProperty(e,r);return n&&t&&Xt(e,"delete",r,void 0),n}function _d(e,r){const t=Reflect.has(e,r);return(!ko(r)||!gc.has(r))&&ft(e,"has",r),t}function bd(e){return ft(e,"iterate",ce(e)?"length":Pr),Reflect.ownKeys(e)}const vc={get:hd,set:gd,deleteProperty:vd,has:_d,ownKeys:bd},wd={get:fd,set(e,r){return!0},deleteProperty(e,r){return!0}},xd=Xe({},vc,{get:dd,set:yd}),No=e=>e,Ys=e=>Reflect.getPrototypeOf(e);function os(e,r,t=!1,n=!1){e=e.__v_raw;const s=xe(e),i=xe(r);t||(r!==i&&ft(s,"get",r),ft(s,"get",i));const{has:o}=Ys(s),a=n?No:t?Fo:Bn;if(o.call(s,r))return a(e.get(r));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(r)}function as(e,r=!1){const t=this.__v_raw,n=xe(t),s=xe(e);return r||(e!==s&&ft(n,"has",e),ft(n,"has",s)),e===s?t.has(e):t.has(e)||t.has(s)}function ls(e,r=!1){return e=e.__v_raw,!r&&ft(xe(e),"iterate",Pr),Reflect.get(e,"size",e)}function Pa(e){e=xe(e);const r=xe(this);return Ys(r).has.call(r,e)||(r.add(e),Xt(r,"add",e,e)),this}function ka(e,r){r=xe(r);const t=xe(this),{has:n,get:s}=Ys(t);let i=n.call(t,e);i||(e=xe(e),i=n.call(t,e));const o=s.call(t,e);return t.set(e,r),i?Fn(r,o)&&Xt(t,"set",e,r):Xt(t,"add",e,r),this}function Aa(e){const r=xe(this),{has:t,get:n}=Ys(r);let s=t.call(r,e);s||(e=xe(e),s=t.call(r,e)),n&&n.call(r,e);const i=r.delete(e);return s&&Xt(r,"delete",e,void 0),i}function Oa(){const e=xe(this),r=e.size!==0,t=e.clear();return r&&Xt(e,"clear",void 0,void 0),t}function cs(e,r){return function(n,s){const i=this,o=i.__v_raw,a=xe(o),c=r?No:e?Fo:Bn;return!e&&ft(a,"iterate",Pr),o.forEach((l,u)=>n.call(s,c(l),c(u),i))}}function us(e,r,t){return function(...n){const s=this.__v_raw,i=xe(s),o=Kr(i),a=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,l=s[e](...n),u=t?No:r?Fo:Bn;return!r&&ft(i,"iterate",c?Vi:Pr),{next(){const{value:h,done:f}=l.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function er(e){return function(...r){return e==="delete"?!1:this}}function Sd(){const e={get(i){return os(this,i)},get size(){return ls(this)},has:as,add:Pa,set:ka,delete:Aa,clear:Oa,forEach:cs(!1,!1)},r={get(i){return os(this,i,!1,!0)},get size(){return ls(this)},has:as,add:Pa,set:ka,delete:Aa,clear:Oa,forEach:cs(!1,!0)},t={get(i){return os(this,i,!0)},get size(){return ls(this,!0)},has(i){return as.call(this,i,!0)},add:er("add"),set:er("set"),delete:er("delete"),clear:er("clear"),forEach:cs(!0,!1)},n={get(i){return os(this,i,!0,!0)},get size(){return ls(this,!0)},has(i){return as.call(this,i,!0)},add:er("add"),set:er("set"),delete:er("delete"),clear:er("clear"),forEach:cs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=us(i,!1,!1),t[i]=us(i,!0,!1),r[i]=us(i,!1,!0),n[i]=us(i,!0,!0)}),[e,t,r,n]}const[Cd,$d,Td,Ed]=Sd();function Lo(e,r){const t=r?e?Ed:Td:e?$d:Cd;return(n,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(ye(t,s)&&s in n?t:n,s,i)}const Pd={get:Lo(!1,!1)},kd={get:Lo(!1,!0)},Ad={get:Lo(!0,!1)},_c=new WeakMap,bc=new WeakMap,wc=new WeakMap,Od=new WeakMap;function Rd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Md(e){return e.__v_skip||!Object.isExtensible(e)?0:Rd(Yh(e))}function Io(e){return en(e)?e:Do(e,!1,vc,Pd,_c)}function Nd(e){return Do(e,!1,xd,kd,bc)}function xc(e){return Do(e,!0,wd,Ad,wc)}function Do(e,r,t,n,s){if(!Re(e)||e.__v_raw&&!(r&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=Md(e);if(o===0)return e;const a=new Proxy(e,o===2?n:t);return s.set(e,a),a}function Yr(e){return en(e)?Yr(e.__v_raw):!!(e&&e.__v_isReactive)}function en(e){return!!(e&&e.__v_isReadonly)}function As(e){return!!(e&&e.__v_isShallow)}function Sc(e){return Yr(e)||en(e)}function xe(e){const r=e&&e.__v_raw;return r?xe(r):e}function Cc(e){return ks(e,"__v_skip",!0),e}const Bn=e=>Re(e)?Io(e):e,Fo=e=>Re(e)?xc(e):e;function $c(e){cr&&Et&&(e=xe(e),mc(e.dep||(e.dep=Oo())))}function Tc(e,r){e=xe(e);const t=e.dep;t&&Wi(t)}function it(e){return!!(e&&e.__v_isRef===!0)}function ie(e){return Ld(e,!1)}function Ld(e,r){return it(e)?e:new Id(e,r)}class Id{constructor(r,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?r:xe(r),this._value=t?r:Bn(r)}get value(){return $c(this),this._value}set value(r){const t=this.__v_isShallow||As(r)||en(r);r=t?r:xe(r),Fn(r,this._rawValue)&&(this._rawValue=r,this._value=t?r:Bn(r),Tc(this))}}function $(e){return it(e)?e.value:e}const Dd={get:(e,r,t)=>$(Reflect.get(e,r,t)),set:(e,r,t,n)=>{const s=e[r];return it(s)&&!it(t)?(s.value=t,!0):Reflect.set(e,r,t,n)}};function Ec(e){return Yr(e)?e:new Proxy(e,Dd)}class Fd{constructor(r,t,n,s){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Ro(r,()=>{this._dirty||(this._dirty=!0,Tc(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=n}get value(){const r=xe(this);return $c(r),(r._dirty||!r._cacheable)&&(r._dirty=!1,r._value=r.effect.run()),r._value}set value(r){this._setter(r)}}function Bd(e,r,t=!1){let n,s;const i=de(e);return i?(n=e,s=At):(n=e.get,s=e.set),new Fd(n,s,i||!s,t)}function ur(e,r,t,n){let s;try{s=n?e(...n):e()}catch(i){Js(i,r,t)}return s}function Ot(e,r,t,n){if(de(e)){const i=ur(e,r,t,n);return i&&ac(i)&&i.catch(o=>{Js(o,r,t)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(Ot(e[i],r,t,n));return s}function Js(e,r,t,n=!0){const s=r?r.vnode:null;if(r){let i=r.parent;const o=r.proxy,a=t;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](e,o,a)===!1)return}i=i.parent}const c=r.appContext.config.errorHandler;if(c){ur(c,null,10,[e,o,a]);return}}zd(e,t,s,n)}function zd(e,r,t,n=!0){console.error(e)}let zn=!1,Gi=!1;const st=[];let Ft=0;const Jr=[];let Wt=null,Cr=0;const Pc=Promise.resolve();let Bo=null;function Hd(e){const r=Bo||Pc;return e?r.then(this?e.bind(this):e):r}function Ud(e){let r=Ft+1,t=st.length;for(;r<t;){const n=r+t>>>1;Hn(st[n])<e?r=n+1:t=n}return r}function zo(e){(!st.length||!st.includes(e,zn&&e.allowRecurse?Ft+1:Ft))&&(e.id==null?st.push(e):st.splice(Ud(e.id),0,e),kc())}function kc(){!zn&&!Gi&&(Gi=!0,Bo=Pc.then(Oc))}function jd(e){const r=st.indexOf(e);r>Ft&&st.splice(r,1)}function qd(e){ce(e)?Jr.push(...e):(!Wt||!Wt.includes(e,e.allowRecurse?Cr+1:Cr))&&Jr.push(e),kc()}function Ra(e,r=zn?Ft+1:0){for(;r<st.length;r++){const t=st[r];t&&t.pre&&(st.splice(r,1),r--,t())}}function Ac(e){if(Jr.length){const r=[...new Set(Jr)];if(Jr.length=0,Wt){Wt.push(...r);return}for(Wt=r,Wt.sort((t,n)=>Hn(t)-Hn(n)),Cr=0;Cr<Wt.length;Cr++)Wt[Cr]();Wt=null,Cr=0}}const Hn=e=>e.id==null?1/0:e.id,Vd=(e,r)=>{const t=Hn(e)-Hn(r);if(t===0){if(e.pre&&!r.pre)return-1;if(r.pre&&!e.pre)return 1}return t};function Oc(e){Gi=!1,zn=!0,st.sort(Vd);const r=At;try{for(Ft=0;Ft<st.length;Ft++){const t=st[Ft];t&&t.active!==!1&&ur(t,null,14)}}finally{Ft=0,st.length=0,Ac(),zn=!1,Bo=null,(st.length||Jr.length)&&Oc()}}function Wd(e,r,...t){if(e.isUnmounted)return;const n=e.vnode.props||Oe;let s=t;const i=r.startsWith("update:"),o=i&&r.slice(7);if(o&&o in n){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=n[u]||Oe;f&&(s=t.map(p=>ze(p)?p.trim():p)),h&&(s=t.map(Qh))}let a,c=n[a=ci(r)]||n[a=ci(Ut(r))];!c&&i&&(c=n[a=ci(ln(r))]),c&&Ot(c,e,6,s);const l=n[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ot(l,e,6,s)}}function Rc(e,r,t=!1){const n=r.emitsCache,s=n.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!de(e)){const c=l=>{const u=Rc(l,r,!0);u&&(a=!0,Xe(o,u))};!t&&r.mixins.length&&r.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!a?(Re(e)&&n.set(e,null),null):(ce(i)?i.forEach(c=>o[c]=null):Xe(o,i),Re(e)&&n.set(e,o),o)}function Xs(e,r){return!e||!Vs(r)?!1:(r=r.slice(2).replace(/Once$/,""),ye(e,r[0].toLowerCase()+r.slice(1))||ye(e,ln(r))||ye(e,r))}let lt=null,Mc=null;function Os(e){const r=lt;return lt=e,Mc=e&&e.type.__scopeId||null,r}function Q(e,r=lt,t){if(!r||e._n)return e;const n=(...s)=>{n._d&&qa(-1);const i=Os(r);let o;try{o=e(...s)}finally{Os(i),n._d&&qa(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function hi(e){const{type:r,vnode:t,proxy:n,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:f,setupState:p,ctx:g,inheritAttrs:y}=e;let S,x;const P=Os(e);try{if(t.shapeFlag&4){const H=s||n;S=It(u.call(H,H,h,i,p,f,g)),x=c}else{const H=r;S=It(H.length>1?H(i,{attrs:c,slots:a,emit:l}):H(i,null)),x=r.props?c:Gd(c)}}catch(H){Rn.length=0,Js(H,e,1),S=z(fr)}let J=S;if(x&&y!==!1){const H=Object.keys(x),{shapeFlag:V}=J;H.length&&V&7&&(o&&H.some(Eo)&&(x=Kd(x,o)),J=tn(J,x))}return t.dirs&&(J=tn(J),J.dirs=J.dirs?J.dirs.concat(t.dirs):t.dirs),t.transition&&(J.transition=t.transition),S=J,Os(P),S}const Gd=e=>{let r;for(const t in e)(t==="class"||t==="style"||Vs(t))&&((r||(r={}))[t]=e[t]);return r},Kd=(e,r)=>{const t={};for(const n in e)(!Eo(n)||!(n.slice(9)in r))&&(t[n]=e[n]);return t};function Yd(e,r,t){const{props:n,children:s,component:i}=e,{props:o,children:a,patchFlag:c}=r,l=i.emitsOptions;if(r.dirs||r.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return n?Ma(n,o,l):!!o;if(c&8){const u=r.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==n[f]&&!Xs(l,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Ma(n,o,l):!0:!!o;return!1}function Ma(e,r,t){const n=Object.keys(r);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(r[i]!==e[i]&&!Xs(t,i))return!0}return!1}function Jd({vnode:e,parent:r},t){for(;r&&r.subTree===e;)(e=r.vnode).el=t,r=r.parent}const Xd=e=>e.__isSuspense;function Qd(e,r){r&&r.pendingBranch?ce(e)?r.effects.push(...e):r.effects.push(e):qd(e)}const hs={};function di(e,r,t){return Nc(e,r,t)}function Nc(e,r,{immediate:t,deep:n,flush:s,onTrack:i,onTrigger:o}=Oe){var a;const c=ad()===((a=tt)==null?void 0:a.scope)?tt:null;let l,u=!1,h=!1;if(it(e)?(l=()=>e.value,u=As(e)):Yr(e)?(l=()=>e,n=!0):ce(e)?(h=!0,u=e.some(H=>Yr(H)||As(H)),l=()=>e.map(H=>{if(it(H))return H.value;if(Yr(H))return qr(H);if(de(H))return ur(H,c,2)})):de(e)?r?l=()=>ur(e,c,2):l=()=>{if(!(c&&c.isUnmounted))return f&&f(),Ot(e,c,3,[p])}:l=At,r&&n){const H=l;l=()=>qr(H())}let f,p=H=>{f=P.onStop=()=>{ur(H,c,4)}},g;if(jn)if(p=At,r?t&&Ot(r,c,3,[l(),h?[]:void 0,p]):l(),s==="sync"){const H=Wf();g=H.__watcherHandles||(H.__watcherHandles=[])}else return At;let y=h?new Array(e.length).fill(hs):hs;const S=()=>{if(P.active)if(r){const H=P.run();(n||u||(h?H.some((V,W)=>Fn(V,y[W])):Fn(H,y)))&&(f&&f(),Ot(r,c,3,[H,y===hs?void 0:h&&y[0]===hs?[]:y,p]),y=H)}else P.run()};S.allowRecurse=!!r;let x;s==="sync"?x=S:s==="post"?x=()=>ut(S,c&&c.suspense):(S.pre=!0,c&&(S.id=c.uid),x=()=>zo(S));const P=new Ro(l,x);r?t?S():y=P.run():s==="post"?ut(P.run.bind(P),c&&c.suspense):P.run();const J=()=>{P.stop(),c&&c.scope&&Po(c.scope.effects,P)};return g&&g.push(J),J}function Zd(e,r,t){const n=this.proxy,s=ze(e)?e.includes(".")?Lc(n,e):()=>n[e]:e.bind(n,n);let i;de(r)?i=r:(i=r.handler,t=r);const o=tt;rn(this);const a=Nc(s,i.bind(n),t);return o?rn(o):kr(),a}function Lc(e,r){const t=r.split(".");return()=>{let n=e;for(let s=0;s<t.length&&n;s++)n=n[t[s]];return n}}function qr(e,r){if(!Re(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),it(e))qr(e.value,r);else if(ce(e))for(let t=0;t<e.length;t++)qr(e[t],r);else if(oc(e)||Kr(e))e.forEach(t=>{qr(t,r)});else if(cc(e))for(const t in e)qr(e[t],r);return e}function br(e,r,t,n){const s=e.dirs,i=r&&r.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[n];c&&(cn(),Ot(c,t,8,[e.el,a,e,r]),un())}}function ue(e,r){return de(e)?(()=>Xe({name:e.name},r,{setup:e}))():e}const kn=e=>!!e.type.__asyncLoader,Ic=e=>e.type.__isKeepAlive;function ef(e,r){Dc(e,"a",r)}function tf(e,r){Dc(e,"da",r)}function Dc(e,r,t=tt){const n=e.__wdc||(e.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Qs(r,n,t),t){let s=t.parent;for(;s&&s.parent;)Ic(s.parent.vnode)&&rf(n,r,t,s),s=s.parent}}function rf(e,r,t,n){const s=Qs(r,e,n,!0);Lr(()=>{Po(n[r],s)},t)}function Qs(e,r,t=tt,n=!1){if(t){const s=t[e]||(t[e]=[]),i=r.__weh||(r.__weh=(...o)=>{if(t.isUnmounted)return;cn(),rn(t);const a=Ot(r,t,e,o);return kr(),un(),a});return n?s.unshift(i):s.push(i),i}}const Qt=e=>(r,t=tt)=>(!jn||e==="sp")&&Qs(e,(...n)=>r(...n),t),nf=Qt("bm"),_t=Qt("m"),sf=Qt("bu"),of=Qt("u"),af=Qt("bum"),Lr=Qt("um"),lf=Qt("sp"),cf=Qt("rtg"),uf=Qt("rtc");function hf(e,r=tt){Qs("ec",e,r)}const Ho="components";function ds(e,r){return zc(Ho,e,!0,r)||e}const Fc=Symbol.for("v-ndc");function Bc(e){return ze(e)?zc(Ho,e,!1)||e:e||Fc}function zc(e,r,t=!0,n=!1){const s=lt||tt;if(s){const i=s.type;if(e===Ho){const a=jf(i,!1);if(a&&(a===r||a===Ut(r)||a===Ks(Ut(r))))return i}const o=Na(s[e]||i[e],r)||Na(s.appContext[e],r);return!o&&n?i:o}}function Na(e,r){return e&&(e[r]||e[Ut(r)]||e[Ks(Ut(r))])}function Le(e,r,t,n){let s;const i=t&&t[n];if(ce(e)||ze(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=r(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=r(o+1,o,void 0,i&&i[o])}else if(Re(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>r(o,a,void 0,i&&i[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];s[a]=r(e[l],l,a,i&&i[a])}}else s=[];return t&&(t[n]=s),s}function Se(e,r,t={},n,s){if(lt.isCE||lt.parent&&kn(lt.parent)&&lt.parent.isCE)return r!=="default"&&(t.name=r),z("slot",t,n&&n());let i=e[r];i&&i._c&&(i._d=!1),C();const o=i&&Hc(i(t)),a=ge(fe,{key:t.key||o&&o.key||`_${r}`},o||(n?n():[]),o&&e._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function Hc(e){return e.some(r=>Ns(r)?!(r.type===fr||r.type===fe&&!Hc(r.children)):!0)?e:null}const Ki=e=>e?Zc(e)?Go(e)||e.proxy:Ki(e.parent):null,An=Xe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ki(e.parent),$root:e=>Ki(e.root),$emit:e=>e.emit,$options:e=>Uo(e),$forceUpdate:e=>e.f||(e.f=()=>zo(e.update)),$nextTick:e=>e.n||(e.n=Hd.bind(e.proxy)),$watch:e=>Zd.bind(e)}),fi=(e,r)=>e!==Oe&&!e.__isScriptSetup&&ye(e,r),df={get({_:e},r){const{ctx:t,setupState:n,data:s,props:i,accessCache:o,type:a,appContext:c}=e;let l;if(r[0]!=="$"){const p=o[r];if(p!==void 0)switch(p){case 1:return n[r];case 2:return s[r];case 4:return t[r];case 3:return i[r]}else{if(fi(n,r))return o[r]=1,n[r];if(s!==Oe&&ye(s,r))return o[r]=2,s[r];if((l=e.propsOptions[0])&&ye(l,r))return o[r]=3,i[r];if(t!==Oe&&ye(t,r))return o[r]=4,t[r];Yi&&(o[r]=0)}}const u=An[r];let h,f;if(u)return r==="$attrs"&&ft(e,"get",r),u(e);if((h=a.__cssModules)&&(h=h[r]))return h;if(t!==Oe&&ye(t,r))return o[r]=4,t[r];if(f=c.config.globalProperties,ye(f,r))return f[r]},set({_:e},r,t){const{data:n,setupState:s,ctx:i}=e;return fi(s,r)?(s[r]=t,!0):n!==Oe&&ye(n,r)?(n[r]=t,!0):ye(e.props,r)||r[0]==="$"&&r.slice(1)in e?!1:(i[r]=t,!0)},has({_:{data:e,setupState:r,accessCache:t,ctx:n,appContext:s,propsOptions:i}},o){let a;return!!t[o]||e!==Oe&&ye(e,o)||fi(r,o)||(a=i[0])&&ye(a,o)||ye(n,o)||ye(An,o)||ye(s.config.globalProperties,o)},defineProperty(e,r,t){return t.get!=null?e._.accessCache[r]=0:ye(t,"value")&&this.set(e,r,t.value,null),Reflect.defineProperty(e,r,t)}};function La(e){return ce(e)?e.reduce((r,t)=>(r[t]=null,r),{}):e}let Yi=!0;function ff(e){const r=Uo(e),t=e.proxy,n=e.ctx;Yi=!1,r.beforeCreate&&Ia(r.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:f,beforeUpdate:p,updated:g,activated:y,deactivated:S,beforeDestroy:x,beforeUnmount:P,destroyed:J,unmounted:H,render:V,renderTracked:W,renderTriggered:T,errorCaptured:N,serverPrefetch:M,expose:U,inheritAttrs:Z,components:te,directives:j,filters:L}=r;if(l&&pf(l,n,null),o)for(const w in o){const E=o[w];de(E)&&(n[w]=E.bind(t))}if(s){const w=s.call(t,t);Re(w)&&(e.data=Io(w))}if(Yi=!0,i)for(const w in i){const E=i[w],F=de(E)?E.bind(t,t):de(E.get)?E.get.bind(t,t):At,B=!de(E)&&de(E.set)?E.set.bind(t):At,oe=tu({get:F,set:B});Object.defineProperty(n,w,{enumerable:!0,configurable:!0,get:()=>oe.value,set:se=>oe.value=se})}if(a)for(const w in a)Uc(a[w],n,t,w);if(c){const w=de(c)?c.call(t):c;Reflect.ownKeys(w).forEach(E=>{bf(E,w[E])})}u&&Ia(u,e,"c");function G(w,E){ce(E)?E.forEach(F=>w(F.bind(t))):E&&w(E.bind(t))}if(G(nf,h),G(_t,f),G(sf,p),G(of,g),G(ef,y),G(tf,S),G(hf,N),G(uf,W),G(cf,T),G(af,P),G(Lr,H),G(lf,M),ce(U))if(U.length){const w=e.exposed||(e.exposed={});U.forEach(E=>{Object.defineProperty(w,E,{get:()=>t[E],set:F=>t[E]=F})})}else e.exposed||(e.exposed={});V&&e.render===At&&(e.render=V),Z!=null&&(e.inheritAttrs=Z),te&&(e.components=te),j&&(e.directives=j)}function pf(e,r,t=At){ce(e)&&(e=Ji(e));for(const n in e){const s=e[n];let i;Re(s)?"default"in s?i=xs(s.from||n,s.default,!0):i=xs(s.from||n):i=xs(s),it(i)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):r[n]=i}}function Ia(e,r,t){Ot(ce(e)?e.map(n=>n.bind(r.proxy)):e.bind(r.proxy),r,t)}function Uc(e,r,t,n){const s=n.includes(".")?Lc(t,n):()=>t[n];if(ze(e)){const i=r[e];de(i)&&di(s,i)}else if(de(e))di(s,e.bind(t));else if(Re(e))if(ce(e))e.forEach(i=>Uc(i,r,t,n));else{const i=de(e.handler)?e.handler.bind(t):r[e.handler];de(i)&&di(s,i,e)}}function Uo(e){const r=e.type,{mixins:t,extends:n}=r,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(r);let c;return a?c=a:!s.length&&!t&&!n?c=r:(c={},s.length&&s.forEach(l=>Rs(c,l,o,!0)),Rs(c,r,o)),Re(r)&&i.set(r,c),c}function Rs(e,r,t,n=!1){const{mixins:s,extends:i}=r;i&&Rs(e,i,t,!0),s&&s.forEach(o=>Rs(e,o,t,!0));for(const o in r)if(!(n&&o==="expose")){const a=mf[o]||t&&t[o];e[o]=a?a(e[o],r[o]):r[o]}return e}const mf={data:Da,props:Fa,emits:Fa,methods:Cn,computed:Cn,beforeCreate:at,created:at,beforeMount:at,mounted:at,beforeUpdate:at,updated:at,beforeDestroy:at,beforeUnmount:at,destroyed:at,unmounted:at,activated:at,deactivated:at,errorCaptured:at,serverPrefetch:at,components:Cn,directives:Cn,watch:yf,provide:Da,inject:gf};function Da(e,r){return r?e?function(){return Xe(de(e)?e.call(this,this):e,de(r)?r.call(this,this):r)}:r:e}function gf(e,r){return Cn(Ji(e),Ji(r))}function Ji(e){if(ce(e)){const r={};for(let t=0;t<e.length;t++)r[e[t]]=e[t];return r}return e}function at(e,r){return e?[...new Set([].concat(e,r))]:r}function Cn(e,r){return e?Xe(Object.create(null),e,r):r}function Fa(e,r){return e?ce(e)&&ce(r)?[...new Set([...e,...r])]:Xe(Object.create(null),La(e),La(r??{})):r}function yf(e,r){if(!e)return r;if(!r)return e;const t=Xe(Object.create(null),e);for(const n in r)t[n]=at(e[n],r[n]);return t}function jc(){return{app:null,config:{isNativeTag:Wh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vf=0;function _f(e,r){return function(n,s=null){de(n)||(n=Xe({},n)),s!=null&&!Re(s)&&(s=null);const i=jc(),o=new Set;let a=!1;const c=i.app={_uid:vf++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:Gf,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&de(l.install)?(o.add(l),l.install(c,...u)):de(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const f=z(n,s);return f.appContext=i,u&&r?r(f,l):e(f,l,h),a=!0,c._container=l,l.__vue_app__=c,Go(f.component)||f.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c},runWithContext(l){Ms=c;try{return l()}finally{Ms=null}}};return c}}let Ms=null;function bf(e,r){if(tt){let t=tt.provides;const n=tt.parent&&tt.parent.provides;n===t&&(t=tt.provides=Object.create(n)),t[e]=r}}function xs(e,r,t=!1){const n=tt||lt;if(n||Ms){const s=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Ms._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return t&&de(r)?r.call(n&&n.proxy):r}}function wf(e,r,t,n=!1){const s={},i={};ks(i,ei,1),e.propsDefaults=Object.create(null),qc(e,r,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);t?e.props=n?s:Nd(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function xf(e,r,t,n){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=xe(s),[c]=e.propsOptions;let l=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(Xs(e.emitsOptions,f))continue;const p=r[f];if(c)if(ye(i,f))p!==i[f]&&(i[f]=p,l=!0);else{const g=Ut(f);s[g]=Xi(c,a,g,p,e,!1)}else p!==i[f]&&(i[f]=p,l=!0)}}}else{qc(e,r,s,i)&&(l=!0);let u;for(const h in a)(!r||!ye(r,h)&&((u=ln(h))===h||!ye(r,u)))&&(c?t&&(t[h]!==void 0||t[u]!==void 0)&&(s[h]=Xi(c,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!r||!ye(r,h))&&(delete i[h],l=!0)}l&&Xt(e,"set","$attrs")}function qc(e,r,t,n){const[s,i]=e.propsOptions;let o=!1,a;if(r)for(let c in r){if(ws(c))continue;const l=r[c];let u;s&&ye(s,u=Ut(c))?!i||!i.includes(u)?t[u]=l:(a||(a={}))[u]=l:Xs(e.emitsOptions,c)||(!(c in n)||l!==n[c])&&(n[c]=l,o=!0)}if(i){const c=xe(t),l=a||Oe;for(let u=0;u<i.length;u++){const h=i[u];t[h]=Xi(s,c,h,l[h],e,!ye(l,h))}}return o}function Xi(e,r,t,n,s,i){const o=e[t];if(o!=null){const a=ye(o,"default");if(a&&n===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&de(c)){const{propsDefaults:l}=s;t in l?n=l[t]:(rn(s),n=l[t]=c.call(null,r),kr())}else n=c}o[0]&&(i&&!a?n=!1:o[1]&&(n===""||n===ln(t))&&(n=!0))}return n}function Vc(e,r,t=!1){const n=r.propsCache,s=n.get(e);if(s)return s;const i=e.props,o={},a=[];let c=!1;if(!de(e)){const u=h=>{c=!0;const[f,p]=Vc(h,r,!0);Xe(o,f),p&&a.push(...p)};!t&&r.mixins.length&&r.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!c)return Re(e)&&n.set(e,Gr),Gr;if(ce(i))for(let u=0;u<i.length;u++){const h=Ut(i[u]);Ba(h)&&(o[h]=Oe)}else if(i)for(const u in i){const h=Ut(u);if(Ba(h)){const f=i[u],p=o[h]=ce(f)||de(f)?{type:f}:Xe({},f);if(p){const g=Ua(Boolean,p.type),y=Ua(String,p.type);p[0]=g>-1,p[1]=y<0||g<y,(g>-1||ye(p,"default"))&&a.push(h)}}}const l=[o,a];return Re(e)&&n.set(e,l),l}function Ba(e){return e[0]!=="$"}function za(e){const r=e&&e.toString().match(/^\s*(function|class) (\w+)/);return r?r[2]:e===null?"null":""}function Ha(e,r){return za(e)===za(r)}function Ua(e,r){return ce(r)?r.findIndex(t=>Ha(t,e)):de(r)&&Ha(r,e)?0:-1}const Wc=e=>e[0]==="_"||e==="$stable",jo=e=>ce(e)?e.map(It):[It(e)],Sf=(e,r,t)=>{if(r._n)return r;const n=Q((...s)=>jo(r(...s)),t);return n._c=!1,n},Gc=(e,r,t)=>{const n=e._ctx;for(const s in e){if(Wc(s))continue;const i=e[s];if(de(i))r[s]=Sf(s,i,n);else if(i!=null){const o=jo(i);r[s]=()=>o}}},Kc=(e,r)=>{const t=jo(r);e.slots.default=()=>t},Cf=(e,r)=>{if(e.vnode.shapeFlag&32){const t=r._;t?(e.slots=xe(r),ks(r,"_",t)):Gc(r,e.slots={})}else e.slots={},r&&Kc(e,r);ks(e.slots,ei,1)},$f=(e,r,t)=>{const{vnode:n,slots:s}=e;let i=!0,o=Oe;if(n.shapeFlag&32){const a=r._;a?t&&a===1?i=!1:(Xe(s,r),!t&&a===1&&delete s._):(i=!r.$stable,Gc(r,s)),o=r}else r&&(Kc(e,r),o={default:1});if(i)for(const a in s)!Wc(a)&&!(a in o)&&delete s[a]};function Qi(e,r,t,n,s=!1){if(ce(e)){e.forEach((f,p)=>Qi(f,r&&(ce(r)?r[p]:r),t,n,s));return}if(kn(n)&&!s)return;const i=n.shapeFlag&4?Go(n.component)||n.component.proxy:n.el,o=s?null:i,{i:a,r:c}=e,l=r&&r.r,u=a.refs===Oe?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(ze(l)?(u[l]=null,ye(h,l)&&(h[l]=null)):it(l)&&(l.value=null)),de(c))ur(c,a,12,[o,u]);else{const f=ze(c),p=it(c);if(f||p){const g=()=>{if(e.f){const y=f?ye(h,c)?h[c]:u[c]:c.value;s?ce(y)&&Po(y,i):ce(y)?y.includes(i)||y.push(i):f?(u[c]=[i],ye(h,c)&&(h[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else f?(u[c]=o,ye(h,c)&&(h[c]=o)):p&&(c.value=o,e.k&&(u[e.k]=o))};o?(g.id=-1,ut(g,t)):g()}}}const ut=Qd;function Tf(e){return Ef(e)}function Ef(e,r){const t=Ui();t.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:f,setScopeId:p=At,insertStaticContent:g}=e,y=(v,_,A,D=null,I=null,Y=null,ee=!1,K=null,X=!!_.dynamicChildren)=>{if(v===_)return;v&&!yn(v,_)&&(D=pt(v),se(v,I,Y,!0),v=null),_.patchFlag===-2&&(X=!1,_.dynamicChildren=null);const{type:q,ref:ae,shapeFlag:ne}=_;switch(q){case Zs:S(v,_,A,D);break;case fr:x(v,_,A,D);break;case pi:v==null&&P(_,A,D,ee);break;case fe:te(v,_,A,D,I,Y,ee,K,X);break;default:ne&1?V(v,_,A,D,I,Y,ee,K,X):ne&6?j(v,_,A,D,I,Y,ee,K,X):(ne&64||ne&128)&&q.process(v,_,A,D,I,Y,ee,K,X,Fe)}ae!=null&&I&&Qi(ae,v&&v.ref,Y,_||v,!_)},S=(v,_,A,D)=>{if(v==null)n(_.el=a(_.children),A,D);else{const I=_.el=v.el;_.children!==v.children&&l(I,_.children)}},x=(v,_,A,D)=>{v==null?n(_.el=c(_.children||""),A,D):_.el=v.el},P=(v,_,A,D)=>{[v.el,v.anchor]=g(v.children,_,A,D,v.el,v.anchor)},J=({el:v,anchor:_},A,D)=>{let I;for(;v&&v!==_;)I=f(v),n(v,A,D),v=I;n(_,A,D)},H=({el:v,anchor:_})=>{let A;for(;v&&v!==_;)A=f(v),s(v),v=A;s(_)},V=(v,_,A,D,I,Y,ee,K,X)=>{ee=ee||_.type==="svg",v==null?W(_,A,D,I,Y,ee,K,X):M(v,_,I,Y,ee,K,X)},W=(v,_,A,D,I,Y,ee,K)=>{let X,q;const{type:ae,props:ne,shapeFlag:le,transition:he,dirs:pe}=v;if(X=v.el=o(v.type,Y,ne&&ne.is,ne),le&8?u(X,v.children):le&16&&N(v.children,X,null,D,I,Y&&ae!=="foreignObject",ee,K),pe&&br(v,null,D,"created"),T(X,v,v.scopeId,ee,D),ne){for(const Te in ne)Te!=="value"&&!ws(Te)&&i(X,Te,null,ne[Te],Y,v.children,D,I,Qe);"value"in ne&&i(X,"value",null,ne.value),(q=ne.onVnodeBeforeMount)&&Mt(q,D,v)}pe&&br(v,null,D,"beforeMount");const Pe=(!I||I&&!I.pendingBranch)&&he&&!he.persisted;Pe&&he.beforeEnter(X),n(X,_,A),((q=ne&&ne.onVnodeMounted)||Pe||pe)&&ut(()=>{q&&Mt(q,D,v),Pe&&he.enter(X),pe&&br(v,null,D,"mounted")},I)},T=(v,_,A,D,I)=>{if(A&&p(v,A),D)for(let Y=0;Y<D.length;Y++)p(v,D[Y]);if(I){let Y=I.subTree;if(_===Y){const ee=I.vnode;T(v,ee,ee.scopeId,ee.slotScopeIds,I.parent)}}},N=(v,_,A,D,I,Y,ee,K,X=0)=>{for(let q=X;q<v.length;q++){const ae=v[q]=K?ir(v[q]):It(v[q]);y(null,ae,_,A,D,I,Y,ee,K)}},M=(v,_,A,D,I,Y,ee)=>{const K=_.el=v.el;let{patchFlag:X,dynamicChildren:q,dirs:ae}=_;X|=v.patchFlag&16;const ne=v.props||Oe,le=_.props||Oe;let he;A&&wr(A,!1),(he=le.onVnodeBeforeUpdate)&&Mt(he,A,_,v),ae&&br(_,v,A,"beforeUpdate"),A&&wr(A,!0);const pe=I&&_.type!=="foreignObject";if(q?U(v.dynamicChildren,q,K,A,D,pe,Y):ee||E(v,_,K,null,A,D,pe,Y,!1),X>0){if(X&16)Z(K,_,ne,le,A,D,I);else if(X&2&&ne.class!==le.class&&i(K,"class",null,le.class,I),X&4&&i(K,"style",ne.style,le.style,I),X&8){const Pe=_.dynamicProps;for(let Te=0;Te<Pe.length;Te++){const He=Pe[Te],Ct=ne[He],Fr=le[He];(Fr!==Ct||He==="value")&&i(K,He,Ct,Fr,I,v.children,A,D,Qe)}}X&1&&v.children!==_.children&&u(K,_.children)}else!ee&&q==null&&Z(K,_,ne,le,A,D,I);((he=le.onVnodeUpdated)||ae)&&ut(()=>{he&&Mt(he,A,_,v),ae&&br(_,v,A,"updated")},D)},U=(v,_,A,D,I,Y,ee)=>{for(let K=0;K<_.length;K++){const X=v[K],q=_[K],ae=X.el&&(X.type===fe||!yn(X,q)||X.shapeFlag&70)?h(X.el):A;y(X,q,ae,null,D,I,Y,ee,!0)}},Z=(v,_,A,D,I,Y,ee)=>{if(A!==D){if(A!==Oe)for(const K in A)!ws(K)&&!(K in D)&&i(v,K,A[K],null,ee,_.children,I,Y,Qe);for(const K in D){if(ws(K))continue;const X=D[K],q=A[K];X!==q&&K!=="value"&&i(v,K,q,X,ee,_.children,I,Y,Qe)}"value"in D&&i(v,"value",A.value,D.value)}},te=(v,_,A,D,I,Y,ee,K,X)=>{const q=_.el=v?v.el:a(""),ae=_.anchor=v?v.anchor:a("");let{patchFlag:ne,dynamicChildren:le,slotScopeIds:he}=_;he&&(K=K?K.concat(he):he),v==null?(n(q,A,D),n(ae,A,D),N(_.children,A,ae,I,Y,ee,K,X)):ne>0&&ne&64&&le&&v.dynamicChildren?(U(v.dynamicChildren,le,A,I,Y,ee,K),(_.key!=null||I&&_===I.subTree)&&qo(v,_,!0)):E(v,_,A,ae,I,Y,ee,K,X)},j=(v,_,A,D,I,Y,ee,K,X)=>{_.slotScopeIds=K,v==null?_.shapeFlag&512?I.ctx.activate(_,A,D,ee,X):L(_,A,D,I,Y,ee,X):k(v,_,X)},L=(v,_,A,D,I,Y,ee)=>{const K=v.component=Ff(v,D,I);if(Ic(v)&&(K.ctx.renderer=Fe),Bf(K),K.asyncDep){if(I&&I.registerDep(K,G),!v.el){const X=K.subTree=z(fr);x(null,X,_,A)}return}G(K,v,_,A,I,Y,ee)},k=(v,_,A)=>{const D=_.component=v.component;if(Yd(v,_,A))if(D.asyncDep&&!D.asyncResolved){w(D,_,A);return}else D.next=_,jd(D.update),D.update();else _.el=v.el,D.vnode=_},G=(v,_,A,D,I,Y,ee)=>{const K=()=>{if(v.isMounted){let{next:ae,bu:ne,u:le,parent:he,vnode:pe}=v,Pe=ae,Te;wr(v,!1),ae?(ae.el=pe.el,w(v,ae,ee)):ae=pe,ne&&ui(ne),(Te=ae.props&&ae.props.onVnodeBeforeUpdate)&&Mt(Te,he,ae,pe),wr(v,!0);const He=hi(v),Ct=v.subTree;v.subTree=He,y(Ct,He,h(Ct.el),pt(Ct),v,I,Y),ae.el=He.el,Pe===null&&Jd(v,He.el),le&&ut(le,I),(Te=ae.props&&ae.props.onVnodeUpdated)&&ut(()=>Mt(Te,he,ae,pe),I)}else{let ae;const{el:ne,props:le}=_,{bm:he,m:pe,parent:Pe}=v,Te=kn(_);if(wr(v,!1),he&&ui(he),!Te&&(ae=le&&le.onVnodeBeforeMount)&&Mt(ae,Pe,_),wr(v,!0),ne&&_r){const He=()=>{v.subTree=hi(v),_r(ne,v.subTree,v,I,null)};Te?_.type.__asyncLoader().then(()=>!v.isUnmounted&&He()):He()}else{const He=v.subTree=hi(v);y(null,He,A,D,v,I,Y),_.el=He.el}if(pe&&ut(pe,I),!Te&&(ae=le&&le.onVnodeMounted)){const He=_;ut(()=>Mt(ae,Pe,He),I)}(_.shapeFlag&256||Pe&&kn(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&v.a&&ut(v.a,I),v.isMounted=!0,_=A=D=null}},X=v.effect=new Ro(K,()=>zo(q),v.scope),q=v.update=()=>X.run();q.id=v.uid,wr(v,!0),q()},w=(v,_,A)=>{_.component=v;const D=v.vnode.props;v.vnode=_,v.next=null,xf(v,_.props,D,A),$f(v,_.children,A),cn(),Ra(),un()},E=(v,_,A,D,I,Y,ee,K,X=!1)=>{const q=v&&v.children,ae=v?v.shapeFlag:0,ne=_.children,{patchFlag:le,shapeFlag:he}=_;if(le>0){if(le&128){B(q,ne,A,D,I,Y,ee,K,X);return}else if(le&256){F(q,ne,A,D,I,Y,ee,K,X);return}}he&8?(ae&16&&Qe(q,I,Y),ne!==q&&u(A,ne)):ae&16?he&16?B(q,ne,A,D,I,Y,ee,K,X):Qe(q,I,Y,!0):(ae&8&&u(A,""),he&16&&N(ne,A,D,I,Y,ee,K,X))},F=(v,_,A,D,I,Y,ee,K,X)=>{v=v||Gr,_=_||Gr;const q=v.length,ae=_.length,ne=Math.min(q,ae);let le;for(le=0;le<ne;le++){const he=_[le]=X?ir(_[le]):It(_[le]);y(v[le],he,A,null,I,Y,ee,K,X)}q>ae?Qe(v,I,Y,!0,!1,ne):N(_,A,D,I,Y,ee,K,X,ne)},B=(v,_,A,D,I,Y,ee,K,X)=>{let q=0;const ae=_.length;let ne=v.length-1,le=ae-1;for(;q<=ne&&q<=le;){const he=v[q],pe=_[q]=X?ir(_[q]):It(_[q]);if(yn(he,pe))y(he,pe,A,null,I,Y,ee,K,X);else break;q++}for(;q<=ne&&q<=le;){const he=v[ne],pe=_[le]=X?ir(_[le]):It(_[le]);if(yn(he,pe))y(he,pe,A,null,I,Y,ee,K,X);else break;ne--,le--}if(q>ne){if(q<=le){const he=le+1,pe=he<ae?_[he].el:D;for(;q<=le;)y(null,_[q]=X?ir(_[q]):It(_[q]),A,pe,I,Y,ee,K,X),q++}}else if(q>le)for(;q<=ne;)se(v[q],I,Y,!0),q++;else{const he=q,pe=q,Pe=new Map;for(q=pe;q<=le;q++){const mt=_[q]=X?ir(_[q]):It(_[q]);mt.key!=null&&Pe.set(mt.key,q)}let Te,He=0;const Ct=le-pe+1;let Fr=!1,wa=0;const gn=new Array(Ct);for(q=0;q<Ct;q++)gn[q]=0;for(q=he;q<=ne;q++){const mt=v[q];if(He>=Ct){se(mt,I,Y,!0);continue}let Rt;if(mt.key!=null)Rt=Pe.get(mt.key);else for(Te=pe;Te<=le;Te++)if(gn[Te-pe]===0&&yn(mt,_[Te])){Rt=Te;break}Rt===void 0?se(mt,I,Y,!0):(gn[Rt-pe]=q+1,Rt>=wa?wa=Rt:Fr=!0,y(mt,_[Rt],A,null,I,Y,ee,K,X),He++)}const xa=Fr?Pf(gn):Gr;for(Te=xa.length-1,q=Ct-1;q>=0;q--){const mt=pe+q,Rt=_[mt],Sa=mt+1<ae?_[mt+1].el:D;gn[q]===0?y(null,Rt,A,Sa,I,Y,ee,K,X):Fr&&(Te<0||q!==xa[Te]?oe(Rt,A,Sa,2):Te--)}}},oe=(v,_,A,D,I=null)=>{const{el:Y,type:ee,transition:K,children:X,shapeFlag:q}=v;if(q&6){oe(v.component.subTree,_,A,D);return}if(q&128){v.suspense.move(_,A,D);return}if(q&64){ee.move(v,_,A,Fe);return}if(ee===fe){n(Y,_,A);for(let ne=0;ne<X.length;ne++)oe(X[ne],_,A,D);n(v.anchor,_,A);return}if(ee===pi){J(v,_,A);return}if(D!==2&&q&1&&K)if(D===0)K.beforeEnter(Y),n(Y,_,A),ut(()=>K.enter(Y),I);else{const{leave:ne,delayLeave:le,afterLeave:he}=K,pe=()=>n(Y,_,A),Pe=()=>{ne(Y,()=>{pe(),he&&he()})};le?le(Y,pe,Pe):Pe()}else n(Y,_,A)},se=(v,_,A,D=!1,I=!1)=>{const{type:Y,props:ee,ref:K,children:X,dynamicChildren:q,shapeFlag:ae,patchFlag:ne,dirs:le}=v;if(K!=null&&Qi(K,null,A,v,!0),ae&256){_.ctx.deactivate(v);return}const he=ae&1&&le,pe=!kn(v);let Pe;if(pe&&(Pe=ee&&ee.onVnodeBeforeUnmount)&&Mt(Pe,_,v),ae&6)ct(v.component,A,D);else{if(ae&128){v.suspense.unmount(A,D);return}he&&br(v,null,_,"beforeUnmount"),ae&64?v.type.remove(v,_,A,I,Fe,D):q&&(Y!==fe||ne>0&&ne&64)?Qe(q,_,A,!1,!0):(Y===fe&&ne&384||!I&&ae&16)&&Qe(X,_,A),D&&_e(v)}(pe&&(Pe=ee&&ee.onVnodeUnmounted)||he)&&ut(()=>{Pe&&Mt(Pe,_,v),he&&br(v,null,_,"unmounted")},A)},_e=v=>{const{type:_,el:A,anchor:D,transition:I}=v;if(_===fe){qe(A,D);return}if(_===pi){H(v);return}const Y=()=>{s(A),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(v.shapeFlag&1&&I&&!I.persisted){const{leave:ee,delayLeave:K}=I,X=()=>ee(A,Y);K?K(v.el,Y,X):X()}else Y()},qe=(v,_)=>{let A;for(;v!==_;)A=f(v),s(v),v=A;s(_)},ct=(v,_,A)=>{const{bum:D,scope:I,update:Y,subTree:ee,um:K}=v;D&&ui(D),I.stop(),Y&&(Y.active=!1,se(ee,v,_,A)),K&&ut(K,_),ut(()=>{v.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},Qe=(v,_,A,D=!1,I=!1,Y=0)=>{for(let ee=Y;ee<v.length;ee++)se(v[ee],_,A,D,I)},pt=v=>v.shapeFlag&6?pt(v.component.subTree):v.shapeFlag&128?v.suspense.next():f(v.anchor||v.el),St=(v,_,A)=>{v==null?_._vnode&&se(_._vnode,null,null,!0):y(_._vnode||null,v,_,null,null,null,A),Ra(),Ac(),_._vnode=v},Fe={p:y,um:se,m:oe,r:_e,mt:L,mc:N,pc:E,pbc:U,n:pt,o:e};let bt,_r;return r&&([bt,_r]=r(Fe)),{render:St,hydrate:bt,createApp:_f(St,bt)}}function wr({effect:e,update:r},t){e.allowRecurse=r.allowRecurse=t}function qo(e,r,t=!1){const n=e.children,s=r.children;if(ce(n)&&ce(s))for(let i=0;i<n.length;i++){const o=n[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=ir(s[i]),a.el=o.el),t||qo(o,a)),a.type===Zs&&(a.el=o.el)}}function Pf(e){const r=e.slice(),t=[0];let n,s,i,o,a;const c=e.length;for(n=0;n<c;n++){const l=e[n];if(l!==0){if(s=t[t.length-1],e[s]<l){r[n]=s,t.push(n);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,e[t[a]]<l?i=a+1:o=a;l<e[t[i]]&&(i>0&&(r[n]=t[i-1]),t[i]=n)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=r[o];return t}const kf=e=>e.__isTeleport,On=e=>e&&(e.disabled||e.disabled===""),ja=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Zi=(e,r)=>{const t=e&&e.to;return ze(t)?r?r(t):null:t},Af={__isTeleport:!0,process(e,r,t,n,s,i,o,a,c,l){const{mc:u,pc:h,pbc:f,o:{insert:p,querySelector:g,createText:y,createComment:S}}=l,x=On(r.props);let{shapeFlag:P,children:J,dynamicChildren:H}=r;if(e==null){const V=r.el=y(""),W=r.anchor=y("");p(V,t,n),p(W,t,n);const T=r.target=Zi(r.props,g),N=r.targetAnchor=y("");T&&(p(N,T),o=o||ja(T));const M=(U,Z)=>{P&16&&u(J,U,Z,s,i,o,a,c)};x?M(t,W):T&&M(T,N)}else{r.el=e.el;const V=r.anchor=e.anchor,W=r.target=e.target,T=r.targetAnchor=e.targetAnchor,N=On(e.props),M=N?t:W,U=N?V:T;if(o=o||ja(W),H?(f(e.dynamicChildren,H,M,s,i,o,a),qo(e,r,!0)):c||h(e,r,M,U,s,i,o,a,!1),x)N||fs(r,t,V,l,1);else if((r.props&&r.props.to)!==(e.props&&e.props.to)){const Z=r.target=Zi(r.props,g);Z&&fs(r,Z,null,l,0)}else N&&fs(r,W,T,l,1)}Jc(r)},remove(e,r,t,n,{um:s,o:{remove:i}},o){const{shapeFlag:a,children:c,anchor:l,targetAnchor:u,target:h,props:f}=e;if(h&&i(u),(o||!On(f))&&(i(l),a&16))for(let p=0;p<c.length;p++){const g=c[p];s(g,r,t,!0,!!g.dynamicChildren)}},move:fs,hydrate:Of};function fs(e,r,t,{o:{insert:n},m:s},i=2){i===0&&n(e.targetAnchor,r,t);const{el:o,anchor:a,shapeFlag:c,children:l,props:u}=e,h=i===2;if(h&&n(o,r,t),(!h||On(u))&&c&16)for(let f=0;f<l.length;f++)s(l[f],r,t,2);h&&n(a,r,t)}function Of(e,r,t,n,s,i,{o:{nextSibling:o,parentNode:a,querySelector:c}},l){const u=r.target=Zi(r.props,c);if(u){const h=u._lpa||u.firstChild;if(r.shapeFlag&16)if(On(r.props))r.anchor=l(o(e),r,a(e),t,n,s,i),r.targetAnchor=h;else{r.anchor=o(e);let f=h;for(;f;)if(f=o(f),f&&f.nodeType===8&&f.data==="teleport anchor"){r.targetAnchor=f,u._lpa=r.targetAnchor&&o(r.targetAnchor);break}l(h,r,u,t,n,s,i)}Jc(r)}return r.anchor&&o(r.anchor)}const Yc=Af;function Jc(e){const r=e.ctx;if(r&&r.ut){let t=e.children[0].el;for(;t!==e.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",r.uid),t=t.nextSibling;r.ut()}}const fe=Symbol.for("v-fgt"),Zs=Symbol.for("v-txt"),fr=Symbol.for("v-cmt"),pi=Symbol.for("v-stc"),Rn=[];let Pt=null;function C(e=!1){Rn.push(Pt=e?null:[])}function Rf(){Rn.pop(),Pt=Rn[Rn.length-1]||null}let Un=1;function qa(e){Un+=e}function Xc(e){return e.dynamicChildren=Un>0?Pt||Gr:null,Rf(),Un>0&&Pt&&Pt.push(e),e}function R(e,r,t,n,s,i){return Xc(m(e,r,t,n,s,i,!0))}function ge(e,r,t,n,s){return Xc(z(e,r,t,n,s,!0))}function Ns(e){return e?e.__v_isVNode===!0:!1}function yn(e,r){return e.type===r.type&&e.key===r.key}const ei="__vInternal",Qc=({key:e})=>e??null,Ss=({ref:e,ref_key:r,ref_for:t})=>(typeof e=="number"&&(e=""+e),e!=null?ze(e)||it(e)||de(e)?{i:lt,r:e,k:r,f:!!t}:e:null);function m(e,r=null,t=null,n=0,s=null,i=e===fe?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:r,key:r&&Qc(r),ref:r&&Ss(r),scopeId:Mc,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:lt};return a?(Vo(c,t),i&128&&e.normalize(c)):t&&(c.shapeFlag|=ze(t)?8:16),Un>0&&!o&&Pt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Pt.push(c),c}const z=Mf;function Mf(e,r=null,t=null,n=0,s=null,i=!1){if((!e||e===Fc)&&(e=fr),Ns(e)){const a=tn(e,r,!0);return t&&Vo(a,t),Un>0&&!i&&Pt&&(a.shapeFlag&6?Pt[Pt.indexOf(e)]=a:Pt.push(a)),a.patchFlag|=-2,a}if(qf(e)&&(e=e.__vccOpts),r){r=Nf(r);let{class:a,style:c}=r;a&&!ze(a)&&(r.class=Ce(a)),Re(c)&&(Sc(c)&&!ce(c)&&(c=Xe({},c)),r.style=dt(c))}const o=ze(e)?1:Xd(e)?128:kf(e)?64:Re(e)?4:de(e)?2:0;return m(e,r,t,n,s,o,i,!0)}function Nf(e){return e?Sc(e)||ei in e?Xe({},e):e:null}function tn(e,r,t=!1){const{props:n,ref:s,patchFlag:i,children:o}=e,a=r?Lf(n||{},r):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Qc(a),ref:r&&r.ref?t&&s?ce(s)?s.concat(Ss(r)):[s,Ss(r)]:Ss(r):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:r&&e.type!==fe?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&tn(e.ssContent),ssFallback:e.ssFallback&&tn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function pr(e=" ",r=0){return z(Zs,null,e,r)}function be(e="",r=!1){return r?(C(),ge(fr,null,e)):z(fr,null,e)}function It(e){return e==null||typeof e=="boolean"?z(fr):ce(e)?z(fe,null,e.slice()):typeof e=="object"?ir(e):z(Zs,null,String(e))}function ir(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:tn(e)}function Vo(e,r){let t=0;const{shapeFlag:n}=e;if(r==null)r=null;else if(ce(r))t=16;else if(typeof r=="object")if(n&65){const s=r.default;s&&(s._c&&(s._d=!1),Vo(e,s()),s._c&&(s._d=!0));return}else{t=32;const s=r._;!s&&!(ei in r)?r._ctx=lt:s===3&&lt&&(lt.slots._===1?r._=1:(r._=2,e.patchFlag|=1024))}else de(r)?(r={default:r,_ctx:lt},t=32):(r=String(r),n&64?(t=16,r=[pr(r)]):t=8);e.children=r,e.shapeFlag|=t}function Lf(...e){const r={};for(let t=0;t<e.length;t++){const n=e[t];for(const s in n)if(s==="class")r.class!==n.class&&(r.class=Ce([r.class,n.class]));else if(s==="style")r.style=dt([r.style,n.style]);else if(Vs(s)){const i=r[s],o=n[s];o&&i!==o&&!(ce(i)&&i.includes(o))&&(r[s]=i?[].concat(i,o):o)}else s!==""&&(r[s]=n[s])}return r}function Mt(e,r,t,n=null){Ot(e,r,7,[t,n])}const If=jc();let Df=0;function Ff(e,r,t){const n=e.type,s=(r?r.appContext:e.appContext)||If,i={uid:Df++,vnode:e,type:n,parent:r,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new id(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vc(n,s),emitsOptions:Rc(n,s),emit:null,emitted:null,propsDefaults:Oe,inheritAttrs:n.inheritAttrs,ctx:Oe,data:Oe,props:Oe,attrs:Oe,slots:Oe,refs:Oe,setupState:Oe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=r?r.root:i,i.emit=Wd.bind(null,i),e.ce&&e.ce(i),i}let tt=null,Wo,Br,Va="__VUE_INSTANCE_SETTERS__";(Br=Ui()[Va])||(Br=Ui()[Va]=[]),Br.push(e=>tt=e),Wo=e=>{Br.length>1?Br.forEach(r=>r(e)):Br[0](e)};const rn=e=>{Wo(e),e.scope.on()},kr=()=>{tt&&tt.scope.off(),Wo(null)};function Zc(e){return e.vnode.shapeFlag&4}let jn=!1;function Bf(e,r=!1){jn=r;const{props:t,children:n}=e.vnode,s=Zc(e);wf(e,t,s,r),Cf(e,n);const i=s?zf(e,r):void 0;return jn=!1,i}function zf(e,r){const t=e.type;e.accessCache=Object.create(null),e.proxy=Cc(new Proxy(e.ctx,df));const{setup:n}=t;if(n){const s=e.setupContext=n.length>1?Uf(e):null;rn(e),cn();const i=ur(n,e,0,[e.props,s]);if(un(),kr(),ac(i)){if(i.then(kr,kr),r)return i.then(o=>{Wa(e,o,r)}).catch(o=>{Js(o,e,0)});e.asyncDep=i}else Wa(e,i,r)}else eu(e,r)}function Wa(e,r,t){de(r)?e.type.__ssrInlineRender?e.ssrRender=r:e.render=r:Re(r)&&(e.setupState=Ec(r)),eu(e,t)}let Ga;function eu(e,r,t){const n=e.type;if(!e.render){if(!r&&Ga&&!n.render){const s=n.template||Uo(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:c}=n,l=Xe(Xe({isCustomElement:i,delimiters:a},o),c);n.render=Ga(s,l)}}e.render=n.render||At}rn(e),cn(),ff(e),un(),kr()}function Hf(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(r,t){return ft(e,"get","$attrs"),r[t]}}))}function Uf(e){const r=t=>{e.exposed=t||{}};return{get attrs(){return Hf(e)},slots:e.slots,emit:e.emit,expose:r}}function Go(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ec(Cc(e.exposed)),{get(r,t){if(t in r)return r[t];if(t in An)return An[t](e)},has(r,t){return t in r||t in An}}))}function jf(e,r=!0){return de(e)?e.displayName||e.name:e.name||r&&e.__name}function qf(e){return de(e)&&"__vccOpts"in e}const tu=(e,r)=>Bd(e,r,jn);function eo(e,r,t){const n=arguments.length;return n===2?Re(r)&&!ce(r)?Ns(r)?z(e,null,[r]):z(e,r):z(e,null,r):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&Ns(t)&&(t=[t]),z(e,r,t))}const Vf=Symbol.for("v-scx"),Wf=()=>xs(Vf),Gf="3.3.4",Kf="http://www.w3.org/2000/svg",$r=typeof document<"u"?document:null,Ka=$r&&$r.createElement("template"),Yf={insert:(e,r,t)=>{r.insertBefore(e,t||null)},remove:e=>{const r=e.parentNode;r&&r.removeChild(e)},createElement:(e,r,t,n)=>{const s=r?$r.createElementNS(Kf,e):$r.createElement(e,t?{is:t}:void 0);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>$r.createTextNode(e),createComment:e=>$r.createComment(e),setText:(e,r)=>{e.nodeValue=r},setElementText:(e,r)=>{e.textContent=r},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>$r.querySelector(e),setScopeId(e,r){e.setAttribute(r,"")},insertStaticContent(e,r,t,n,s,i){const o=t?t.previousSibling:r.lastChild;if(s&&(s===i||s.nextSibling))for(;r.insertBefore(s.cloneNode(!0),t),!(s===i||!(s=s.nextSibling)););else{Ka.innerHTML=n?`<svg>${e}</svg>`:e;const a=Ka.content;if(n){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}r.insertBefore(a,t)}return[o?o.nextSibling:r.firstChild,t?t.previousSibling:r.lastChild]}};function Jf(e,r,t){const n=e._vtc;n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?e.removeAttribute("class"):t?e.setAttribute("class",r):e.className=r}function Xf(e,r,t){const n=e.style,s=ze(t);if(t&&!s){if(r&&!ze(r))for(const i in r)t[i]==null&&to(n,i,"");for(const i in t)to(n,i,t[i])}else{const i=n.display;s?r!==t&&(n.cssText=t):r&&e.removeAttribute("style"),"_vod"in e&&(n.display=i)}}const Ya=/\s*!important$/;function to(e,r,t){if(ce(t))t.forEach(n=>to(e,r,n));else if(t==null&&(t=""),r.startsWith("--"))e.setProperty(r,t);else{const n=Qf(e,r);Ya.test(t)?e.setProperty(ln(n),t.replace(Ya,""),"important"):e[n]=t}}const Ja=["Webkit","Moz","ms"],mi={};function Qf(e,r){const t=mi[r];if(t)return t;let n=Ut(r);if(n!=="filter"&&n in e)return mi[r]=n;n=Ks(n);for(let s=0;s<Ja.length;s++){const i=Ja[s]+n;if(i in e)return mi[r]=i}return r}const Xa="http://www.w3.org/1999/xlink";function Zf(e,r,t,n,s){if(n&&r.startsWith("xlink:"))t==null?e.removeAttributeNS(Xa,r.slice(6,r.length)):e.setAttributeNS(Xa,r,t);else{const i=sd(r);t==null||i&&!uc(t)?e.removeAttribute(r):e.setAttribute(r,i?"":t)}}function ep(e,r,t,n,s,i,o){if(r==="innerHTML"||r==="textContent"){n&&o(n,s,i),e[r]=t??"";return}const a=e.tagName;if(r==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=t;const l=a==="OPTION"?e.getAttribute("value"):e.value,u=t??"";l!==u&&(e.value=u),t==null&&e.removeAttribute(r);return}let c=!1;if(t===""||t==null){const l=typeof e[r];l==="boolean"?t=uc(t):t==null&&l==="string"?(t="",c=!0):l==="number"&&(t=0,c=!0)}try{e[r]=t}catch{}c&&e.removeAttribute(r)}function tp(e,r,t,n){e.addEventListener(r,t,n)}function rp(e,r,t,n){e.removeEventListener(r,t,n)}function np(e,r,t,n,s=null){const i=e._vei||(e._vei={}),o=i[r];if(n&&o)o.value=n;else{const[a,c]=sp(r);if(n){const l=i[r]=ap(n,s);tp(e,a,l,c)}else o&&(rp(e,a,o,c),i[r]=void 0)}}const Qa=/(?:Once|Passive|Capture)$/;function sp(e){let r;if(Qa.test(e)){r={};let n;for(;n=e.match(Qa);)e=e.slice(0,e.length-n[0].length),r[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ln(e.slice(2)),r]}let gi=0;const ip=Promise.resolve(),op=()=>gi||(ip.then(()=>gi=0),gi=Date.now());function ap(e,r){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;Ot(lp(n,t.value),r,5,[n])};return t.value=e,t.attached=op(),t}function lp(e,r){if(ce(r)){const t=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{t.call(e),e._stopped=!0},r.map(n=>s=>!s._stopped&&n&&n(s))}else return r}const Za=/^on[a-z]/,cp=(e,r,t,n,s=!1,i,o,a,c)=>{r==="class"?Jf(e,n,s):r==="style"?Xf(e,t,n):Vs(r)?Eo(r)||np(e,r,t,n,o):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):up(e,r,n,s))?ep(e,r,n,i,o,a,c):(r==="true-value"?e._trueValue=n:r==="false-value"&&(e._falseValue=n),Zf(e,r,n,s))};function up(e,r,t,n){return n?!!(r==="innerHTML"||r==="textContent"||r in e&&Za.test(r)&&de(t)):r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&e.tagName==="INPUT"||r==="type"&&e.tagName==="TEXTAREA"||Za.test(r)&&ze(t)?!1:r in e}const hp=["ctrl","shift","alt","meta"],dp={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,r)=>hp.some(t=>e[`${t}Key`]&&!r.includes(t))},Xr=(e,r)=>(t,...n)=>{for(let s=0;s<r.length;s++){const i=dp[r[s]];if(i&&i(t,r))return}return e(t,...n)},fp=Xe({patchProp:cp},Yf);let el;function pp(){return el||(el=Tf(fp))}const mp=(...e)=>{const r=pp().createApp(...e),{mount:t}=r;return r.mount=n=>{const s=gp(n);if(!s)return;const i=r._component;!de(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=t(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},r};function gp(e){return ze(e)?document.querySelector(e):e}function ru(e){var r,t,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(r=0;r<e.length;r++)e[r]&&(t=ru(e[r]))&&(n&&(n+=" "),n+=t);else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function yp(){for(var e,r,t=0,n="";t<arguments.length;)(e=arguments[t++])&&(r=ru(e))&&(n&&(n+=" "),n+=r);return n}const tl=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,rl=yp,vp=(e,r)=>t=>{var n;if((r==null?void 0:r.variants)==null)return rl(e,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=r,o=Object.keys(s).map(l=>{const u=t==null?void 0:t[l],h=i==null?void 0:i[l];if(u===null)return null;const f=tl(u)||tl(h);return s[l][f]}),a=t&&Object.entries(t).reduce((l,u)=>{let[h,f]=u;return f===void 0||(l[h]=f),l},{}),c=r==null||(n=r.compoundVariants)===null||n===void 0?void 0:n.reduce((l,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(g=>{let[y,S]=g;return Array.isArray(S)?S.includes({...i,...a}[y]):{...i,...a}[y]===S})?[...l,h,f]:l},[]);return rl(e,o,c,t==null?void 0:t.class,t==null?void 0:t.className)};var qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ti(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _p(e){if(e.__esModule)return e;var r=e.default;if(typeof r=="function"){var t=function n(){if(this instanceof n){var s=[null];s.push.apply(s,arguments);var i=Function.bind.apply(r,s);return new i}return r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),t}var nu={exports:{}};(function(e,r){(function(t,n){e.exports=n()})(qn,function(){var t=1e3,n=6e4,s=36e5,i="millisecond",o="second",a="minute",c="hour",l="day",u="week",h="month",f="quarter",p="year",g="date",y="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(j){var L=["th","st","nd","rd"],k=j%100;return"["+j+(L[(k-20)%10]||L[k]||L[0])+"]"}},J=function(j,L,k){var G=String(j);return!G||G.length>=L?j:""+Array(L+1-G.length).join(k)+j},H={s:J,z:function(j){var L=-j.utcOffset(),k=Math.abs(L),G=Math.floor(k/60),w=k%60;return(L<=0?"+":"-")+J(G,2,"0")+":"+J(w,2,"0")},m:function j(L,k){if(L.date()<k.date())return-j(k,L);var G=12*(k.year()-L.year())+(k.month()-L.month()),w=L.clone().add(G,h),E=k-w<0,F=L.clone().add(G+(E?-1:1),h);return+(-(G+(k-w)/(E?w-F:F-w))||0)},a:function(j){return j<0?Math.ceil(j)||0:Math.floor(j)},p:function(j){return{M:h,y:p,w:u,d:l,D:g,h:c,m:a,s:o,ms:i,Q:f}[j]||String(j||"").toLowerCase().replace(/s$/,"")},u:function(j){return j===void 0}},V="en",W={};W[V]=P;var T=function(j){return j instanceof Z},N=function j(L,k,G){var w;if(!L)return V;if(typeof L=="string"){var E=L.toLowerCase();W[E]&&(w=E),k&&(W[E]=k,w=E);var F=L.split("-");if(!w&&F.length>1)return j(F[0])}else{var B=L.name;W[B]=L,w=B}return!G&&w&&(V=w),w||!G&&V},M=function(j,L){if(T(j))return j.clone();var k=typeof L=="object"?L:{};return k.date=j,k.args=arguments,new Z(k)},U=H;U.l=N,U.i=T,U.w=function(j,L){return M(j,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var Z=function(){function j(k){this.$L=N(k.locale,null,!0),this.parse(k)}var L=j.prototype;return L.parse=function(k){this.$d=function(G){var w=G.date,E=G.utc;if(w===null)return new Date(NaN);if(U.u(w))return new Date;if(w instanceof Date)return new Date(w);if(typeof w=="string"&&!/Z$/i.test(w)){var F=w.match(S);if(F){var B=F[2]-1||0,oe=(F[7]||"0").substring(0,3);return E?new Date(Date.UTC(F[1],B,F[3]||1,F[4]||0,F[5]||0,F[6]||0,oe)):new Date(F[1],B,F[3]||1,F[4]||0,F[5]||0,F[6]||0,oe)}}return new Date(w)}(k),this.$x=k.x||{},this.init()},L.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},L.$utils=function(){return U},L.isValid=function(){return this.$d.toString()!==y},L.isSame=function(k,G){var w=M(k);return this.startOf(G)<=w&&w<=this.endOf(G)},L.isAfter=function(k,G){return M(k)<this.startOf(G)},L.isBefore=function(k,G){return this.endOf(G)<M(k)},L.$g=function(k,G,w){return U.u(k)?this[G]:this.set(w,k)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(k,G){var w=this,E=!!U.u(G)||G,F=U.p(k),B=function(St,Fe){var bt=U.w(w.$u?Date.UTC(w.$y,Fe,St):new Date(w.$y,Fe,St),w);return E?bt:bt.endOf(l)},oe=function(St,Fe){return U.w(w.toDate()[St].apply(w.toDate("s"),(E?[0,0,0,0]:[23,59,59,999]).slice(Fe)),w)},se=this.$W,_e=this.$M,qe=this.$D,ct="set"+(this.$u?"UTC":"");switch(F){case p:return E?B(1,0):B(31,11);case h:return E?B(1,_e):B(0,_e+1);case u:var Qe=this.$locale().weekStart||0,pt=(se<Qe?se+7:se)-Qe;return B(E?qe-pt:qe+(6-pt),_e);case l:case g:return oe(ct+"Hours",0);case c:return oe(ct+"Minutes",1);case a:return oe(ct+"Seconds",2);case o:return oe(ct+"Milliseconds",3);default:return this.clone()}},L.endOf=function(k){return this.startOf(k,!1)},L.$set=function(k,G){var w,E=U.p(k),F="set"+(this.$u?"UTC":""),B=(w={},w[l]=F+"Date",w[g]=F+"Date",w[h]=F+"Month",w[p]=F+"FullYear",w[c]=F+"Hours",w[a]=F+"Minutes",w[o]=F+"Seconds",w[i]=F+"Milliseconds",w)[E],oe=E===l?this.$D+(G-this.$W):G;if(E===h||E===p){var se=this.clone().set(g,1);se.$d[B](oe),se.init(),this.$d=se.set(g,Math.min(this.$D,se.daysInMonth())).$d}else B&&this.$d[B](oe);return this.init(),this},L.set=function(k,G){return this.clone().$set(k,G)},L.get=function(k){return this[U.p(k)]()},L.add=function(k,G){var w,E=this;k=Number(k);var F=U.p(G),B=function(_e){var qe=M(E);return U.w(qe.date(qe.date()+Math.round(_e*k)),E)};if(F===h)return this.set(h,this.$M+k);if(F===p)return this.set(p,this.$y+k);if(F===l)return B(1);if(F===u)return B(7);var oe=(w={},w[a]=n,w[c]=s,w[o]=t,w)[F]||1,se=this.$d.getTime()+k*oe;return U.w(se,this)},L.subtract=function(k,G){return this.add(-1*k,G)},L.format=function(k){var G=this,w=this.$locale();if(!this.isValid())return w.invalidDate||y;var E=k||"YYYY-MM-DDTHH:mm:ssZ",F=U.z(this),B=this.$H,oe=this.$m,se=this.$M,_e=w.weekdays,qe=w.months,ct=function(Fe,bt,_r,v){return Fe&&(Fe[bt]||Fe(G,E))||_r[bt].slice(0,v)},Qe=function(Fe){return U.s(B%12||12,Fe,"0")},pt=w.meridiem||function(Fe,bt,_r){var v=Fe<12?"AM":"PM";return _r?v.toLowerCase():v},St={YY:String(this.$y).slice(-2),YYYY:U.s(this.$y,4,"0"),M:se+1,MM:U.s(se+1,2,"0"),MMM:ct(w.monthsShort,se,qe,3),MMMM:ct(qe,se),D:this.$D,DD:U.s(this.$D,2,"0"),d:String(this.$W),dd:ct(w.weekdaysMin,this.$W,_e,2),ddd:ct(w.weekdaysShort,this.$W,_e,3),dddd:_e[this.$W],H:String(B),HH:U.s(B,2,"0"),h:Qe(1),hh:Qe(2),a:pt(B,oe,!0),A:pt(B,oe,!1),m:String(oe),mm:U.s(oe,2,"0"),s:String(this.$s),ss:U.s(this.$s,2,"0"),SSS:U.s(this.$ms,3,"0"),Z:F};return E.replace(x,function(Fe,bt){return bt||St[Fe]||F.replace(":","")})},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(k,G,w){var E,F=U.p(G),B=M(k),oe=(B.utcOffset()-this.utcOffset())*n,se=this-B,_e=U.m(this,B);return _e=(E={},E[p]=_e/12,E[h]=_e,E[f]=_e/3,E[u]=(se-oe)/6048e5,E[l]=(se-oe)/864e5,E[c]=se/s,E[a]=se/n,E[o]=se/t,E)[F]||se,w?_e:U.a(_e)},L.daysInMonth=function(){return this.endOf(h).$D},L.$locale=function(){return W[this.$L]},L.locale=function(k,G){if(!k)return this.$L;var w=this.clone(),E=N(k,G,!0);return E&&(w.$L=E),w},L.clone=function(){return U.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},j}(),te=Z.prototype;return M.prototype=te,[["$ms",i],["$s",o],["$m",a],["$H",c],["$W",l],["$M",h],["$y",p],["$D",g]].forEach(function(j){te[j[1]]=function(L){return this.$g(L,j[0],j[1])}}),M.extend=function(j,L){return j.$i||(j(L,Z,M),j.$i=!0),M},M.locale=N,M.isDayjs=T,M.unix=function(j){return M(1e3*j)},M.en=W[V],M.Ls=W,M.p={},M})})(nu);var su=nu.exports;const Nr=ti(su);var bp={exports:{}};(function(e,r){(function(t,n){e.exports=n(su)})(qn,function(t){function n(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var s=n(t),i={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(o,a){return a==="W"?o+"周":o+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(o,a){var c=100*o+a;return c<600?"凌晨":c<900?"早上":c<1100?"上午":c<1300?"中午":c<1800?"下午":"晚上"}};return s.default.locale(i,null,!0),i})})(bp);var iu={exports:{}};(function(e,r){(function(t,n){e.exports=n()})(qn,function(){return function(t,n,s){t=t||{};var i=n.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(l,u,h,f){return i.fromToBase(l,u,h,f)}s.en.relativeTime=o,i.fromToBase=function(l,u,h,f,p){for(var g,y,S,x=h.$locale().relativeTime||o,P=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],J=P.length,H=0;H<J;H+=1){var V=P[H];V.d&&(g=f?s(l).diff(h,V.d,!0):h.diff(l,V.d,!0));var W=(t.rounding||Math.round)(Math.abs(g));if(S=g>0,W<=V.r||!V.r){W<=1&&H>0&&(V=P[H-1]);var T=x[V.l];p&&(W=p(""+W)),y=typeof T=="string"?T.replace("%d",W):T(W,u,V.l,S);break}}if(u)return y;var N=S?x.future:x.past;return typeof N=="function"?N(y):N.replace("%s",y)},i.to=function(l,u){return a(l,u,this,!0)},i.from=function(l,u){return a(l,u,this)};var c=function(l){return l.$u?s.utc():s()};i.toNow=function(l){return this.to(c(this),l)},i.fromNow=function(l){return this.from(c(this),l)}}})})(iu);var wp=iu.exports;const xp=ti(wp);function Sp(){for(var e=0,r,t,n="";e<arguments.length;)(r=arguments[e++])&&(t=ou(r))&&(n&&(n+=" "),n+=t);return n}function ou(e){if(typeof e=="string")return e;for(var r,t="",n=0;n<e.length;n++)e[n]&&(r=ou(e[n]))&&(t&&(t+=" "),t+=r);return t}var Ko="-";function Cp(e){var r=Tp(e),t=e.conflictingClassGroups,n=e.conflictingClassGroupModifiers,s=n===void 0?{}:n;function i(a){var c=a.split(Ko);return c[0]===""&&c.length!==1&&c.shift(),au(c,r)||$p(a)}function o(a,c){var l=t[a]||[];return c&&s[a]?[].concat(l,s[a]):l}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function au(e,r){var o;if(e.length===0)return r.classGroupId;var t=e[0],n=r.nextPart.get(t),s=n?au(e.slice(1),n):void 0;if(s)return s;if(r.validators.length!==0){var i=e.join(Ko);return(o=r.validators.find(function(a){var c=a.validator;return c(i)}))==null?void 0:o.classGroupId}}var nl=/^\[(.+)\]$/;function $p(e){if(nl.test(e)){var r=nl.exec(e)[1],t=r==null?void 0:r.substring(0,r.indexOf(":"));if(t)return"arbitrary.."+t}}function Tp(e){var r=e.theme,t=e.prefix,n={nextPart:new Map,validators:[]},s=Pp(Object.entries(e.classGroups),t);return s.forEach(function(i){var o=i[0],a=i[1];ro(a,n,o,r)}),n}function ro(e,r,t,n){e.forEach(function(s){if(typeof s=="string"){var i=s===""?r:sl(r,s);i.classGroupId=t;return}if(typeof s=="function"){if(Ep(s)){ro(s(n),r,t,n);return}r.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(function(o){var a=o[0],c=o[1];ro(c,sl(r,a),t,n)})})}function sl(e,r){var t=e;return r.split(Ko).forEach(function(n){t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t}function Ep(e){return e.isThemeGetter}function Pp(e,r){return r?e.map(function(t){var n=t[0],s=t[1],i=s.map(function(o){return typeof o=="string"?r+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var c=a[0],l=a[1];return[r+c,l]})):o});return[n,i]}):e}function kp(e){if(e<1)return{get:function(){},set:function(){}};var r=0,t=new Map,n=new Map;function s(i,o){t.set(i,o),r++,r>e&&(r=0,n=t,t=new Map)}return{get:function(o){var a=t.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return s(o,a),a},set:function(o,a){t.has(o)?t.set(o,a):s(o,a)}}}var lu="!";function Ap(e){var r=e.separator||":",t=r.length===1,n=r[0],s=r.length;return function(o){for(var a=[],c=0,l=0,u,h=0;h<o.length;h++){var f=o[h];if(c===0){if(f===n&&(t||o.slice(h,h+s)===r)){a.push(o.slice(l,h)),l=h+s;continue}if(f==="/"){u=h;continue}}f==="["?c++:f==="]"&&c--}var p=a.length===0?o:o.substring(l),g=p.startsWith(lu),y=g?p.substring(1):p,S=u&&u>l?u-l:void 0;return{modifiers:a,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:S}}}function Op(e){if(e.length<=1)return e;var r=[],t=[];return e.forEach(function(n){var s=n[0]==="[";s?(r.push.apply(r,t.sort().concat([n])),t=[]):t.push(n)}),r.push.apply(r,t.sort()),r}function Rp(e){return{cache:kp(e.cacheSize),splitModifiers:Ap(e),...Cp(e)}}var Mp=/\s+/;function Np(e,r){var t=r.splitModifiers,n=r.getClassGroupId,s=r.getConflictingClassGroupIds,i=new Set;return e.trim().split(Mp).map(function(o){var a=t(o),c=a.modifiers,l=a.hasImportantModifier,u=a.baseClassName,h=a.maybePostfixModifierPosition,f=n(h?u.substring(0,h):u),p=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=n(u),!f)return{isTailwindClass:!1,originalClassName:o};p=!1}var g=Op(c).join(":"),y=l?g+lu:g;return{isTailwindClass:!0,modifierId:y,classGroupId:f,originalClassName:o,hasPostfixModifier:p}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,c=o.classGroupId,l=o.hasPostfixModifier,u=a+c;return i.has(u)?!1:(i.add(u),s(c,l).forEach(function(h){return i.add(a+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function Lp(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n,s,i,o=a;function a(l){var u=r[0],h=r.slice(1),f=h.reduce(function(p,g){return g(p)},u());return n=Rp(f),s=n.cache.get,i=n.cache.set,o=c,c(l)}function c(l){var u=s(l);if(u)return u;var h=Np(l,n);return i(l,h),h}return function(){return o(Sp.apply(null,arguments))}}function Ae(e){var r=function(n){return n[e]||[]};return r.isThemeGetter=!0,r}var cu=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ip=/^\d+\/\d+$/,Dp=new Set(["px","full","screen"]),Fp=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Bp=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|^0$/,zp=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function $t(e){return Er(e)||Dp.has(e)||Ip.test(e)||sr(e)}function sr(e){return Ir(e,"length",Wp)}function Hp(e){return Ir(e,"size",uu)}function Up(e){return Ir(e,"position",uu)}function jp(e){return Ir(e,"url",Gp)}function ps(e){return Ir(e,"number",Er)}function Er(e){return!Number.isNaN(Number(e))}function qp(e){return e.endsWith("%")&&Er(e.slice(0,-1))}function vn(e){return il(e)||Ir(e,"number",il)}function Be(e){return cu.test(e)}function _n(){return!0}function tr(e){return Fp.test(e)}function Vp(e){return Ir(e,"",Kp)}function Ir(e,r,t){var n=cu.exec(e);return n?n[1]?n[1]===r:t(n[2]):!1}function Wp(e){return Bp.test(e)}function uu(){return!1}function Gp(e){return e.startsWith("url(")}function il(e){return Number.isInteger(Number(e))}function Kp(e){return zp.test(e)}function Yp(){var e=Ae("colors"),r=Ae("spacing"),t=Ae("blur"),n=Ae("brightness"),s=Ae("borderColor"),i=Ae("borderRadius"),o=Ae("borderSpacing"),a=Ae("borderWidth"),c=Ae("contrast"),l=Ae("grayscale"),u=Ae("hueRotate"),h=Ae("invert"),f=Ae("gap"),p=Ae("gradientColorStops"),g=Ae("gradientColorStopPositions"),y=Ae("inset"),S=Ae("margin"),x=Ae("opacity"),P=Ae("padding"),J=Ae("saturate"),H=Ae("scale"),V=Ae("sepia"),W=Ae("skew"),T=Ae("space"),N=Ae("translate"),M=function(){return["auto","contain","none"]},U=function(){return["auto","hidden","clip","visible","scroll"]},Z=function(){return["auto",r]},te=function(){return["",$t]},j=function(){return["auto",Er,Be]},L=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},k=function(){return["solid","dashed","dotted","double","none"]},G=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},w=function(){return["start","end","center","between","around","evenly","stretch"]},E=function(){return["","0",Be]},F=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},B=function(){return[Er,ps]},oe=function(){return[Er,Be]};return{cacheSize:500,theme:{colors:[_n],spacing:[$t],blur:["none","",tr,sr],brightness:B(),borderColor:[e],borderRadius:["none","","full",tr,sr],borderSpacing:[r],borderWidth:te(),contrast:B(),grayscale:E(),hueRotate:oe(),invert:E(),gap:[r],gradientColorStops:[e],gradientColorStopPositions:[qp,sr],inset:Z(),margin:Z(),opacity:B(),padding:[r],saturate:B(),scale:B(),sepia:E(),skew:oe(),space:[r],translate:[r]},classGroups:{aspect:[{aspect:["auto","square","video",Be]}],container:["container"],columns:[{columns:[tr]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(L(),[Be])}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vn]}],basis:[{basis:Z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Be]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",vn]}],"grid-cols":[{"grid-cols":[_n]}],"col-start-end":[{col:["auto",{span:[vn]},Be]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[_n]}],"row-start-end":[{row:["auto",{span:[vn]},Be]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Be]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(w())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(w(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(w(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[P]}],px:[{px:[P]}],py:[{py:[P]}],ps:[{ps:[P]}],pe:[{pe:[P]}],pt:[{pt:[P]}],pr:[{pr:[P]}],pb:[{pb:[P]}],pl:[{pl:[P]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",r]}],"min-w":[{"min-w":["min","max","fit",$t]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[tr]},tr,sr]}],h:[{h:[r,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",$t]}],"max-h":[{"max-h":[r,"min","max","fit"]}],"font-size":[{text:["base",tr,sr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ps]}],"font-family":[{font:[_n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",sr]}],"line-clamp":[{"line-clamp":["none",Er,ps]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$t]}],"list-image":[{"list-image":["none",Be]}],"list-style-type":[{list:["none","disc","decimal",Be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(k(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",$t]}],"underline-offset":[{"underline-offset":["auto",$t]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:[r]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",sr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(L(),[Up])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Hp]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},jp]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[].concat(k(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:k()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(k())}],"outline-offset":[{"outline-offset":[$t]}],"outline-w":[{outline:[$t]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[$t]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",tr,Vp]}],"shadow-color":[{shadow:[_n]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":G()}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",tr,Be]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[J]}],sepia:[{sepia:[V]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[J]}],"backdrop-sepia":[{"backdrop-sepia":[V]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Be]}],duration:[{duration:oe()}],ease:[{ease:["linear","in","out","in-out",Be]}],delay:[{delay:oe()}],animate:[{animate:["none","spin","ping","pulse","bounce",Be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[H]}],"scale-x":[{"scale-x":[H]}],"scale-y":[{"scale-y":[H]}],rotate:[{rotate:[vn,Be]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[W]}],"skew-y":[{"skew-y":[W]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Be]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Be]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":[r]}],"scroll-mx":[{"scroll-mx":[r]}],"scroll-my":[{"scroll-my":[r]}],"scroll-ms":[{"scroll-ms":[r]}],"scroll-me":[{"scroll-me":[r]}],"scroll-mt":[{"scroll-mt":[r]}],"scroll-mr":[{"scroll-mr":[r]}],"scroll-mb":[{"scroll-mb":[r]}],"scroll-ml":[{"scroll-ml":[r]}],"scroll-p":[{"scroll-p":[r]}],"scroll-px":[{"scroll-px":[r]}],"scroll-py":[{"scroll-py":[r]}],"scroll-ps":[{"scroll-ps":[r]}],"scroll-pe":[{"scroll-pe":[r]}],"scroll-pt":[{"scroll-pt":[r]}],"scroll-pr":[{"scroll-pr":[r]}],"scroll-pb":[{"scroll-pb":[r]}],"scroll-pl":[{"scroll-pl":[r]}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Be]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[$t,ps]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Jp=Lp(Yp);const Xp={ch:"零壹贰叁肆伍陆柒捌玖",ch_u:"个拾佰仟万亿",ch_f:"负",ch_d:"点",m_t:"人民币",m_z:"整",m_u:"元角分"},ol={ch:"零一二三四五六七八九",ch_u:"个十百千万亿",ch_f:"负",ch_d:"点"},al=/^([+-])?0*(\d+)(\.(\d+))?$/,hu=/^([+-])?0*(\d+)(\.(\d+))?e(([+-])?(\d+))$/i;function Qp(e){var r=hu.exec(e.toString());if(!r)return e;var t=r[2],n=r[4]||"",s=r[5]?+r[5]:0;if(s>0){var i=n.substr(0,s);i=i.length<s?i+new Array(s-i.length+1).join("0"):i,n=n.substr(s),t+=i}else{s=-s;var o=t.length-s;o=o<0?0:o;var a=t.substr(o,s);a=a.length<s?new Array(s-a.length+1).join("0")+a:a,t=t.substring(0,o),n=a+n}return t=t==""?"0":t,(r[1]=="-"?"-":"")+t+(n?"."+n:"")}function ll(e){var r=al.exec(e.toString());return!r&&hu.test(e.toString())&&(r=al.exec(Qp(e.toString()))),r?{int:r[2],decimal:r[4],minus:r[1]=="-",num:r.slice(1,3).join("")}:null}function $n(e,r,t){if(e.splice.apply(e,[0,r.length].concat(r.splice(0,r.length))),arguments.length>2){var n=[].slice.call(arguments,2);n.unshift(e),$n.apply(null,n)}return e}function Zp(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function yi(...e){for(var r,t=arguments[0]||{},n=Array.prototype.slice.call(arguments,1),s=0;s<n.length;s++){var i=n[s];for(r in i)Zp(i,r)&&(t[r]=i[r])}return t}function cl(e){return e>=5?(e-4)*4+4:e}function vi(e,r){if(r==null&&(r=1),!(r<=0))for(;r--;)e.unshift(0)}function ul(e,r,t){if(e==null)return"";var n=~"*.?+$^[](){}|\\/".indexOf(r)?"\\"+r:r,s=new RegExp("^"+n+"+"),i=new RegExp(n+"+$"),o=new RegExp(n+"{2}","g");return e=e.toString(),t=="^"&&(e=e.replace(s,"")),(!t||t=="$")&&(e=e.replace(i,"")),(!t||t=="nto1")&&(e=e.replace(o,r)),e}function hl(e,r={}){const t=ll(e);if(!t)return String(e);const{ch:n="",ch_u:s="",ch_f:i="",ch_d:o="."}=r;var a=n.charAt(0),c=t.int,l=t.decimal,u=t.minus,h="",f="",p=u?i:"";const g=function J(H,V,W){H=ll(H).int;var T="",N=arguments.length>1?arguments[1]:r.tenMin,M=H.length;if(M===1)return n.charAt(+H);if(M<=4)for(var U=0,Z=M;Z--;){var te=+H.charAt(U);T+=N&&M==2&&U==0&&te==1?"":n.charAt(te),T+=te&&Z?s.charAt(Z):"",U++}else{for(var j=H.length/4>>0,L=H.length%4;L==0||!s.charAt(3+j);)L+=4,j--;var k=H.substr(0,L),G=H.substr(L);T=J(k,N)+s.charAt(3+j)+(G.charAt(0)=="0"?a:"")+J(G,G.length>4?N:!1)}return T=ul(T,a),T};if(l){l=ul(l,"0","$");for(var y=0;y<l.length;y++)f+=n.charAt(+l.charAt(y));f=f?o+f:""}if(h=g(c),r.ww&&s.length>5){var S=s.charAt(4),x=s.charAt(5),P=h.lastIndexOf(x);~P&&(h=h.substring(0,P).replace(new RegExp(x,"g"),S+S)+h.substring(P))}return p+h+f}function em(e,r={}){e=e.toString();const{ch:t="",ch_d:n="",ch_f:s="",ch_u:i=""}=r;var o=e.split(n),a=o[0].replace(s,""),c=o[1],l=!!~o[0].indexOf(s),u=i.charAt(1),h=i.charAt(4),f=i.charAt(5);a=a.replace(new RegExp(h+"{2}","g"),f);for(var p=a.split(""),g=0,y=0,S=[],x=[],P=[],J=0;J<p.length;J++){var H=p[J],V=0,W=0;if(~(V=t.indexOf(H)))V>0&&P.unshift(V);else if(~(W=i.indexOf(H))){var T=cl(W);g>W?(vi(P,T),$n(x,P)):W>=y?(J==0&&(P=[1]),$n(S,x,P),S.length>0&&vi(S,T),y=W):(P.length==0&&u==H&&(P=[1]),$n(x,P),vi(x,cl(W)),g=W)}}$n(S,x,P).reverse(),S.length==0&&S.push(0);var N=0;if(c){S.push("."),N="0.";for(var J=0;J<c.length;J++)N+=t.indexOf(c.charAt(J)),S.push(t.indexOf(c.charAt(J)));N=+N}return l&&S.unshift("-"),parseFloat(S.join(""))}const tm={encodeS(e,r={}){return hl(e,yi({ww:!0,...ol},r))},encodeB(e,r={}){return hl(e,yi({ww:!0,...Xp},r))},decodeS(e,r={}){return em(e,yi({ww:!0,...ol},r))}};Nr.extend(xp);Nr.locale("zh-cn");function rt(...e){return Jp(e)}function Vr(e,r={count:2,pos:1}){const{count:t,pos:n}=r;if(String(e).length<t){const s=t-String(e).length;if(n===1)return`${"0".repeat(s)}${e}`;if(n===2)return`${e}${"0".repeat(s)}`}return String(e)}function rm(e){if(typeof e=="number")return`第${e}集`;if(e.match(/^[0-9]/))return e;const r=/(\d+)/g;let t=e.replace(/[eE]/g,"");const n=t.match(r);if(!n)return e;for(let s=0;s<n.length;s++){const i=parseInt(n[s],10),o=nm(i);t=t.replace(n[s],`第${o}集`)}return t}function nm(e){return tm.encodeS(e)}function Ar(e){return Object.keys(e).filter(r=>e[r]!==void 0).map(r=>`${r}=${encodeURIComponent(e[r])}`).join("&")}function du(e){const r=Math.floor(e/60),t=Math.floor(e-r*60);return[r,"分",t,"秒"].join("")}function xr(e){const r=Math.floor(e/3600),t=Math.floor((e-r*3600)/60),n=Math.floor(e-r*3600-t*60);return r>0?r+":"+Vr(t)+":"+Vr(n):Vr(t)+":"+Vr(n)}function sm(e){const r=Math.floor(e/60),t=e%60,n=String(r).padStart(2,"0"),s=String(t).padStart(2,"0");return`${n}:${s}`}function im(e){const r=Nr(e),t=Nr(),n=t.diff(r,"minute");let s;return n>=7*24*60?s="7天前":n>=24*60?s=t.diff(r,"day")+"天前":n>=60?s=t.diff(r,"hour")+"小时前":n>0?s=n+"分钟前":s="刚刚",s}function Yo(e=1e3){return new Promise(r=>{setTimeout(()=>{r(null)},e)})}function fu(e,r){function t(n){return n&&typeof n=="object"&&!Array.isArray(n)}for(const n in r)t(r[n])?(e[n]||(e[n]={}),e[n]=fu(e[n],r[n])):e[n]===void 0&&(e[n]=r[n]);return e}const om=["disabled"],am={key:0},pu=ue({__name:"Button",props:{store:{},class:{},variant:{},size:{}},setup(e){const r=e,{store:t,variant:n,size:s}=r,i=ie(t.state);function o(l){l.stopPropagation(),t.click()}t.onStateChange(l=>{i.value=l});const c=vp("active:scale-95 inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 dark:hover:bg-slate-800 dark:hover:text-slate-100 disabled:opacity-50 dark:focus:ring-slate-400 disabled:pointer-events-none dark:focus:ring-offset-slate-900 data-[state=open]:bg-slate-100 dark:data-[state=open]:bg-slate-800",{variants:{variant:{default:"bg-slate-900 text-white hover:bg-slate-700 dark:bg-slate-50 dark:text-slate-900",destructive:"bg-red-500 text-white hover:bg-red-600 dark:hover:bg-red-600",outline:"bg-transparent border border-slate-200 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-100",subtle:"bg-slate-100 text-slate-900 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100",ghost:"bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 dark:text-slate-100 dark:hover:text-slate-100 data-[state=open]:bg-transparent dark:data-[state=open]:bg-transparent",link:"bg-transparent dark:bg-transparent underline-offset-4 hover:underline text-slate-900 dark:text-slate-100 hover:bg-transparent dark:hover:bg-transparent"},size:{default:"py-2 px-4",sm:"px-2 rounded-md text-sm",lg:"py-2 px-8 text-lg rounded-md"}},defaultVariants:{variant:"default",size:"default"}})({variant:r.variant,size:r.size,class:rt(r.class,"space-x-2")});return(l,u)=>(C(),R("button",{class:Ce($(c)),role:"button",disabled:i.value.disabled,onClick:o},[i.value.loading?(C(),R("div",am,"Loading...")):be("",!0),Se(l.$slots,"default")],10,om))}});function lm(e,r){e.focus=()=>{r.focus()}}const cm=["value","placeholder","disabled","type"],Ls=ue({__name:"Input",props:{store:{},class:{}},setup(e){const r=e,{store:t}=r,n=ie(t.state),s=ie();function i(a){t.handleChange(a)}_t(()=>{const a=s.value;a&&lm(t,a)}),t.onStateChange(a=>{n.value=a});const o=rt("flex h-10 w-full rounded-md border border-slate-300 bg-transparent py-2 px-3 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-700 dark:text-slate-50 dark:focus:ring-slate-400 dark:focus:ring-offset-slate-900",r.class);return(a,c)=>(C(),R("input",{ref_key:"r",ref:s,class:Ce($(o)),value:n.value.value,placeholder:n.value.placeholder,disabled:n.value.disabled,type:n.value.type,onChange:i},null,42,cm))}});function dl(e){return e.touches?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.clientX&&e.clientY?{x:e.clientX,y:e.clientY}:{x:0,y:0}}function Tn(e){e&&e.cancelable&&!e.defaultPrevented&&e.preventDefault&&e.preventDefault()}function um(e,r){let t=Math.abs(e);return t=.82231*r/(1+4338.47/Math.pow(t,1.14791)),Math.round(e<0?-t:t)}function hm(e,r){const t=Math.abs(e.x-r.x),n=Math.abs(e.y-r.y),s=Math.sqrt(t*t+n*n);return s!==0?Math.asin(n/s)/Math.PI*180:0}const fl="enable-hardware";function dm(e,r){function t(l){e.handlePointDown(l);const u=e.getScrollTop();e.os.pc&&u<=0&&(r.addEventListener("mousemove",e.handleMouseMove,{passive:!1}),document.ondragstart=function(){return!1})}function n(){e.handleTouchEnd(),e.os.pc&&(r.removeEventListener("mousemove",e.handleMouseMove),document.ondragstart=function(){return!0})}r.addEventListener("touchstart",t),r.addEventListener("touchmove",e.handleTouchMove,{passive:!1}),r.addEventListener("touchend",n),r.addEventListener("touchcancel",n),r.addEventListener("mousedown",t),r.addEventListener("mouseup",n),r.addEventListener("mouseleave",n),r.addEventListener("scroll",e.handleScrolling);let s=!1;e.optimizeScroll=l=>{l&&s===!1&&(r.classList.add(fl),r.style.webkitOverflowScrolling="auto",s=!0),l===!1&&s&&(r.style.webkitOverflowScrolling="touch",r.classList.remove(fl),s=!1)};let i=0,o=0;function a(l){let u=l.currentTarget,h=!0;for(;u&&u!==document.body&&u!==document;){const y=u.classList;if(y){if(y.contains("mescroll")||y.contains("mescroll-touch")){h=!1;break}else if(y.contains("mescroll-touch-x")||y.contains("mescroll-touch-y")){var f=l.touches?l.touches[0].pageX:0,p=l.touches?l.touches[0].pageY:0;i||(i=f),o||(o=p);const S=Math.abs(i-f),x=Math.abs(o-p),P=Math.sqrt(S*S+x*x);if(i=f,o=p,P!==0){var g=Math.asin(x/P)/Math.PI*180;if(g<=45&&y.contains("mescroll-touch-x")||g>45&&y.contains("mescroll-touch-y")){h=!1;break}}}}u=u.parentNode}h&&Tn(l)}e.refreshRect=()=>{const{scrollHeight:l}=r;e.setRect({contentHeight:l})},e.setBounce=l=>{e.os.ios&&(l===!1?window.addEventListener("touchmove",a,{passive:!1}):window.removeEventListener("touchmove",a))},e.setScrollTop=l=>{r.scrollTop=l},e.getScrollTop=()=>r.scrollTop,e.getScrollClientHeight=()=>r.clientHeight,e.getScrollHeight=()=>r.scrollHeight,e.getBodyHeight=()=>document.body.clientHeight||document.documentElement.clientHeight,e.getOffsetTop=l=>{let u=l.offsetTop,h=l.offsetParent;for(;h&&h!==r;)u+=h.offsetTop+h.clientTop,h=h.offsetParent;return u};function c(l,u,h,f=300,p=30){const g=u-l;if(f===0||g===0){h&&h(u);return}const y=f/p,S=g/y;let x=0;const P=window.setInterval(()=>{x<y-1?(l+=S,h&&h(l,P),x++):(h&&h(u,P),window.clearInterval(P))},p)}e.scrollTo=(l,u)=>{const{top:h=0}=l,f=e.getScrollTop();let p=h;if(p>0){const g=e.getScrollHeight()-e.getScrollClientHeight();p>g&&(p=g)}else p=0;e.isScrollTo=!0,r.style.overflow="hidden",c(f,p,g=>{e.setScrollTop(g),g===p&&(r.style.overflow="auto",e.isScrollTo=!1)},u)},e.destroy=()=>{r.removeEventListener("touchstart",t),r.removeEventListener("touchmove",e.handleTouchMove),r.removeEventListener("touchend",n),r.removeEventListener("touchcancel",n),r.removeEventListener("mousedown",t),r.removeEventListener("mousemove",e.handleMouseMove),r.removeEventListener("mouseup",n),r.removeEventListener("mouseleave",n),r.removeEventListener("scroll",e.handleScrolling),e.setBounce(!0)}}const Dr=ue({__name:"ScrollView",props:{class:{},store:{}},setup(e){const r=e,{store:t}=r,n=ie(null);ie(t.state),_t(()=>{const i=n.value;if(!i)return;const{clientWidth:o,clientHeight:a,scrollHeight:c}=i;dm(t,i),t.setRect({width:o,height:a,contentHeight:c})});const s=rt("scroll-view w-full h-full overflow-y-auto hide-scroll",r.class);return(i,o)=>(C(),R("div",{class:Ce($(s))},[m("div",{ref_key:"contentRef",ref:n,class:Ce($(s))},[Se(i.$slots,"default")],2)],2))}}),Lt=ue({__name:"Show",props:{when:{type:Boolean},fallback:{},name:{},class:{}},setup(e){const r=e;return(t,n)=>r.when?Se(t.$slots,"default",{key:0}):Se(t.$slots,"fallback",{key:1})}}),pl={get(e,r,t={}){const{headers:n}=t;return{url:[e,r?"?"+Ar(r):""].join(""),method:"GET",headers:n}},post(e,r,t={}){const{headers:n}=t;return{url:e,method:"POST",body:r,headers:n}}};function fm(e){let r=e.hostnames.prod,t=e.headers??{},n="prod",s=e.debug??!1;return{getHostname(){return r},setHostname(i){s&&console.log("[REQUEST]utils - setHostname",i),r=i},setHeaders(i){s&&console.log("[REQUEST]utils - setHeaders",i),t=i},deleteHeaders(i){delete t[i]},appendHeaders(i){s&&console.log("[REQUEST]utils - appendHeaders",i),t={...t,...i}},setEnv(i){s&&console.log("[REQUEST]utils - setEnv",i);const{prod:o,dev:a=o,test:c=o,beta:l=o}=e.hostnames;n=i,i==="dev"&&(r=a),i==="test"&&(r=c),i==="beta"&&(r=l),i==="prod"&&(r=o)},setDebug(i){s=i},get(...i){const o=pl.get(...i),{url:a,method:c,query:l,params:u,body:h,headers:f}=o;return s&&(console.log("create GET payload"),console.log(o),console.log("current hostname is",r),console.log("current headers is",f),console.log("current env is",n)),{hostname:r,url:a,method:c,query:l,params:u,body:h,headers:{...o.headers,...t},process:e.process}},post(...i){const o=pl.post(...i),{url:a,method:c,query:l,params:u,body:h}=o;return s&&(console.log("create POST payload"),console.log(o),console.log("current hostname is",r),console.log("current headers is",t)),{hostname:r,url:a,method:c,query:l,params:u,body:h,headers:{...o.headers,...t},process:e.process}}}}class _i extends Error{constructor(t,n,s=null){super(t);d(this,"message");d(this,"code");d(this,"data",null);this.message=t,this.code=n,this.data=s}}const b={Ok:e=>({data:e,error:null}),Err:(e,r,t=null)=>({data:t,code:r,error:(()=>typeof e=="string"?new _i(e,r,t):e instanceof _i?e:typeof e=="object"?new _i(e.message,r,t):e.error)()})},De=fm({hostnames:{dev:"https://media-t.funzm.com",test:"https://media-t.funzm.com",prod:""},process(e){if(e.error)return b.Err(e.error.message);const{code:r,msg:t,data:n}=e.data;return r!==0?b.Err(t,r,n):b.Ok(n)}}),mu="2.5.0";var je=(e=>(e.US="US",e.CN="CN",e.TW="TW",e.HK="HK",e.JP="JP",e.DE="DE",e.GB="GB",e.FR="FR",e.IT="IT",e.BR="BR",e.CA="CA",e.AU="AU",e.IN="IN",e.RU="RU",e.KR="KR",e.BE="BE",e.ES="ES",e.MX="MX",e.ID="ID",e.TR="TR",e.SA="SA",e.ZA="ZA",e.AR="AR",e.TH="TH",e.EG="EG",e.NL="NL",e.CH="CH",e.SE="SE",e.PL="PL",e.PK="PK",e.NG="NG",e.MY="MY",e.BD="BD",e))(je||{});const no={CN:"国产剧",TW:"台剧",HK:"港剧",JP:"日剧",KR:"韩剧",US:"美剧",GB:"英剧",FR:"法国",IT:"意大利",BR:"巴西",BE:"比利时",DE:"德国",CA:"加拿大",AU:"澳大利亚",IN:"印度",RU:"俄罗斯",ES:"西班牙",MX:"墨西哥",ID:"印度尼西亚",TR:"土耳其",SA:"沙特阿拉伯",ZA:"南非",AR:"阿根廷",TH:"泰国",EG:"埃及",NL:"荷兰",CH:"瑞士",SE:"瑞典",PL:"波兰",PK:"巴基斯坦",NG:"尼日利亚",MY:"马来西亚",BD:"孟加拉国"};Object.keys(no).slice(0,7).map(e=>({value:e,label:no[e]}));const Jo=["动作冒险","动画","喜剧","犯罪","纪录","剧情","家庭","儿童","悬疑","新闻","真人秀","Sci-Fi & Fantasy","肥皂剧","脱口秀","War & Politics","西部"],pm=Jo.map(e=>({[e]:(()=>e==="Sci-Fi & Fantasy"?"奇幻":e==="War & Politics"?"战争/政治":e)()})).reduce((e,r)=>({...e,...r}),{});Jo.map(e=>({label:pm[e],value:e}));const Is={CN:"中国大陆",TW:"中国台湾",HK:"中国香港",JP:"日本",KR:"韩国",US:"美国",GB:"英国",FR:"法国",IT:"意大利",BR:"巴西",DE:"德国",CA:"加拿大",AU:"澳大利亚",IN:"印度",RU:"俄罗斯",BE:"比利时",ES:"西班牙",MX:"墨西哥",ID:"印度尼西亚",TR:"土耳其",SA:"沙特阿拉伯",ZA:"南非",AR:"阿根廷",TH:"泰国",EG:"埃及",NL:"荷兰",CH:"瑞士",SE:"瑞典",PL:"波兰",PK:"巴基斯坦",NG:"尼日利亚",MY:"马来西亚",BD:"孟加拉国"},mm=Object.keys(Is).slice(0,7).map(e=>({value:e,label:Is[e]})),gm=["动作","冒险","动画","喜剧","犯罪","纪录","剧情","家庭","奇幻","历史","恐怖","音乐","悬疑","爱情","科幻","电视电影","惊悚","战争","西部"];Jo.map(e=>({[e]:e})).reduce((e,r)=>({...e,...r}),{});const ym=gm.map(e=>({label:e,value:e}));var we=(e=>(e[e.Season=1]="Season",e[e.Movie=2]="Movie",e))(we||{});const vm=[{label:"2024"},{label:"2023"},{label:"2022"},{label:"2021"}];var ht=(e=>(e[e.Loading=6]="Loading",e[e.Pending=1]="Pending",e[e.Scanned=2]="Scanned",e[e.Confirmed=3]="Confirmed",e[e.Expired=4]="Expired",e[e.Error=5]="Error",e))(ht||{});function _m(e){return De.post("/api/v2/wechat/notification/list",e)}function bm(e){if(e.error)return b.Err(e.error);const{next_marker:r,page_size:t,total:n,list:s}=e.data;return b.Ok({page_size:t,total:n,next_marker:r,list:s.map(i=>{const{id:o,content:a,status:c,created:l}=i,{msg:u,media:h}=JSON.parse(a);return{id:o,status:c,media:h,msg:u,created:Nr(l).format("YYYY-MM-DD HH:mm")}})})}function gu(){return De.get("/api/info")}function yu(e){return{all:e=e||new Map,on:function(r,t){var n=e.get(r);n?n.push(t):e.set(r,[t])},off:function(r,t){var n=e.get(r);n&&(t?n.splice(n.indexOf(t)>>>0,1):e.set(r,[]))},emit:function(r,t){var n=e.get(r);n&&n.slice().map(function(s){s(t)}),(n=e.get("*"))&&n.slice().map(function(s){s(r,t)})}}}let ml=0;function wm(){return ml+=1,ml}function vu(){const e=yu();let r=[];return{off(t,n){e.off(t,n)},on(t,n){const s=()=>{r=r.filter(i=>i!==s),this.off(t,n)};return r.push(s),e.on(t,n),s},emit(t,n){e.emit(t,n)},destroy(){for(let t=0;t<r.length;t+=1){const n=r[t];n()}this.emit("__destroy",null)}}}class $e{constructor(r={}){d(this,"unique_id","BaseDomain");d(this,"debug",!1);d(this,"_emitter",yu());d(this,"listeners",{});const{unique_id:t,debug:n}=r;t&&(this.unique_id=t)}uid(){return wm()}log(...r){return this.debug?[`%c CORE %c ${this.unique_id} %c`,"color:white;background:#dfa639;border-top-left-radius:2px;border-bottom-left-radius:2px;","color:white;background:#19be6b;border-top-right-radius:2px;border-bottom-right-radius:2px;","color:#19be6b;",...r]:[]}errorTip(...r){this.debug&&console.log(`%c CORE %c ${this.unique_id} %c`,"color:white;background:red;border-top-left-radius:2px;border-bottom-left-radius:2px;","color:white;background:#19be6b;border-top-right-radius:2px;border-bottom-right-radius:2px;","color:#19be6b;",...r)}off(r,t){this._emitter.off(r,t)}offEvent(r){const t=this.listeners[r]||[];for(let n=0;n<t.length;n+=1){const s=t[n];s()}}on(r,t){const n=()=>{const i=this.listeners[r]||[];this.listeners[r]=i.filter(o=>o!==n),this.off(r,t)};return(this.listeners[r]||[]).push(n),this._emitter.on(r,t),n}emit(r,t){this._emitter.emit(r,t)}tip(r){return this._emitter.emit("__tip",r),r.text.join(`
`)}destroy(){Object.keys(this.listeners).map(r=>{const t=this.listeners[r]||[];for(let n=0;n<t.length;n+=1){const s=t[n];s()}}),this.emit("__destroy")}onTip(r){return this.on("__tip",r)}onDestroy(r){return this.on("__destroy",r)}get[Symbol.toStringTag](){return"Domain"}}let so=null;function xm(e){so=e}class Ee extends $e{constructor(t,n={}){super();d(this,"debug",!1);d(this,"defaultResponse",null);d(this,"service");d(this,"process");d(this,"client");d(this,"delay",800);d(this,"loading",!1);d(this,"pending",null);d(this,"response",null);d(this,"error",null);d(this,"id",String(this.uid()));const{client:s,delay:i,defaultResponse:o,process:a,onSuccess:c,onFailed:l,onCompleted:u,onCanceled:h,onLoading:f,beforeRequest:p}=n;this.service=t,this.process=a,this.client=s,i!==void 0&&(this.delay=i),o&&(this.defaultResponse=o,this.response=o),c&&this.onSuccess(c),l&&this.onFailed(l,{override:!0}),u&&this.onCompleted(u),h&&this.onCanceled(h),f&&this.onLoadingChange(f),p&&this.beforeRequest(p),so&&so(this)}get state(){return{loading:this.loading,error:this.error,response:this.response}}async run(...t){if(!this.service)return b.Err("缺少 service");if(typeof this.service!="function")return b.Err("service 不是函数");if(!this.client)return b.Err("缺少 client");if(this.pending!==null){const l=await this.pending;this.loading=!1;const u=l.data;return this.pending=null,b.Ok(u)}this.loading=!0,this.response=this.defaultResponse,this.error=null,this.emit(2,!0),this.emit(7,{...this.state}),this.emit(0);let n=null;const s=(()=>{const{hostname:l="",url:u,method:h,query:f,body:p,process:g}=this.service(...t);if(g&&(n=g),h==="GET"){const y=this.client.get(l+u,f,{id:this.id});return b.Ok(y)}if(h==="POST"){const y=this.client.post(l+u,p,{id:this.id});return b.Ok(y)}return b.Err(`未知的 method '${h}'`)})();if(s.error)return b.Err(s.error.message);this.pending=s.data;const[i]=await Promise.all([this.pending,this.delay===null?null:Yo(this.delay)]);this.loading=!1;const o=(()=>n?n(i):i)(),a=this.process?this.process(o):o;if(this.emit(2,!1),this.emit(7,{...this.state}),this.emit(5),this.pending=null,a.error)return a.error.code==="CANCEL"?(this.emit(6),b.Err(a.error)):(this.error=a.error,this.emit(4,a.error),this.emit(7,{...this.state}),b.Err(a.error.message));const c=a.data;return this.response=c,this.emit(3,c),this.emit(7,{...this.state}),this.emit(8,c),b.Ok(c)}reload(){}cancel(){if(!this.client)return b.Err("缺少 client");this.client.cancel(this.id)}clear(){this.response=null,this.emit(7,{...this.state}),this.emit(8,this.response)}modifyResponse(t){if(this.response===null)return;const n=t(this.response);this.response=n,this.emit(7,{...this.state}),this.emit(8,this.response)}onLoadingChange(t){return this.on(2,t)}beforeRequest(t){return this.on(0,t)}onSuccess(t){return this.on(3,t)}onFailed(t,n={}){return n.override&&this.offEvent(4),this.on(4,t)}onCanceled(t){return this.on(6,t)}onError(t){return this.on(4,t)}onCompleted(t){return this.on(5,t)}onStateChange(t){return this.on(7,t)}onResponseChange(t){return this.on(8,t)}}function Sm(e){return De.post("/api/v2/wechat/mine/update_email",e)}function Cm(e){return De.post("/api/v2/wechat/mine/update_pwd",e)}function $m(e){return De.post("/api/validate",{token:e.token})}function Tm(e){const{code:r}=e;return De.post("/api/v2/wechat/auth/weapp",{code:r})}function Em(e){const{email:r,pwd:t}=e;return De.post("/api/v2/wechat/auth/login",{email:r,pwd:t})}function Pm(e){const{email:r,pwd:t,code:n}=e;return De.post("/api/v2/wechat/auth/register",{email:r,pwd:t,code:n})}var _u=(e=>(e[e.Tip=0]="Tip",e[e.Error=1]="Error",e[e.Login=2]="Login",e[e.Logout=3]="Logout",e[e.Expired=4]="Expired",e[e.NeedUpdate=5]="NeedUpdate",e[e.StateChange=6]="StateChange",e))(_u||{});class bu extends $e{constructor(t,n){super(t);d(this,"unique_id","UserCore");d(this,"debug",!1);d(this,"id","");d(this,"username","Anonymous");d(this,"email","");d(this,"avatar","");d(this,"token","");d(this,"isLogin",!1);d(this,"permissions",[]);d(this,"$client");d(this,"$profile");const{id:s,username:i,email:o,avatar:a,token:c}=t;this.id=s,this.username=i,this.email=o,this.avatar=a,this.isLogin=!!c,this.token=c,this.$client=n,c&&this.$client.appendHeaders({Authorization:c}),this.$profile=new Ee(gu,{client:this.$client})}get state(){return{id:this.id,username:this.username,email:this.email,avatar:this.avatar,token:this.token}}async loginWithTokenId(t){const{token:n,tmp:s}=t,o=await new Ee($m,{client:this.$client}).run({token:n});return o.error?o.error.code===800?(this.emit(5),b.Err(o.error)):b.Err(o.error.message,900):(this.id=o.data.id,this.email=o.data.email,this.token=o.data.token,this.isLogin=!0,s||this.emit(2,{...this.state}),await Yo(800),b.Ok({...this.state}))}async loginWithEmailAndPwd(t){const{email:n,pwd:s}=t;if(!n)return b.Err("请输入邮箱");if(!s)return b.Err("请输入密码");const o=await new Ee(Em,{client:this.$client}).run({email:n,pwd:s});return o.error?b.Err(o.error):(this.id=o.data.id,this.token=o.data.token,this.isLogin=!0,this.emit(2,{...this.state}),b.Ok({id:this.id,token:this.token}))}authWithToken(t){const{id:n,email:s,token:i}=t;return i?(this.id=n,this.email=s,this.token=i,this.isLogin=!0,this.emit(2,{...this.state}),b.Ok({id:n,token:i})):b.Err("缺少 token")}async loginWithWeappCode(t){const{code:n}=t;if(!n)return b.Err("请传入 code");const i=await new Ee(Tm,{client:this.$client}).run({code:n});return i.error?b.Err(i.error.message,900):(this.id=i.data.id,this.email=i.data.email,this.token=i.data.token,this.isLogin=!0,this.emit(2,{...this.state}),b.Ok({...this.state}))}async register(t){const{email:n,pwd:s,code:i}=t;if(!n)return b.Err("请输入邮箱");if(!s)return b.Err("请输入密码");const a=await new Ee(Pm,{client:this.$client}).run({email:n,pwd:s,code:i});return a.error?b.Err(a.error):(this.id=a.data.id,this.email=a.data.email,this.token=a.data.token,this.isLogin=!0,this.emit(2,{...this.state}),b.Ok({id:this.id,email:this.email,token:this.token}))}async fetchProfile(){if(!this.isLogin)return b.Err("请先登录");const t=await this.$profile.run();if(t.error)return t;const{nickname:n,email:s,avatar:i,permissions:o}=t.data;return this.username=n,this.email=s??"",this.avatar=i??"",this.permissions=o,b.Ok(t.data)}async updateEmail(t){const{email:n}=t;if(!n)return b.Err("请输入邮箱");const i=await new Ee(Sm,{client:this.$client}).run({email:n});return i.error?b.Err(i.error.message):(this.email=n,this.emit(6,{...this.state}),b.Ok({}))}async updatePwd(t){const{pwd:n}=t;if(!n)return b.Err("请输入密码");const i=await new Ee(Cm,{client:this.$client}).run({pwd:n});return i.error?b.Err(i.error.message):(this.emit(3),b.Ok({}))}hasPermission(t){return this.permissions.includes(t)}logout(){this.username="Anonymous",this.email="",this.avatar="",this.isLogin=!1,this.token="",this.emit(3)}onLogin(t){return this.on(2,t)}onLogout(t){return this.on(3,t)}onNeedUpdate(t){return this.on(5,t)}onExpired(t){return this.on(4,t)}}d(bu,"Events",_u);var Xo=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(Xo||{});const ms={sm:0,md:768,lg:992,xl:1200,"2xl":1536};function gl(e){return e>=ms["2xl"]?"2xl":e>=ms.xl?"xl":e>=ms.lg?"lg":e>=ms.md?"md":"sm"}const yl="(prefers-color-scheme: dark)";var wu=(e=>(e[e.Tip=0]="Tip",e[e.Error=1]="Error",e[e.Login=2]="Login",e[e.Logout=3]="Logout",e[e.ForceUpdate=4]="ForceUpdate",e[e.DeviceSizeChange=5]="DeviceSizeChange",e[e.Ready=6]="Ready",e[e.Show=7]="Show",e[e.Hidden=8]="Hidden",e[e.Resize=9]="Resize",e[e.Blur=10]="Blur",e[e.Keydown=11]="Keydown",e[e.OrientationChange=12]="OrientationChange",e[e.EscapeKeyDown=13]="EscapeKeyDown",e[e.StateChange=14]="StateChange",e))(wu||{});class km extends $e{constructor(t){super();d(this,"$user");d(this,"$storage");d(this,"lifetimes");d(this,"ready",!1);d(this,"screen",{width:0,height:0});d(this,"env",{wechat:!1,ios:!1,android:!1,pc:!1,weapp:!1,prod:"develop"});d(this,"orientation","vertical");d(this,"curDeviceSize","md");d(this,"theme","system");d(this,"safeArea",!1);d(this,"Events",wu);const{user:n,storage:s,beforeReady:i,onReady:o}=t;this.$user=n,this.$storage=s,this.lifetimes={beforeReady:i,onReady:o}}get state(){return{ready:this.ready,theme:this.theme,env:this.env,deviceSize:this.curDeviceSize}}async start(t){const{width:n,height:s}=t;this.screen={...this.screen,width:n,height:s},this.curDeviceSize=gl(n);const{beforeReady:i}=this.lifetimes;if(i){const o=await i();if(o.error)return b.Err(o.error)}return this.ready=!0,this.emit(6),this.emit(14,{...this.state}),b.Ok(null)}setTheme(t){let n=t;if(n&&t==="system"){const s=this.getSystemTheme();if(s.error)return;n=s.data}}applyTheme(t){const n="请在 connect.web 中实现 applyTheme 方法";return console.warn(n),b.Err(n)}getTheme(){const t="请在 connect.web 中实现 getTheme 方法";return console.warn(t),b.Err(t)}getSystemTheme(t){const n="请在 connect.web 中实现 getSystemTheme 方法";return console.warn(n),b.Err(n)}tipUpdate(){this.emit(4)}vibrate(){}setSize(t){this.screen=t}setTitle(t){throw new Error("请实现 setTitle 方法")}setEnv(t){this.env={...this.env,...t}}copy(t){throw new Error("请实现 copy 方法")}getComputedStyle(t){throw new Error("请实现 getComputedStyle 方法")}notify(t){console.log("请实现 notify 方法")}disablePointer(){throw new Error("请实现 disablePointer 方法")}enablePointer(){throw new Error("请实现 enablePointer 方法")}keydown({key:t}){t==="Escape"&&this.escape(),this.emit(11,{key:t})}escape(){this.emit(13)}resize(t){this.screen=t,this.emit(9,t)}blur(){this.emit(10)}handleScreenOrientationChange(t){if(t===0){this.orientation="vertical",this.emit(12,this.orientation);return}this.orientation="horizontal",this.emit(12,this.orientation)}handleResize(t){this.screen=t;const n=gl(t.width);n!==this.curDeviceSize&&(this.curDeviceSize=n,this.emit(5,this.curDeviceSize)),this.emit(9,t)}onReady(t){return this.on(6,t)}onDeviceSizeChange(t){return this.on(5,t)}onUpdate(t){return this.on(4,t)}onOrientationChange(t){return this.on(12,t)}onResize(t){return this.on(9,t)}onBlur(t){return this.on(10,t)}onShow(t){return this.on(7,t)}onHidden(t){return this.on(8,t)}onKeydown(t){return this.on(11,t)}onEscapeKeyDown(t){return this.on(13,t)}onStateChange(t){return this.on(14,t)}onError(t){return this.on(1,t)}}function Qo(e,r){let t;return function(...s){t&&clearTimeout(t),t=setTimeout(()=>{r(...s),t=null},e)}}const Ds=10,Wr=1,io=0,bi={dataSource:[],page:Wr,pageSize:Ds,total:io,search:{},initial:!0,noMore:!1,loading:!1,refreshing:null,empty:!1,error:null},wi={page:Wr,pageSize:Ds,next_marker:""};function Am(e,r){const t={...e};return r.forEach(n=>{delete t[n]}),t}const Om=e=>{if(e===null)return{dataSource:[],page:1,pageSize:Ds,total:io,noMore:!1,empty:!1,error:new Error("process response fail, because response is null")};try{const r=e,{list:t,page:n=1,pageSize:s=10,total:i=0,isEnd:o}=r,a={dataSource:t,page:n,pageSize:s,total:i,noMore:!1,empty:!1,error:null};return i&&s&&n&&i<=s*n&&(a.noMore=!0),o!==void 0&&(a.noMore=o),s&&t.length<s&&(a.noMore=!0),t.length===0&&n===1&&(a.empty=!0),a}catch(r){return{dataSource:[],page:1,pageSize:Ds,total:io,noMore:!1,empty:!1,error:new Error(`process response fail, because ${r.message}`)}}},qs=class extends $e{constructor(t,n={}){super();d(this,"debug",!1);d(this,"request");d(this,"beforeRequest",(t,n)=>({...n,...t}));d(this,"processor");d(this,"initialParams");d(this,"extraResponse");d(this,"params",{...wi});d(this,"response",{...bi});d(this,"rowKey");d(this,"searchDebounce",Qo(800,t=>this.search(t)));if(!(t instanceof Ee))throw new Error("fetch must be a instance of RequestCore");const{debug:s,rowKey:i="id",beforeRequest:o,processor:a,extraDefaultResponse:c,onLoadingChange:l,onStateChange:u,beforeSearch:h,afterSearch:f}=n;this.debug=!!s,this.rowKey=i,this.request=t,this.processor=p=>{const g={...this.response,...qs.commonProcessor(p)};if(a){const y=a(g,p);if(y!==void 0)return y}return g},o!==void 0&&(this.beforeRequest=o),this.initialParams={...wi},this.extraResponse={...c},l&&this.onLoadingChange(l),u&&this.onStateChange(u),h&&this.onBeforeSearch(h),f&&this.onAfterSearch(f),this.initialize(n)}initialize(t){const{search:n,dataSource:s,page:i,pageSize:o,initial:a}=t;n!==void 0&&(this.initialParams={...this.initialParams,...n},this.extraResponse.search=n),s!==void 0&&(this.extraResponse.dataSource=s),i!==void 0&&(this.initialParams.page=i,this.extraResponse.page=i),o!==void 0&&(this.initialParams.pageSize=o,this.extraResponse.pageSize=o),a!==void 0&&(this.extraResponse.initial=a),this.params={...this.initialParams},this.response={...qs.defaultResponse(),...this.extraResponse};const{page:c,pageSize:l,...u}=this.params,h={search:u};c&&(h.page=c),l&&(h.pageSize=l),this.response={...this.response,...h,search:{...this.response.search}}}setParams(t){let n={...this.params,...t};typeof t=="function"&&(n=t(this.params)),this.params=n,this.emit(3,{...this.params})}setDataSource(t){this.response.dataSource=t,this.emit(6,{...this.response})}async fetch(t,...n){this.response.error=null,this.response.loading=!0,this.emit(0,!0),this.emit(6,{...this.response});const s={...this.params,...t};let i=this.beforeRequest({...s},this.params);i===void 0&&(i=s);const o=await this.request.run(i,...n);if(this.response.loading=!1,this.response.search=Am({...s},["page","pageSize"]),this.response.initial&&(this.response.initial=!1),this.params={...i},this.emit(0,!1),this.emit(3,{...this.params}),this.emit(8),o.error)return b.Err(o.error);const a=o.data;let c=this.processor(a);return t.page===1&&c.dataSource.length===0&&(c.empty=!0),c.next_marker&&(this.params.next_marker=c.next_marker),c.dataSource===void 0&&(c.dataSource=[]),b.Ok(c)}async init(t){const n=await this.fetch({...this.initialParams,...t||{}});return n.error?(this.tip({icon:"error",text:[n.error.message]}),this.response.error=n.error,this.emit(7,n.error),this.emit(6,{...this.response}),b.Err(n.error)):(this.response={...this.response,...n.data},this.emit(6,{...this.response}),this.emit(5,[...n.data.dataSource]),this.emit(4,[...this.response.dataSource]),b.Ok({...this.response}))}async initAny(){return this.response.initial?this.init():(this.emit(6,{...this.response}),b.Ok(this.response))}async next(){const{page:t,...n}=this.params,s=await this.fetch({...n,page:t+1});return s.error?(this.tip({icon:"error",text:[s.error.message]}),this.response.error=s.error,this.emit(7,s.error),this.emit(6,{...this.response}),b.Err(s.error)):(this.response={...this.response,...s.data},this.emit(6,{...this.response}),this.emit(4,[...this.response.dataSource]),b.Ok({...this.response}))}async prev(){const{page:t,...n}=this.params,s=await this.fetch({...n,page:(()=>t<=Wr?Wr:t-1)()});return s.error?(this.tip({icon:"error",text:[s.error.message]}),this.response.error=s.error,this.emit(7,s.error),this.emit(6,{...this.response}),b.Err(s.error)):(this.response={...this.response,...s.data},this.emit(6,{...this.response}),this.emit(4,[...this.response.dataSource]),b.Ok({...this.response}))}nextWithCursor(){}async loadMoreForce(){const{page:t,...n}=this.params,s=await this.fetch({...n,page:t+1});if(s.error)return this.tip({icon:"error",text:[s.error.message]}),this.response.error=s.error,this.emit(7,s.error),this.emit(6,{...this.response}),b.Err(s.error);s.data.dataSource.length===0&&(this.params.page-=1);const i=this.response.dataSource;return this.response={...this.response,...s.data},this.response.dataSource=i.concat(s.data.dataSource),this.emit(6,{...this.response}),this.emit(5,[...s.data.dataSource]),this.emit(4,[...this.response.dataSource]),b.Ok({...this.response})}async loadMore(){if(this.response.loading||this.response.noMore)return;const{page:t,...n}=this.params,s=await this.fetch({...n,page:t+1});if(s.error)return this.tip({icon:"error",text:[s.error.message]}),this.response.error=s.error,this.emit(7,s.error),this.emit(6,{...this.response}),b.Err(s.error);const i=this.response.dataSource;return this.response={...this.response,...s.data},this.response.dataSource=i.concat(s.data.dataSource),this.emit(6,{...this.response}),this.emit(5,[...s.data.dataSource]),this.emit(4,[...this.response.dataSource]),b.Ok({...this.response})}async goto(t,n){const{page:s,pageSize:i,...o}=this.params,a=await this.fetch({...o,page:(()=>t<=Wr?Wr:t)(),pageSize:(()=>n!==void 0?n:i)()});return a.error?(this.tip({icon:"error",text:[a.error.message]}),this.response.error=a.error,this.emit(7,a.error),this.emit(6,{...this.response}),b.Err(a.error)):(this.response={...this.response,...a.data},this.emit(6,{...this.response}),this.emit(4,[...this.response.dataSource]),b.Ok({...this.response}))}async search(t){this.emit(1);const n=await this.fetch({...this.initialParams,...t});return this.emit(2,{params:t}),n.error?(this.tip({icon:"error",text:[n.error.message]}),this.response.error=n.error,this.emit(7,n.error),this.emit(6,{...this.response}),b.Err(n.error)):(this.response={...this.response,...n.data},this.emit(6,{...this.response}),this.emit(4,[...this.response.dataSource]),b.Ok({...this.response}))}async reset(t={}){this.params={...this.initialParams};const n=await this.fetch(t);return n.error?(this.tip({icon:"error",text:[n.error.message]}),this.response.error=n.error,this.emit(7,n.error),this.emit(6,{...this.response}),b.Err(n.error)):(this.response={...this.response,...n.data},this.emit(6,{...this.response}),this.emit(4,[...this.response.dataSource]),b.Ok({...this.response}))}reload(){return this.fetch({})}async refresh(){const{page:t,...n}=this.params;this.response.refreshing=!0,this.emit(6,{...this.response});const s=await this.fetch({...n,page:1,next_marker:""});return this.response.refreshing=!1,s.error?(this.tip({icon:"error",text:[s.error.message]}),this.response.error=s.error,this.emit(7,s.error),this.emit(6,{...this.response}),b.Err(s.error)):(this.response={...this.response,...s.data},this.emit(6,{...this.response}),this.emit(4,[...this.response.dataSource]),b.Ok({...this.response}))}clear(){this.response={...bi},this.params={...wi},this.emit(6,{...this.response}),this.emit(4,[...this.response.dataSource])}deleteItem(t){const{dataSource:n}=this.response,s=n.filter(i=>!t(i));this.response.total=s.length,this.response.dataSource=s,this.emit(6,{...this.response}),this.emit(4,[...this.response.dataSource])}async deleteItems(t){const{dataSource:n}=this.response,s=n.filter(i=>!t.includes(i));this.response.total=s.length,this.response.dataSource=s,this.emit(6,{...this.response}),this.emit(4,[...this.response.dataSource])}modifyItem(t){const{dataSource:n}=this.response,s=[];for(let i=0;i<n.length;i+=1){const o=n[i];let a=t(o);a||(a=o),s.push(a)}this.response.dataSource=s,this.emit(6,{...this.response}),this.emit(4,[...this.response.dataSource])}replaceDataSource(t){this.response.dataSource=t,this.emit(4,[...this.response.dataSource])}modifyDataSource(t){this.response.dataSource=this.response.dataSource.map(n=>t(n)),this.emit(6,{...this.response}),this.emit(4,[...this.response.dataSource])}modifyResponse(t){this.response=t({...this.response}),this.emit(6,{...this.response})}modifyParams(t){this.params=t(this.params),this.emit(3,{...this.params})}modifySearch(t){this.params={...t(this.params),page:this.params.page,pageSize:this.params.pageSize},this.emit(3,{...this.params})}onStateChange(t){return this.on(6,t)}onLoadingChange(t){return this.on(0,t)}onBeforeSearch(t){return this.on(1,t)}onAfterSearch(t){return this.on(2,t)}onDataSourceChange(t){return this.on(4,t)}onDataSourceAdded(t){return this.on(5,t)}onError(t){return this.on(7,t)}onComplete(t){return this.on(8,t)}};let vt=qs;d(vt,"defaultResponse",()=>({...bi})),d(vt,"commonProcessor",Om);var Rm=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;r[t]=s;for(t in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var i=Object.getOwnPropertySymbols(r);if(i.length!==1||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(r,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(r,t);if(o.value!==s||o.enumerable!==!0)return!1}return!0},vl=typeof Symbol<"u"&&Symbol,Mm=Rm,Nm=function(){return typeof vl!="function"||typeof Symbol!="function"||typeof vl("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Mm()},_l={foo:{}},Lm=Object,Im=function(){return{__proto__:_l}.foo===_l.foo&&!({__proto__:null}instanceof Lm)},Dm="Function.prototype.bind called on incompatible ",xi=Array.prototype.slice,Fm=Object.prototype.toString,Bm="[object Function]",zm=function(r){var t=this;if(typeof t!="function"||Fm.call(t)!==Bm)throw new TypeError(Dm+t);for(var n=xi.call(arguments,1),s,i=function(){if(this instanceof s){var u=t.apply(this,n.concat(xi.call(arguments)));return Object(u)===u?u:this}else return t.apply(r,n.concat(xi.call(arguments)))},o=Math.max(0,t.length-n.length),a=[],c=0;c<o;c++)a.push("$"+c);if(s=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),t.prototype){var l=function(){};l.prototype=t.prototype,s.prototype=new l,l.prototype=null}return s},Hm=zm,Zo=Function.prototype.bind||Hm,Um=Zo,jm=Um.call(Function.call,Object.prototype.hasOwnProperty),me,nn=SyntaxError,xu=Function,Qr=TypeError,Si=function(e){try{return xu('"use strict"; return ('+e+").constructor;")()}catch{}},Or=Object.getOwnPropertyDescriptor;if(Or)try{Or({},"")}catch{Or=null}var Ci=function(){throw new Qr},qm=Or?function(){try{return arguments.callee,Ci}catch{try{return Or(arguments,"callee").get}catch{return Ci}}}():Ci,zr=Nm(),Vm=Im(),Ke=Object.getPrototypeOf||(Vm?function(e){return e.__proto__}:null),Ur={},Wm=typeof Uint8Array>"u"||!Ke?me:Ke(Uint8Array),Rr={"%AggregateError%":typeof AggregateError>"u"?me:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?me:ArrayBuffer,"%ArrayIteratorPrototype%":zr&&Ke?Ke([][Symbol.iterator]()):me,"%AsyncFromSyncIteratorPrototype%":me,"%AsyncFunction%":Ur,"%AsyncGenerator%":Ur,"%AsyncGeneratorFunction%":Ur,"%AsyncIteratorPrototype%":Ur,"%Atomics%":typeof Atomics>"u"?me:Atomics,"%BigInt%":typeof BigInt>"u"?me:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?me:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?me:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?me:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?me:Float32Array,"%Float64Array%":typeof Float64Array>"u"?me:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?me:FinalizationRegistry,"%Function%":xu,"%GeneratorFunction%":Ur,"%Int8Array%":typeof Int8Array>"u"?me:Int8Array,"%Int16Array%":typeof Int16Array>"u"?me:Int16Array,"%Int32Array%":typeof Int32Array>"u"?me:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":zr&&Ke?Ke(Ke([][Symbol.iterator]())):me,"%JSON%":typeof JSON=="object"?JSON:me,"%Map%":typeof Map>"u"?me:Map,"%MapIteratorPrototype%":typeof Map>"u"||!zr||!Ke?me:Ke(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?me:Promise,"%Proxy%":typeof Proxy>"u"?me:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?me:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?me:Set,"%SetIteratorPrototype%":typeof Set>"u"||!zr||!Ke?me:Ke(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?me:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":zr&&Ke?Ke(""[Symbol.iterator]()):me,"%Symbol%":zr?Symbol:me,"%SyntaxError%":nn,"%ThrowTypeError%":qm,"%TypedArray%":Wm,"%TypeError%":Qr,"%Uint8Array%":typeof Uint8Array>"u"?me:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?me:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?me:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?me:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?me:WeakMap,"%WeakRef%":typeof WeakRef>"u"?me:WeakRef,"%WeakSet%":typeof WeakSet>"u"?me:WeakSet};if(Ke)try{null.error}catch(e){var Gm=Ke(Ke(e));Rr["%Error.prototype%"]=Gm}var Km=function e(r){var t;if(r==="%AsyncFunction%")t=Si("async function () {}");else if(r==="%GeneratorFunction%")t=Si("function* () {}");else if(r==="%AsyncGeneratorFunction%")t=Si("async function* () {}");else if(r==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(r==="%AsyncIteratorPrototype%"){var s=e("%AsyncGenerator%");s&&Ke&&(t=Ke(s.prototype))}return Rr[r]=t,t},bl={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Xn=Zo,Fs=jm,Ym=Xn.call(Function.call,Array.prototype.concat),Jm=Xn.call(Function.apply,Array.prototype.splice),wl=Xn.call(Function.call,String.prototype.replace),Bs=Xn.call(Function.call,String.prototype.slice),Xm=Xn.call(Function.call,RegExp.prototype.exec),Qm=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Zm=/\\(\\)?/g,eg=function(r){var t=Bs(r,0,1),n=Bs(r,-1);if(t==="%"&&n!=="%")throw new nn("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new nn("invalid intrinsic syntax, expected opening `%`");var s=[];return wl(r,Qm,function(i,o,a,c){s[s.length]=a?wl(c,Zm,"$1"):o||i}),s},tg=function(r,t){var n=r,s;if(Fs(bl,n)&&(s=bl[n],n="%"+s[0]+"%"),Fs(Rr,n)){var i=Rr[n];if(i===Ur&&(i=Km(n)),typeof i>"u"&&!t)throw new Qr("intrinsic "+r+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new nn("intrinsic "+r+" does not exist!")},ea=function(r,t){if(typeof r!="string"||r.length===0)throw new Qr("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Qr('"allowMissing" argument must be a boolean');if(Xm(/^%?[^%]*%?$/,r)===null)throw new nn("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=eg(r),s=n.length>0?n[0]:"",i=tg("%"+s+"%",t),o=i.name,a=i.value,c=!1,l=i.alias;l&&(s=l[0],Jm(n,Ym([0,1],l)));for(var u=1,h=!0;u<n.length;u+=1){var f=n[u],p=Bs(f,0,1),g=Bs(f,-1);if((p==='"'||p==="'"||p==="`"||g==='"'||g==="'"||g==="`")&&p!==g)throw new nn("property names with quotes must have matching quotes");if((f==="constructor"||!h)&&(c=!0),s+="."+f,o="%"+s+"%",Fs(Rr,o))a=Rr[o];else if(a!=null){if(!(f in a)){if(!t)throw new Qr("base intrinsic for "+r+" exists, but the property is not available.");return}if(Or&&u+1>=n.length){var y=Or(a,f);h=!!y,h&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[f]}else h=Fs(a,f),a=a[f];h&&!c&&(Rr[o]=a)}}return a},Su={exports:{}};(function(e){var r=Zo,t=ea,n=t("%Function.prototype.apply%"),s=t("%Function.prototype.call%"),i=t("%Reflect.apply%",!0)||r.call(s,n),o=t("%Object.getOwnPropertyDescriptor%",!0),a=t("%Object.defineProperty%",!0),c=t("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}e.exports=function(h){var f=i(r,s,arguments);if(o&&a){var p=o(f,"length");p.configurable&&a(f,"length",{value:1+c(0,h.length-(arguments.length-1))})}return f};var l=function(){return i(r,n,arguments)};a?a(e.exports,"apply",{value:l}):e.exports.apply=l})(Su);var rg=Su.exports,Cu=ea,$u=rg,ng=$u(Cu("String.prototype.indexOf")),sg=function(r,t){var n=Cu(r,!!t);return typeof n=="function"&&ng(r,".prototype.")>-1?$u(n):n};const ig={},og=Object.freeze(Object.defineProperty({__proto__:null,default:ig},Symbol.toStringTag,{value:"Module"})),ag=_p(og);var ta=typeof Map=="function"&&Map.prototype,$i=Object.getOwnPropertyDescriptor&&ta?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,zs=ta&&$i&&typeof $i.get=="function"?$i.get:null,xl=ta&&Map.prototype.forEach,ra=typeof Set=="function"&&Set.prototype,Ti=Object.getOwnPropertyDescriptor&&ra?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Hs=ra&&Ti&&typeof Ti.get=="function"?Ti.get:null,Sl=ra&&Set.prototype.forEach,lg=typeof WeakMap=="function"&&WeakMap.prototype,Mn=lg?WeakMap.prototype.has:null,cg=typeof WeakSet=="function"&&WeakSet.prototype,Nn=cg?WeakSet.prototype.has:null,ug=typeof WeakRef=="function"&&WeakRef.prototype,Cl=ug?WeakRef.prototype.deref:null,hg=Boolean.prototype.valueOf,dg=Object.prototype.toString,fg=Function.prototype.toString,pg=String.prototype.match,na=String.prototype.slice,lr=String.prototype.replace,mg=String.prototype.toUpperCase,$l=String.prototype.toLowerCase,Tu=RegExp.prototype.test,Tl=Array.prototype.concat,Dt=Array.prototype.join,gg=Array.prototype.slice,El=Math.floor,oo=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ei=Object.getOwnPropertySymbols,ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,sn=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ot=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===sn||"symbol")?Symbol.toStringTag:null,Eu=Object.prototype.propertyIsEnumerable,Pl=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function kl(e,r){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||Tu.call(/e/,r))return r;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var n=e<0?-El(-e):El(e);if(n!==e){var s=String(n),i=na.call(r,s.length+1);return lr.call(s,t,"$&_")+"."+lr.call(lr.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return lr.call(r,t,"$&_")}var lo=ag,Al=lo.custom,Ol=ku(Al)?Al:null,yg=function e(r,t,n,s){var i=t||{};if(or(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(or(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=or(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(or(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(or(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof r>"u")return"undefined";if(r===null)return"null";if(typeof r=="boolean")return r?"true":"false";if(typeof r=="string")return Ou(r,i);if(typeof r=="number"){if(r===0)return 1/0/r>0?"0":"-0";var c=String(r);return a?kl(r,c):c}if(typeof r=="bigint"){var l=String(r)+"n";return a?kl(r,l):l}var u=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof r=="object")return co(r)?"[Array]":"[Object]";var h=Lg(i,n);if(typeof s>"u")s=[];else if(Au(s,r)>=0)return"[Circular]";function f(j,L,k){if(L&&(s=gg.call(s),s.push(L)),k){var G={depth:i.depth};return or(i,"quoteStyle")&&(G.quoteStyle=i.quoteStyle),e(j,G,n+1,s)}return e(j,i,n+1,s)}if(typeof r=="function"&&!Rl(r)){var p=Tg(r),g=gs(r,f);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(g.length>0?" { "+Dt.call(g,", ")+" }":"")}if(ku(r)){var y=sn?lr.call(String(r),/^(Symbol\(.*\))_[^)]*$/,"$1"):ao.call(r);return typeof r=="object"&&!sn?bn(y):y}if(Rg(r)){for(var S="<"+$l.call(String(r.nodeName)),x=r.attributes||[],P=0;P<x.length;P++)S+=" "+x[P].name+"="+Pu(vg(x[P].value),"double",i);return S+=">",r.childNodes&&r.childNodes.length&&(S+="..."),S+="</"+$l.call(String(r.nodeName))+">",S}if(co(r)){if(r.length===0)return"[]";var J=gs(r,f);return h&&!Ng(J)?"["+uo(J,h)+"]":"[ "+Dt.call(J,", ")+" ]"}if(bg(r)){var H=gs(r,f);return!("cause"in Error.prototype)&&"cause"in r&&!Eu.call(r,"cause")?"{ ["+String(r)+"] "+Dt.call(Tl.call("[cause]: "+f(r.cause),H),", ")+" }":H.length===0?"["+String(r)+"]":"{ ["+String(r)+"] "+Dt.call(H,", ")+" }"}if(typeof r=="object"&&o){if(Ol&&typeof r[Ol]=="function"&&lo)return lo(r,{depth:u-n});if(o!=="symbol"&&typeof r.inspect=="function")return r.inspect()}if(Eg(r)){var V=[];return xl&&xl.call(r,function(j,L){V.push(f(L,r,!0)+" => "+f(j,r))}),Ml("Map",zs.call(r),V,h)}if(Ag(r)){var W=[];return Sl&&Sl.call(r,function(j){W.push(f(j,r))}),Ml("Set",Hs.call(r),W,h)}if(Pg(r))return Pi("WeakMap");if(Og(r))return Pi("WeakSet");if(kg(r))return Pi("WeakRef");if(xg(r))return bn(f(Number(r)));if(Cg(r))return bn(f(oo.call(r)));if(Sg(r))return bn(hg.call(r));if(wg(r))return bn(f(String(r)));if(!_g(r)&&!Rl(r)){var T=gs(r,f),N=Pl?Pl(r)===Object.prototype:r instanceof Object||r.constructor===Object,M=r instanceof Object?"":"null prototype",U=!N&&ot&&Object(r)===r&&ot in r?na.call(yr(r),8,-1):M?"Object":"",Z=N||typeof r.constructor!="function"?"":r.constructor.name?r.constructor.name+" ":"",te=Z+(U||M?"["+Dt.call(Tl.call([],U||[],M||[]),": ")+"] ":"");return T.length===0?te+"{}":h?te+"{"+uo(T,h)+"}":te+"{ "+Dt.call(T,", ")+" }"}return String(r)};function Pu(e,r,t){var n=(t.quoteStyle||r)==="double"?'"':"'";return n+e+n}function vg(e){return lr.call(String(e),/"/g,"&quot;")}function co(e){return yr(e)==="[object Array]"&&(!ot||!(typeof e=="object"&&ot in e))}function _g(e){return yr(e)==="[object Date]"&&(!ot||!(typeof e=="object"&&ot in e))}function Rl(e){return yr(e)==="[object RegExp]"&&(!ot||!(typeof e=="object"&&ot in e))}function bg(e){return yr(e)==="[object Error]"&&(!ot||!(typeof e=="object"&&ot in e))}function wg(e){return yr(e)==="[object String]"&&(!ot||!(typeof e=="object"&&ot in e))}function xg(e){return yr(e)==="[object Number]"&&(!ot||!(typeof e=="object"&&ot in e))}function Sg(e){return yr(e)==="[object Boolean]"&&(!ot||!(typeof e=="object"&&ot in e))}function ku(e){if(sn)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!ao)return!1;try{return ao.call(e),!0}catch{}return!1}function Cg(e){if(!e||typeof e!="object"||!oo)return!1;try{return oo.call(e),!0}catch{}return!1}var $g=Object.prototype.hasOwnProperty||function(e){return e in this};function or(e,r){return $g.call(e,r)}function yr(e){return dg.call(e)}function Tg(e){if(e.name)return e.name;var r=pg.call(fg.call(e),/^function\s*([\w$]+)/);return r?r[1]:null}function Au(e,r){if(e.indexOf)return e.indexOf(r);for(var t=0,n=e.length;t<n;t++)if(e[t]===r)return t;return-1}function Eg(e){if(!zs||!e||typeof e!="object")return!1;try{zs.call(e);try{Hs.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function Pg(e){if(!Mn||!e||typeof e!="object")return!1;try{Mn.call(e,Mn);try{Nn.call(e,Nn)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function kg(e){if(!Cl||!e||typeof e!="object")return!1;try{return Cl.call(e),!0}catch{}return!1}function Ag(e){if(!Hs||!e||typeof e!="object")return!1;try{Hs.call(e);try{zs.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function Og(e){if(!Nn||!e||typeof e!="object")return!1;try{Nn.call(e,Nn);try{Mn.call(e,Mn)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function Rg(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function Ou(e,r){if(e.length>r.maxStringLength){var t=e.length-r.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return Ou(na.call(e,0,r.maxStringLength),r)+n}var s=lr.call(lr.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Mg);return Pu(s,"single",r)}function Mg(e){var r=e.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[r];return t?"\\"+t:"\\x"+(r<16?"0":"")+mg.call(r.toString(16))}function bn(e){return"Object("+e+")"}function Pi(e){return e+" { ? }"}function Ml(e,r,t,n){var s=n?uo(t,n):Dt.call(t,", ");return e+" ("+r+") {"+s+"}"}function Ng(e){for(var r=0;r<e.length;r++)if(Au(e[r],`
`)>=0)return!1;return!0}function Lg(e,r){var t;if(e.indent==="	")t="	";else if(typeof e.indent=="number"&&e.indent>0)t=Dt.call(Array(e.indent+1)," ");else return null;return{base:t,prev:Dt.call(Array(r+1),t)}}function uo(e,r){if(e.length===0)return"";var t=`
`+r.prev+r.base;return t+Dt.call(e,","+t)+`
`+r.prev}function gs(e,r){var t=co(e),n=[];if(t){n.length=e.length;for(var s=0;s<e.length;s++)n[s]=or(e,s)?r(e[s],e):""}var i=typeof Ei=="function"?Ei(e):[],o;if(sn){o={};for(var a=0;a<i.length;a++)o["$"+i[a]]=i[a]}for(var c in e)or(e,c)&&(t&&String(Number(c))===c&&c<e.length||sn&&o["$"+c]instanceof Symbol||(Tu.call(/[^\w$]/,c)?n.push(r(c,e)+": "+r(e[c],e)):n.push(c+": "+r(e[c],e))));if(typeof Ei=="function")for(var l=0;l<i.length;l++)Eu.call(e,i[l])&&n.push("["+r(i[l])+"]: "+r(e[i[l]],e));return n}var sa=ea,hn=sg,Ig=yg,Dg=sa("%TypeError%"),ys=sa("%WeakMap%",!0),vs=sa("%Map%",!0),Fg=hn("WeakMap.prototype.get",!0),Bg=hn("WeakMap.prototype.set",!0),zg=hn("WeakMap.prototype.has",!0),Hg=hn("Map.prototype.get",!0),Ug=hn("Map.prototype.set",!0),jg=hn("Map.prototype.has",!0),ia=function(e,r){for(var t=e,n;(n=t.next)!==null;t=n)if(n.key===r)return t.next=n.next,n.next=e.next,e.next=n,n},qg=function(e,r){var t=ia(e,r);return t&&t.value},Vg=function(e,r,t){var n=ia(e,r);n?n.value=t:e.next={key:r,next:e.next,value:t}},Wg=function(e,r){return!!ia(e,r)},Gg=function(){var r,t,n,s={assert:function(i){if(!s.has(i))throw new Dg("Side channel does not contain "+Ig(i))},get:function(i){if(ys&&i&&(typeof i=="object"||typeof i=="function")){if(r)return Fg(r,i)}else if(vs){if(t)return Hg(t,i)}else if(n)return qg(n,i)},has:function(i){if(ys&&i&&(typeof i=="object"||typeof i=="function")){if(r)return zg(r,i)}else if(vs){if(t)return jg(t,i)}else if(n)return Wg(n,i);return!1},set:function(i,o){ys&&i&&(typeof i=="object"||typeof i=="function")?(r||(r=new ys),Bg(r,i,o)):vs?(t||(t=new vs),Ug(t,i,o)):(n||(n={key:{},next:null}),Vg(n,i,o))}};return s},Kg=String.prototype.replace,Yg=/%20/g,ki={RFC1738:"RFC1738",RFC3986:"RFC3986"},oa={default:ki.RFC3986,formatters:{RFC1738:function(e){return Kg.call(e,Yg,"+")},RFC3986:function(e){return String(e)}},RFC1738:ki.RFC1738,RFC3986:ki.RFC3986},Jg=oa,Ai=Object.prototype.hasOwnProperty,Tr=Array.isArray,Nt=function(){for(var e=[],r=0;r<256;++r)e.push("%"+((r<16?"0":"")+r.toString(16)).toUpperCase());return e}(),Xg=function(r){for(;r.length>1;){var t=r.pop(),n=t.obj[t.prop];if(Tr(n)){for(var s=[],i=0;i<n.length;++i)typeof n[i]<"u"&&s.push(n[i]);t.obj[t.prop]=s}}},Ru=function(r,t){for(var n=t&&t.plainObjects?Object.create(null):{},s=0;s<r.length;++s)typeof r[s]<"u"&&(n[s]=r[s]);return n},Qg=function e(r,t,n){if(!t)return r;if(typeof t!="object"){if(Tr(r))r.push(t);else if(r&&typeof r=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Ai.call(Object.prototype,t))&&(r[t]=!0);else return[r,t];return r}if(!r||typeof r!="object")return[r].concat(t);var s=r;return Tr(r)&&!Tr(t)&&(s=Ru(r,n)),Tr(r)&&Tr(t)?(t.forEach(function(i,o){if(Ai.call(r,o)){var a=r[o];a&&typeof a=="object"&&i&&typeof i=="object"?r[o]=e(a,i,n):r.push(i)}else r[o]=i}),r):Object.keys(t).reduce(function(i,o){var a=t[o];return Ai.call(i,o)?i[o]=e(i[o],a,n):i[o]=a,i},s)},Zg=function(r,t){return Object.keys(t).reduce(function(n,s){return n[s]=t[s],n},r)},ey=function(e,r,t){var n=e.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},ty=function(r,t,n,s,i){if(r.length===0)return r;var o=r;if(typeof r=="symbol"?o=Symbol.prototype.toString.call(r):typeof r!="string"&&(o=String(r)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var a="",c=0;c<o.length;++c){var l=o.charCodeAt(c);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||i===Jg.RFC1738&&(l===40||l===41)){a+=o.charAt(c);continue}if(l<128){a=a+Nt[l];continue}if(l<2048){a=a+(Nt[192|l>>6]+Nt[128|l&63]);continue}if(l<55296||l>=57344){a=a+(Nt[224|l>>12]+Nt[128|l>>6&63]+Nt[128|l&63]);continue}c+=1,l=65536+((l&1023)<<10|o.charCodeAt(c)&1023),a+=Nt[240|l>>18]+Nt[128|l>>12&63]+Nt[128|l>>6&63]+Nt[128|l&63]}return a},ry=function(r){for(var t=[{obj:{o:r},prop:"o"}],n=[],s=0;s<t.length;++s)for(var i=t[s],o=i.obj[i.prop],a=Object.keys(o),c=0;c<a.length;++c){var l=a[c],u=o[l];typeof u=="object"&&u!==null&&n.indexOf(u)===-1&&(t.push({obj:o,prop:l}),n.push(u))}return Xg(t),r},ny=function(r){return Object.prototype.toString.call(r)==="[object RegExp]"},sy=function(r){return!r||typeof r!="object"?!1:!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))},iy=function(r,t){return[].concat(r,t)},oy=function(r,t){if(Tr(r)){for(var n=[],s=0;s<r.length;s+=1)n.push(t(r[s]));return n}return t(r)},Mu={arrayToObject:Ru,assign:Zg,combine:iy,compact:ry,decode:ey,encode:ty,isBuffer:sy,isRegExp:ny,maybeMap:oy,merge:Qg},Nu=Gg,Cs=Mu,Ln=oa,ay=Object.prototype.hasOwnProperty,Nl={brackets:function(r){return r+"[]"},comma:"comma",indices:function(r,t){return r+"["+t+"]"},repeat:function(r){return r}},Kt=Array.isArray,ly=Array.prototype.push,Lu=function(e,r){ly.apply(e,Kt(r)?r:[r])},cy=Date.prototype.toISOString,Ll=Ln.default,nt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Cs.encode,encodeValuesOnly:!1,format:Ll,formatter:Ln.formatters[Ll],indices:!1,serializeDate:function(r){return cy.call(r)},skipNulls:!1,strictNullHandling:!1},uy=function(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r=="symbol"||typeof r=="bigint"},Oi={},hy=function e(r,t,n,s,i,o,a,c,l,u,h,f,p,g,y,S){for(var x=r,P=S,J=0,H=!1;(P=P.get(Oi))!==void 0&&!H;){var V=P.get(r);if(J+=1,typeof V<"u"){if(V===J)throw new RangeError("Cyclic object value");H=!0}typeof P.get(Oi)>"u"&&(J=0)}if(typeof c=="function"?x=c(t,x):x instanceof Date?x=h(x):n==="comma"&&Kt(x)&&(x=Cs.maybeMap(x,function(G){return G instanceof Date?h(G):G})),x===null){if(i)return a&&!g?a(t,nt.encoder,y,"key",f):t;x=""}if(uy(x)||Cs.isBuffer(x)){if(a){var W=g?t:a(t,nt.encoder,y,"key",f);return[p(W)+"="+p(a(x,nt.encoder,y,"value",f))]}return[p(t)+"="+p(String(x))]}var T=[];if(typeof x>"u")return T;var N;if(n==="comma"&&Kt(x))g&&a&&(x=Cs.maybeMap(x,a)),N=[{value:x.length>0?x.join(",")||null:void 0}];else if(Kt(c))N=c;else{var M=Object.keys(x);N=l?M.sort(l):M}for(var U=s&&Kt(x)&&x.length===1?t+"[]":t,Z=0;Z<N.length;++Z){var te=N[Z],j=typeof te=="object"&&typeof te.value<"u"?te.value:x[te];if(!(o&&j===null)){var L=Kt(x)?typeof n=="function"?n(U,te):U:U+(u?"."+te:"["+te+"]");S.set(r,J);var k=Nu();k.set(Oi,S),Lu(T,e(j,L,n,s,i,o,n==="comma"&&g&&Kt(x)?null:a,c,l,u,h,f,p,g,y,k))}}return T},dy=function(r){if(!r)return nt;if(r.encoder!==null&&typeof r.encoder<"u"&&typeof r.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=r.charset||nt.charset;if(typeof r.charset<"u"&&r.charset!=="utf-8"&&r.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Ln.default;if(typeof r.format<"u"){if(!ay.call(Ln.formatters,r.format))throw new TypeError("Unknown format option provided.");n=r.format}var s=Ln.formatters[n],i=nt.filter;return(typeof r.filter=="function"||Kt(r.filter))&&(i=r.filter),{addQueryPrefix:typeof r.addQueryPrefix=="boolean"?r.addQueryPrefix:nt.addQueryPrefix,allowDots:typeof r.allowDots>"u"?nt.allowDots:!!r.allowDots,charset:t,charsetSentinel:typeof r.charsetSentinel=="boolean"?r.charsetSentinel:nt.charsetSentinel,delimiter:typeof r.delimiter>"u"?nt.delimiter:r.delimiter,encode:typeof r.encode=="boolean"?r.encode:nt.encode,encoder:typeof r.encoder=="function"?r.encoder:nt.encoder,encodeValuesOnly:typeof r.encodeValuesOnly=="boolean"?r.encodeValuesOnly:nt.encodeValuesOnly,filter:i,format:n,formatter:s,serializeDate:typeof r.serializeDate=="function"?r.serializeDate:nt.serializeDate,skipNulls:typeof r.skipNulls=="boolean"?r.skipNulls:nt.skipNulls,sort:typeof r.sort=="function"?r.sort:null,strictNullHandling:typeof r.strictNullHandling=="boolean"?r.strictNullHandling:nt.strictNullHandling}},fy=function(e,r){var t=e,n=dy(r),s,i;typeof n.filter=="function"?(i=n.filter,t=i("",t)):Kt(n.filter)&&(i=n.filter,s=i);var o=[];if(typeof t!="object"||t===null)return"";var a;r&&r.arrayFormat in Nl?a=r.arrayFormat:r&&"indices"in r?a=r.indices?"indices":"repeat":a="indices";var c=Nl[a];if(r&&"commaRoundTrip"in r&&typeof r.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=c==="comma"&&r&&r.commaRoundTrip;s||(s=Object.keys(t)),n.sort&&s.sort(n.sort);for(var u=Nu(),h=0;h<s.length;++h){var f=s[h];n.skipNulls&&t[f]===null||Lu(o,hy(t[f],f,c,l,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var p=o.join(n.delimiter),g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),p.length>0?g+p:""},on=Mu,ho=Object.prototype.hasOwnProperty,py=Array.isArray,Ge={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:on.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},my=function(e){return e.replace(/&#(\d+);/g,function(r,t){return String.fromCharCode(parseInt(t,10))})},Iu=function(e,r){return e&&typeof e=="string"&&r.comma&&e.indexOf(",")>-1?e.split(","):e},gy="utf8=%26%2310003%3B",yy="utf8=%E2%9C%93",vy=function(r,t){var n={__proto__:null},s=t.ignoreQueryPrefix?r.replace(/^\?/,""):r,i=t.parameterLimit===1/0?void 0:t.parameterLimit,o=s.split(t.delimiter,i),a=-1,c,l=t.charset;if(t.charsetSentinel)for(c=0;c<o.length;++c)o[c].indexOf("utf8=")===0&&(o[c]===yy?l="utf-8":o[c]===gy&&(l="iso-8859-1"),a=c,c=o.length);for(c=0;c<o.length;++c)if(c!==a){var u=o[c],h=u.indexOf("]="),f=h===-1?u.indexOf("="):h+1,p,g;f===-1?(p=t.decoder(u,Ge.decoder,l,"key"),g=t.strictNullHandling?null:""):(p=t.decoder(u.slice(0,f),Ge.decoder,l,"key"),g=on.maybeMap(Iu(u.slice(f+1),t),function(y){return t.decoder(y,Ge.decoder,l,"value")})),g&&t.interpretNumericEntities&&l==="iso-8859-1"&&(g=my(g)),u.indexOf("[]=")>-1&&(g=py(g)?[g]:g),ho.call(n,p)?n[p]=on.combine(n[p],g):n[p]=g}return n},_y=function(e,r,t,n){for(var s=n?r:Iu(r,t),i=e.length-1;i>=0;--i){var o,a=e[i];if(a==="[]"&&t.parseArrays)o=[].concat(s);else{o=t.plainObjects?Object.create(null):{};var c=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,l=parseInt(c,10);!t.parseArrays&&c===""?o={0:s}:!isNaN(l)&&a!==c&&String(l)===c&&l>=0&&t.parseArrays&&l<=t.arrayLimit?(o=[],o[l]=s):c!=="__proto__"&&(o[c]=s)}s=o}return s},by=function(r,t,n,s){if(r){var i=n.allowDots?r.replace(/\.([^.[]+)/g,"[$1]"):r,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,c=n.depth>0&&o.exec(i),l=c?i.slice(0,c.index):i,u=[];if(l){if(!n.plainObjects&&ho.call(Object.prototype,l)&&!n.allowPrototypes)return;u.push(l)}for(var h=0;n.depth>0&&(c=a.exec(i))!==null&&h<n.depth;){if(h+=1,!n.plainObjects&&ho.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(c[1])}return c&&u.push("["+i.slice(c.index)+"]"),_y(u,t,n,s)}},wy=function(r){if(!r)return Ge;if(r.decoder!==null&&r.decoder!==void 0&&typeof r.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof r.charset<"u"&&r.charset!=="utf-8"&&r.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof r.charset>"u"?Ge.charset:r.charset;return{allowDots:typeof r.allowDots>"u"?Ge.allowDots:!!r.allowDots,allowPrototypes:typeof r.allowPrototypes=="boolean"?r.allowPrototypes:Ge.allowPrototypes,allowSparse:typeof r.allowSparse=="boolean"?r.allowSparse:Ge.allowSparse,arrayLimit:typeof r.arrayLimit=="number"?r.arrayLimit:Ge.arrayLimit,charset:t,charsetSentinel:typeof r.charsetSentinel=="boolean"?r.charsetSentinel:Ge.charsetSentinel,comma:typeof r.comma=="boolean"?r.comma:Ge.comma,decoder:typeof r.decoder=="function"?r.decoder:Ge.decoder,delimiter:typeof r.delimiter=="string"||on.isRegExp(r.delimiter)?r.delimiter:Ge.delimiter,depth:typeof r.depth=="number"||r.depth===!1?+r.depth:Ge.depth,ignoreQueryPrefix:r.ignoreQueryPrefix===!0,interpretNumericEntities:typeof r.interpretNumericEntities=="boolean"?r.interpretNumericEntities:Ge.interpretNumericEntities,parameterLimit:typeof r.parameterLimit=="number"?r.parameterLimit:Ge.parameterLimit,parseArrays:r.parseArrays!==!1,plainObjects:typeof r.plainObjects=="boolean"?r.plainObjects:Ge.plainObjects,strictNullHandling:typeof r.strictNullHandling=="boolean"?r.strictNullHandling:Ge.strictNullHandling}},xy=function(e,r){var t=wy(r);if(e===""||e===null||typeof e>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof e=="string"?vy(e,t):e,s=t.plainObjects?Object.create(null):{},i=Object.keys(n),o=0;o<i.length;++o){var a=i[o],c=by(a,n[a],t,typeof e=="string");s=on.merge(s,c,t)}return t.allowSparse===!0?s:on.compact(s)},Sy=fy,Cy=xy,$y=oa,Ty={formats:$y,parse:Cy,stringify:Sy};const Du=ti(Ty);var Ey=function(r,t){if(t=t.split(":")[0],r=+r,!r)return!1;switch(t){case"http":case"ws":return r!==80;case"https":case"wss":return r!==443;case"ftp":return r!==21;case"gopher":return r!==70;case"file":return!1}return r!==0},aa={},Py=Object.prototype.hasOwnProperty,ky;function Il(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function Dl(e){try{return encodeURIComponent(e)}catch{return null}}function Ay(e){for(var r=/([^=?#&]+)=?([^&]*)/g,t={},n;n=r.exec(e);){var s=Il(n[1]),i=Il(n[2]);s===null||i===null||s in t||(t[s]=i)}return t}function Oy(e,r){r=r||"";var t=[],n,s;typeof r!="string"&&(r="?");for(s in e)if(Py.call(e,s)){if(n=e[s],!n&&(n===null||n===ky||isNaN(n))&&(n=""),s=Dl(s),n=Dl(n),s===null||n===null)continue;t.push(s+"="+n)}return t.length?r+t.join("&"):""}aa.stringify=Oy;aa.parse=Ay;var Fu=Ey,ri=aa,Ry=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Bu=/[\n\r\t]/g,My=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,zu=/:\d+$/,Ny=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Ly=/^[a-zA-Z]:/;function la(e){return(e||"").toString().replace(Ry,"")}var fo=[["#","hash"],["?","query"],function(r,t){return Ht(t.protocol)?r.replace(/\\/g,"/"):r},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Fl={hash:1,query:1};function Hu(e){var r;typeof window<"u"?r=window:typeof qn<"u"?r=qn:typeof self<"u"?r=self:r={};var t=r.location||{};e=e||t;var n={},s=typeof e,i;if(e.protocol==="blob:")n=new jt(unescape(e.pathname),{});else if(s==="string"){n=new jt(e,{});for(i in Fl)delete n[i]}else if(s==="object"){for(i in e)i in Fl||(n[i]=e[i]);n.slashes===void 0&&(n.slashes=My.test(e.href))}return n}function Ht(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function Uu(e,r){e=la(e),e=e.replace(Bu,""),r=r||{};var t=Ny.exec(e),n=t[1]?t[1].toLowerCase():"",s=!!t[2],i=!!t[3],o=0,a;return s?i?(a=t[2]+t[3]+t[4],o=t[2].length+t[3].length):(a=t[2]+t[4],o=t[2].length):i?(a=t[3]+t[4],o=t[3].length):a=t[4],n==="file:"?o>=2&&(a=a.slice(2)):Ht(n)?a=t[4]:n?s&&(a=a.slice(2)):o>=2&&Ht(r.protocol)&&(a=t[4]),{protocol:n,slashes:s||Ht(n),slashesCount:o,rest:a}}function Iy(e,r){if(e==="")return r;for(var t=(r||"/").split("/").slice(0,-1).concat(e.split("/")),n=t.length,s=t[n-1],i=!1,o=0;n--;)t[n]==="."?t.splice(n,1):t[n]===".."?(t.splice(n,1),o++):o&&(n===0&&(i=!0),t.splice(n,1),o--);return i&&t.unshift(""),(s==="."||s==="..")&&t.push(""),t.join("/")}function jt(e,r,t){if(e=la(e),e=e.replace(Bu,""),!(this instanceof jt))return new jt(e,r,t);var n,s,i,o,a,c,l=fo.slice(),u=typeof r,h=this,f=0;for(u!=="object"&&u!=="string"&&(t=r,r=null),t&&typeof t!="function"&&(t=ri.parse),r=Hu(r),s=Uu(e||"",r),n=!s.protocol&&!s.slashes,h.slashes=s.slashes||n&&r.slashes,h.protocol=s.protocol||r.protocol||"",e=s.rest,(s.protocol==="file:"&&(s.slashesCount!==2||Ly.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!Ht(h.protocol)))&&(l[3]=[/(.*)/,"pathname"]);f<l.length;f++){if(o=l[f],typeof o=="function"){e=o(e,h);continue}i=o[0],c=o[1],i!==i?h[c]=e:typeof i=="string"?(a=i==="@"?e.lastIndexOf(i):e.indexOf(i),~a&&(typeof o[2]=="number"?(h[c]=e.slice(0,a),e=e.slice(a+o[2])):(h[c]=e.slice(a),e=e.slice(0,a)))):(a=i.exec(e))&&(h[c]=a[1],e=e.slice(0,a.index)),h[c]=h[c]||n&&o[3]&&r[c]||"",o[4]&&(h[c]=h[c].toLowerCase())}t&&(h.query=t(h.query)),n&&r.slashes&&h.pathname.charAt(0)!=="/"&&(h.pathname!==""||r.pathname!=="")&&(h.pathname=Iy(h.pathname,r.pathname)),h.pathname.charAt(0)!=="/"&&Ht(h.protocol)&&(h.pathname="/"+h.pathname),Fu(h.port,h.protocol)||(h.host=h.hostname,h.port=""),h.username=h.password="",h.auth&&(a=h.auth.indexOf(":"),~a?(h.username=h.auth.slice(0,a),h.username=encodeURIComponent(decodeURIComponent(h.username)),h.password=h.auth.slice(a+1),h.password=encodeURIComponent(decodeURIComponent(h.password))):h.username=encodeURIComponent(decodeURIComponent(h.auth)),h.auth=h.password?h.username+":"+h.password:h.username),h.origin=h.protocol!=="file:"&&Ht(h.protocol)&&h.host?h.protocol+"//"+h.host:"null",h.href=h.toString()}function Dy(e,r,t){var n=this;switch(e){case"query":typeof r=="string"&&r.length&&(r=(t||ri.parse)(r)),n[e]=r;break;case"port":n[e]=r,Fu(r,n.protocol)?r&&(n.host=n.hostname+":"+r):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=r,n.port&&(r+=":"+n.port),n.host=r;break;case"host":n[e]=r,zu.test(r)?(r=r.split(":"),n.port=r.pop(),n.hostname=r.join(":")):(n.hostname=r,n.port="");break;case"protocol":n.protocol=r.toLowerCase(),n.slashes=!t;break;case"pathname":case"hash":if(r){var s=e==="pathname"?"/":"#";n[e]=r.charAt(0)!==s?s+r:r}else n[e]=r;break;case"username":case"password":n[e]=encodeURIComponent(r);break;case"auth":var i=r.indexOf(":");~i?(n.username=r.slice(0,i),n.username=encodeURIComponent(decodeURIComponent(n.username)),n.password=r.slice(i+1),n.password=encodeURIComponent(decodeURIComponent(n.password))):n.username=encodeURIComponent(decodeURIComponent(r))}for(var o=0;o<fo.length;o++){var a=fo[o];a[4]&&(n[a[1]]=n[a[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin=n.protocol!=="file:"&&Ht(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n}function Fy(e){(!e||typeof e!="function")&&(e=ri.stringify);var r,t=this,n=t.host,s=t.protocol;s&&s.charAt(s.length-1)!==":"&&(s+=":");var i=s+(t.protocol&&t.slashes||Ht(t.protocol)?"//":"");return t.username?(i+=t.username,t.password&&(i+=":"+t.password),i+="@"):t.password?(i+=":"+t.password,i+="@"):t.protocol!=="file:"&&Ht(t.protocol)&&!n&&t.pathname!=="/"&&(i+="@"),(n[n.length-1]===":"||zu.test(t.hostname)&&!t.port)&&(n+=":"),i+=n+t.pathname,r=typeof t.query=="object"?e(t.query):t.query,r&&(i+=r.charAt(0)!=="?"?"?"+r:r),t.hash&&(i+=t.hash),i}jt.prototype={set:Dy,toString:Fy};jt.extractProtocol=Uu;jt.location=Hu;jt.trimLeft=la;jt.qs=ri;var By=jt;const ju=ti(By),ar=class extends $e{constructor(){super(...arguments);d(this,"unique_id","NavigatorCore");d(this,"debug",!1);d(this,"name","root");d(this,"pathname","/");d(this,"query",{});d(this,"params",{});d(this,"location",{});d(this,"href","/");d(this,"histories",[]);d(this,"prevHistories",[]);d(this,"prevPathname",null);d(this,"origin","");d(this,"_pending",{pathname:"/",search:"",type:"initialize"})}static parse(t){const{pathname:n,query:s,...i}=ju(t),o=Du.parse(s,{ignoreQueryPrefix:!0});return ar.prefix&&n.startsWith(ar.prefix)?{...i,query:o,pathname:n.replace(ar.prefix,"")}:{...i,query:o,pathname:n}}get state(){return{pathname:this.pathname,search:this._pending.search,params:this.params,query:this.query,location:this.location}}async prepare(t){const{pathname:n,href:s,search:i,origin:o}=t,a=n.replace(ar.prefix,"");this.setPathname(a),this.origin=o,this.location=t;const c=zy(s);this.query=c,this._pending={pathname:a,search:i,type:"initialize"}}start(){const{pathname:t}=this._pending;this.setPathname(t),this.histories=[{pathname:t}],this.emit(7,{...this._pending})}setPrevPathname(t){this.prevPathname=t}setPathname(t){this.pathname=t}pushState(t){const n=`${this.origin}${ar.prefix}${t}`,s=new URL(n),{pathname:i,search:o}=s,a=this.pathname;this.setPrevPathname(a),this.setPathname(i),this.histories.push({pathname:i}),this.emit(0,{from:a,to:i,path:i+o,pathname:i}),this.emit(10,[...this.histories])}async replaceState(t){const n=`${this.origin}${ar.prefix}${t}`,s=new URL(n),{pathname:i,search:o}=s;this.setPrevPathname(this.pathname),this.setPathname(i),this.histories[this.histories.length-1]={pathname:i},this.emit(1,{from:this.prevPathname,path:i+o,pathname:i}),this.emit(10,[...this.histories])}handlePopState({type:t,pathname:n,href:s}){if(console.log("[DOMAIN]navigator/index - handlePopState",t,this.pathname,this.prevHistories),t!=="popstate")return;const i=n,o=this.pathname;this.setPrevPathname(o),this.setPathname(i);const a=(()=>{if(this.prevHistories.length===0)return!1;const u=this.prevHistories[this.prevHistories.length-1];return(u==null?void 0:u.pathname)===i})();if(this._pending={pathname:n,search:"",type:(()=>a?"forward":"back")()},a){this.setPrevPathname(this.pathname),this.setPathname(i);const u=this.prevHistories.pop();u&&(this.histories=this.histories.concat([u])),this.emit(4),this.emit(10,[...this.histories]),this.emit(2,{type:"forward",pathname:n,href:s});return}this.emit(3);const c=this.histories[this.histories.length-1];this.prevHistories=this.prevHistories.concat([c]).filter(Boolean),this.setPrevPathname(this.pathname),this.setPathname(i),console.log("[DOMAIN]navigator - before pop",this.histories.map(u=>u.pathname));const l=this.histories.slice(0,this.histories.length-1);this.histories=l.filter(Boolean),this.emit(10,[...this.histories]),this.emit(2,{type:"back",pathname:n,href:s})}onStart(t){return this.on(6,t)}onHistoryChange(t){return this.on(10,t)}onPushState(t){return this.on(0,t)}onReplaceState(t){return this.on(1,t)}onPopState(t){return this.on(2,t)}onReload(t){return this.on(5,t)}onPathnameChange(t){return this.on(7,t)}onBack(t){return this.on(3,t)}onForward(t){return this.on(4,t)}onRelaunch(t){return this.on(8,t)}onHistoriesChange(t){return this.on(10,t)}};let Mr=ar;d(Mr,"prefix",null);function zy(e){const[,r]=e.split("?");return r?Du.parse(r):{}}class et extends $e{constructor(t={}){super(t);d(this,"name","PresenceCore");d(this,"debug",!1);d(this,"animationName","none");d(this,"mounted",!1);d(this,"enter",!1);d(this,"visible",!1);d(this,"exit",!1);const{mounted:n=!1,visible:s=!1}=t;this.mounted=n,this.visible=n,s&&(this.mounted=!0)}get state(){return{mounted:this.mounted,enter:this.enter,visible:this.visible,exit:this.exit,text:(()=>this.exit?"exit":this.enter?"enter":this.visible?"visible":"unknown")()}}toggle(t={}){if(this.visible){this.hide(t);return}this.show()}show(){this.mounted=!0,this.enter=!0,this.emit(0,{...this.state}),setTimeout(()=>{this.visible=!0,this.emit(2),this.emit(0,{...this.state})},120)}hide(t={}){console.log("[DOMAIN]ui/presence - hide",t);const{destroy:n=!0}=t;if(n===!1){this.exit=!0,setTimeout(()=>{this.enter=!1,this.visible=!1,this.exit=!1,this.emit(4),this.emit(0,{...this.state})},120);return}this.exit=!0,this.emit(0,{...this.state}),setTimeout(()=>{this.visible=!1,this.emit(4),this.emit(0,{...this.state}),this.unmount()},120)}unmount(){this.mounted=!1,this.enter=!1,this.visible=!1,this.exit=!1,this.emit(6),this.emit(0,{...this.state})}reset(){this.mounted=!1,this.enter=!1,this.visible=!1,this.exit=!1,this.emit(0,{...this.state})}onTmpShow(t){return this.on(3,t)}onTmpHidden(t){return this.on(5,t)}onShow(t){return this.on(2,t)}onHidden(t){return this.on(4,t)}onUnmounted(t){return this.on(6,t)}onStateChange(t){return this.on(0,t)}onPresentChange(t){return this.on(1,t)}get[Symbol.toStringTag](){return"Presence"}}function Bl(e,r,t){const n=(()=>!t||Object.keys(t).length===0?"":"?"+Ar(t))();return(()=>!e.match(/:[a-z]{1,}/)||!r||Object.keys(r).length===0?e+n:e.replace(/:([a-z]{1,})/g,(...i)=>{const[,o]=i;return String(r[o]||"")})+n)()}function qu(e,r=null){return Object.keys(e).map(n=>{const s=e[n],{title:i,pathname:o,options:a,children:c}=s,l=r?[r.name,n].filter(Boolean).join("."):n;if(c){const u=qu(c,{name:l,pathname:o});return[{title:i,name:l,pathname:o,options:a,layout:!0,parent:r?{name:r.name}:null},...u]}return[{title:i,name:l,pathname:o,options:a,parent:r?{name:r.name}:null}]}).reduce((n,s)=>n.concat(s),[])}function Hy(e){const r=qu(e),t=r.map(s=>({[s.name]:s})).reduce((s,i)=>({...s,...i}),{}),n=r.map(s=>({[s.pathname]:s})).reduce((s,i)=>({...s,...i}),{});return{routes:t,routesWithPathname:n}}class jr extends $e{constructor(t){super(t);d(this,"unique_id","ViewCore");d(this,"debug",!1);d(this,"id",this.uid());d(this,"name");d(this,"pathname");d(this,"title");d(this,"animation",{});d(this,"query",{});d(this,"params",{});d(this,"_showed",!1);d(this,"loaded",!1);d(this,"mounted",!0);d(this,"layered",!1);d(this,"isRoot",!1);d(this,"parent");d(this,"curView",null);d(this,"subViews",[]);d(this,"$presence",new et);const{name:n,pathname:s,title:i,query:o={},visible:a=!1,animation:c={},parent:l=null,views:u=[]}=t;this.name=n,this.pathname=s,this.parent=l,this.title=i,this.unique_id=i,this.animation=c,this.subViews=u,u.length&&(this.curView=u[0]),this.query=o,a&&(this.mounted=!0);for(let h=0;h<u.length;h+=1){const f=u[h];f.parent=this}this.$presence.onStateChange(h=>{const{visible:f,mounted:p}=h,g=this.state.visible;g===!1&&f&&this.setShow(),g&&f===!1&&this.setHidden(),this.mounted=!!p,this.emit(13,{...this.state})})}get state(){return{mounted:this.mounted,visible:this.visible,layered:this.layered}}get href(){return[this.pathname,Ar(this.query)].filter(Boolean).join("?")}get visible(){return this.$presence.visible}appendView(t){t.parent=this,this.subViews.length===0&&t.visible&&(this.curView=t),this.subViews.includes(t)||this.subViews.push(t),console.log("[DOMAIN]route_view - appendView",this.title,this.subViews,t),this.emit(0,[...this.subViews])}replaceViews(t){this.subViews=t,this.emit(0,[...this.subViews])}removeView(t,n={}){const{reason:s,destroy:i,callback:o}=n;console.log("[DOMAIN]route_view - removeView",this.title,t.title),this.subViews.includes(t)&&(t.onUnmounted(()=>{console.log("[DOMAIN]route_view - removeView.onUnmounted",this.title,t.title),t.destroy(),this.subViews=this.subViews.filter(a=>a!==t),o&&o(),console.log("[DOMAIN]route_view - removeView before Events.ViewsChange",this.title,t.title),this.emit(0,[...this.subViews])}),t.hide({reason:s,destroy:i}),this.emit(0,[...this.subViews]))}findCurView(){return this.curView?this.curView.findCurView():this}ready(){this.emit(3)}showView(t,n={}){var s;if(console.log("[DOMAIN]route_view - showSubView",this.title,t.title,(s=this.curView)==null?void 0:s.title),t===this){console.warn("cannot show self");return}if(t.visible){console.warn("the sub view has been visible");return}(()=>{if(!this.visible){if(!this.parent){this.isRoot||console.warn("no parent");return}this.parent.showView(this,n)}})(),this.curView&&this.curView.hide(n),this.appendView(t),this.emit(5),this.curView=t,t.show(),this.emit(1,this.curView)}show(){if(this.visible){this.$presence.state.mounted=!0;return}this.$presence.show()}hide(t={}){if(console.log("[DOMAIN]route_view - hide",this.title,t),this.visible===!1){console.warn("has been un visible");return}for(let n=0;n<this.subViews.length;n+=1)this.subViews[n].hide(t);this.emit(7),this.$presence.hide(t)}setShow(){console.log("[DOMAIN]route_view/index - showed",this.title,this._showed),!this._showed&&(this._showed=!0,this.emit(6))}setHidden(){console.log("[DOMAIN]route_view/index - hidden",this.title,this._showed),this._showed=!1,this.emit(8)}mount(){this.setMounted()}unmount(){}setMounted(){this.mounted||(this.mounted=!0,this.emit(4))}setUnmounted(){this.mounted=!1,this.emit(9)}setLoaded(){this.loaded=!0}setUnload(){this.loaded=!1}buildUrl(t){return Bl(this.pathname,this.params,t)}buildUrlWithPrefix(t){const n=Bl(this.pathname,this.params,t);return[Mr.prefix,n].join("")}onStart(t){return this.on(12,t)}onReady(t){return this.on(3,t)}onMounted(t){return this.on(4,t)}onViewShow(t){return this.on(2,t)}onBeforeShow(t){return this.on(5,t)}onShow(t){return this.on(6,t)}onBeforeHide(t){return this.on(7,t)}onHidden(t){return this.on(8,t)}onLayered(t){return this.on(10,t)}onUncover(t){return this.on(11,t)}onUnmounted(t){return this.on(9,t)}onSubViewsChange(t){return this.on(0,t)}onCurViewChange(t){return this.on(1,t)}onMatched(t){return this.on(14,t)}onNotFound(t){return this.on(15,t)}onStateChange(t){return this.on(13,t)}}class Uy extends $e{constructor(t){super(t);d(this,"virtual",!1);d(this,"routes");d(this,"views");d(this,"stacks",[]);d(this,"cursor",-1);d(this,"extra_query",{});d(this,"$router");d(this,"$view");const{virtual:n=!1,view:s,router:i,routes:o,views:a}=t;this.$view=s,this.$router=i,this.routes=o,this.views=a,this.virtual=n}get state(){return{href:this.$router.href,stacks:this.stacks.map(t=>{const{id:n,pathname:s,title:i,query:o,visible:a}=t;return{id:[s,Ar(o)].filter(Boolean).join("?"),key:s,title:i,query:JSON.stringify(o,null,2),visible:a}}),cursor:this.cursor}}push(t,n={},s={}){var f;console.log("[DOMAIN]history/index - push ",t,n);const{ignore:i}=s;if(this.isLayout(t)){console.log("[DOMAIN]history/index - the target url is layout",t);return}const o=this.routes[t];if(!o){console.log("[DOMAIN]history/index - push 2. no matched route",t);return}const a={...n,...this.extra_query},c=[o.pathname,Ar(a)].filter(Boolean).join("?");if(c===this.$router.href)return;const l=this.views[c];if(l){if(this.ensureParent(l),l.query=a,!l.parent){console.log("[DOMAIN]history/index - error1");return}this.$router.href=l.href,this.$router.name=l.name,this.stacks=this.stacks.slice(0,this.cursor+1).concat(l),this.cursor+=1,l.parent.showView(l,{reason:"show_sibling",destroy:!1}),this.emit(1,{reason:"push",view:l,name:t,href:l.href,pathname:l.pathname,query:l.query,ignore:i}),this.emit(5,{...this.state});return}const u=(()=>{const p=this.routes[t];return p||null})();if(!u)return console.log("[DOMAIN]history/index - push 2. no matched route",c),null;const h=new jr({name:u.name,pathname:u.pathname,title:u.title,query:a,animation:(f=u.options)==null?void 0:f.animation,parent:null});if(this.views[c]=h,this.ensureParent(h),!h.parent){console.log("[DOMAIN]history/index - push 3. ",u.name);return}this.$router.href=h.href,this.$router.name=h.name,this.stacks=this.stacks.slice(0,this.cursor+1).concat(h),this.cursor+=1,h.parent.showView(h,{reason:"show_sibling",destroy:!1}),this.emit(1,{reason:"push",view:h,name:t,href:h.href,pathname:h.pathname,query:h.query,ignore:i}),this.emit(5,{...this.state})}replace(t,n={}){var u,h,f;const s={...n,...this.extra_query},i=[t,Ar(s)].filter(Boolean).join("?");if(i===this.$router.href){console.log("[DOMAIN]history/index - replace target url is",i,"and cur href is",this.$router.href);return}const o=this.views[i];if(o){if(this.ensureParent(o),o.query=s,!o.parent){console.log("[DOMAIN]history/index - replace 1");return}this.$router.href=o.href,this.$router.name=o.name;const p=this.stacks[this.stacks.length-1];p&&((u=p.parent)==null||u.removeView(p)),this.stacks[this.stacks.length-1]=o,o.parent.showView(o),this.emit(1,{reason:"replace",view:o,name:o.name,href:o.href,pathname:o.pathname,query:o.query}),this.emit(5,{...this.state});return}const a=(()=>{const p=this.routes[t];return p||null})();if(!a)return console.log("[DOMAIN]history/index - replace 2. no matched route"),null;const c=new jr({name:a.name,pathname:a.pathname,title:a.title,query:s,animation:(h=a.options)==null?void 0:h.animation,parent:null});if(this.views[i]=c,this.ensureParent(c),!c.parent){console.log("[DOMAIN]history/index - replace 3. ");return}this.$router.href=c.href,this.$router.name=c.name;const l=this.stacks[this.stacks.length-1];l&&((f=l.parent)==null||f.removeView(l,{reason:"show_sibling",callback:()=>{delete this.views[i]}})),this.stacks[this.stacks.length-1]=c,c.parent.showView(c),this.emit(1,{reason:"replace",view:c,name:c.name,href:c.href,pathname:c.pathname,query:c.query}),this.emit(5,{...this.state})}realBack(){var o;const t=this.cursor-1,n=this.stacks[t];if(!n)return;const s=n.href;if(!n.parent)return;this.$router.href=s,this.$router.name=n.name,this.cursor=t;const i=this.stacks.slice(t+1);for(let a=0;a<i.length;a+=1){const c=i[a];(o=c.parent)==null||o.removeView(c,{reason:"back",destroy:!0,callback:()=>{delete this.views[c.href]}})}n.parent.showView(n,{reason:"back",destroy:!0}),this.emit(1,{reason:"back",view:n,name:n.name,href:n.href,pathname:n.pathname,query:n.query}),this.emit(3),this.emit(5,{...this.state})}back(){console.log("请实现 back 方法")}forward(){var o;const t=this.cursor+1,n=this.stacks[t];if(!n||!n.parent)return;const s=n.href;this.$router.href=s,this.$router.name=n.name,this.cursor=t;const i=this.stacks.slice(t+1);for(let a=0;a<i.length;a+=1){const c=i[a];(o=c.parent)==null||o.removeView(c,{reason:"forward",callback:()=>{delete this.views[c.href]}})}n.parent.showView(n),this.emit(1,{reason:"forward",view:n,name:n.name,href:n.href,pathname:n.pathname,query:n.query}),this.emit(4),this.emit(5,{...this.state})}reload(){console.log("请实现 reload 方法")}clear(){var t;this.$router.histories=[],this.$router.prevHistories=[],(t=this.$view.curView)==null||t.hide(),this.$view.subViews=[],this.$view.curView=null}ensureParent(t){const{name:n}=t;if(t.parent){if(t.parent.pathname==="/")return;this.ensureParent(t.parent);return}const s=this.routes[n];if(!s)return;const{parent:i}=s;if(this.views[i.name]){if(t.parent=this.views[i.name],i.name==="root")return;this.ensureParent(this.views[i.name]);return}const o=this.routes[i.name];if(!o)return null;const a=new jr({name:o.name,pathname:o.pathname,title:o.title,parent:null});this.views[o.name]=a,t.parent=a,this.ensureParent(a)}buildURL(t,n={}){const s=(()=>{const o=this.routes[t];return o||null})();return s?new jr({name:s.name,pathname:s.pathname,title:s.title,query:n,parent:null}).buildUrl(n):(console.log("[DOMAIN]history/index - push 2. no matched route",t),this.routes["root.notfound"].pathname)}buildURLWithPrefix(t,n={}){const s=(()=>{const o=this.routes[t];return o||null})();return s?new jr({name:s.name,pathname:s.pathname,title:s.title,query:n,parent:null}).buildUrlWithPrefix(n):(console.log("[DOMAIN]history/index - push 2. no matched route",t),this.routes["root.notfound"].pathname)}isLayout(t){const n=this.routes[t];return n?n.layout:null}handleClickLink(t){const{href:n,target:s}=t;this.emit(2,{href:n,target:s})}onTopViewChange(t){return this.on(0,t)}onRouteChange(t){return this.on(1,t)}onBack(t){return this.on(3,t)}onForward(t){return this.on(4,t)}onClickLink(t){return this.on(2,t)}onStateChange(t){return this.on(5,t)}}function jy(e){const r=globalThis.document;e.getComputedStyle=y=>window.getComputedStyle(y),e.setTitle=y=>{document.title=y},e.copy=y=>{const S=document.createElement("textarea");S.value=y,document.body.appendChild(S),S.select(),document.execCommand("copy"),document.body.removeChild(S)},window.addEventListener("DOMContentLoaded",()=>{const{innerWidth:y,innerHeight:S}=window;e.setSize({width:y,height:S})}),window.addEventListener("orientationchange",function(){e.handleScreenOrientationChange(window.orientation)}),window.addEventListener("load",()=>{}),window.addEventListener("beforeunload",y=>{}),window.addEventListener("resize",()=>{}),window.addEventListener("blur",()=>{e.emit(e.Events.Blur)}),document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="hidden"){e.emit(e.Events.Hidden);return}e.emit(e.Events.Show)});const t=navigator.userAgent,n=t.toLowerCase(),s=/iPad|iPhone|iPod/.test(t),i=/Android/.test(t);e.setEnv({wechat:n.indexOf("micromessenger")!==-1,ios:s,android:i});const o=window.matchMedia(yl);let a="light";const c=y=>{console.log("[Domain]app/connect - handleMediaQuery"),y||(y=window.matchMedia(yl));const x=y.matches?"dark":"light";return a=x,e.theme=x,b.Ok(x)};o.addListener(c);let l="data-theme";const u="system",h=["light","dark"];e.applyTheme=y=>{const S=document.documentElement,x=a;x?S.setAttribute(l,x):S.removeAttribute(l);const P=h.includes(u)?u:null,J=h.includes(a)?a:P;return S.style.colorScheme=J,b.Ok(null)},e.getSystemTheme=c,e.setTheme=y=>{e.theme=y,e.emit(e.Events.StateChange,{...e.state}),e.$storage.set("theme",y)};const{availHeight:f,availWidth:p}=window.screen;if(window.navigator.userAgent.match(/iphone/i)){const y=["375-812","414-896","428-926","390-844","393-852","430-932"].includes(`${p}-${f}`);e.safeArea=!!y}r.addEventListener("keydown",y=>{const{key:S}=y;e.keydown({key:S})});const g=r.body.style.pointerEvents;e.disablePointer=()=>{r.body.style.pointerEvents="none"},e.enablePointer=()=>{r.body.style.pointerEvents=g}}const qy=globalThis.document;function Vy(e){e.reload=()=>{window.location.reload()},e.back=()=>{window.history.back()},e.$router.onPopState(r=>{const{type:t,pathname:n,href:s}=r;if(console.log("[ROOT]index - app.onPopState",t,n,s),t==="back"){e.realBack();return}if(t==="forward"){e.forward();return}}),e.$router.onPushState(({from:r,to:t,path:n,pathname:s})=>{console.log("[ROOT]index - before history.pushState",r,t,n,s),window.history.pushState({from:r,to:t},"",n)}),e.$router.onReplaceState(({from:r,path:t,pathname:n})=>{console.log("[ROOT]index - before history.replaceState",r,t,n),window.history.replaceState({from:r},"",t)}),qy.addEventListener("click",r=>{let t=r.target;if(t instanceof Document||t===null)return;let n=!1;for(;t;){const o=t;if(o.tagName==="A"){n=!0;break}t=o.parentNode}if(!n)return;const s=t,i=s.getAttribute("href");console.log("[DOMAIN]history/connect.web - link a",i),i&&i.startsWith("/")&&(i.startsWith("http")||s.getAttribute("target")!=="_blank"&&(r.preventDefault(),e.handleClickLink({href:i,target:null})))}),window.addEventListener("popstate",r=>{var i,o,a;console.log("[DOMAIN]history/connect - window.addEventListener('popstate'",(i=r.state)==null?void 0:i.from,(o=r.state)==null?void 0:o.to);const{type:t}=r,{pathname:n,href:s}=window.location;e.$router.handlePopState({type:t,href:s,pathname:(a=r.state)==null?void 0:a.to})})}let po=null;function Wy(e){po=e}class Zt extends $e{constructor(t){super(t);d(this,"os",{android:!0,ios:!1,pc:!1,wechat:!1});d(this,"rect",{width:0,height:0,scrollTop:0,contentHeight:0});d(this,"canPullToRefresh");d(this,"canReachBottom",!0);d(this,"needHideIndicator",!1);d(this,"scrollable",!0);d(this,"pullToRefresh",{step:"pending",pullStartX:0,pullStartY:0,pullMoveX:0,pullMoveY:0,distX:0,distY:0,distResisted:0});d(this,"threshold",120);d(this,"options");d(this,"pullToRefreshOptions");d(this,"isPullToRefreshing",!1);d(this,"isLoadingMore",!1);d(this,"startPoint",{x:0,y:0});d(this,"lastPoint",{x:0,y:0});d(this,"downHight",0);d(this,"upHight",0);d(this,"maxTouchMoveInstanceY",0);d(this,"inTouchEnd",!1);d(this,"inTopWhenPointDown",!1);d(this,"inBottomWhenPointDown",!1);d(this,"isMoveDown",!1);d(this,"isMoveUp",!1);d(this,"isScrollTo",!1);d(this,"movetype","pending");d(this,"preScrollY",0);d(this,"isUpAutoLoad",!1);d(this,"startPullToRefresh",()=>{this.isPullToRefreshing||(this.isPullToRefreshing=!0,this.downHight=this.pullToRefreshOptions.offset,this.setIndicatorHeightTransition(!0),this.changeIndicatorHeight(this.downHight),this.emit(3))});d(this,"finishPullToRefresh",()=>{this.isPullToRefreshing&&(this.downHight=0,this.changeIndicatorHeight(0),this.isPullToRefreshing=!1,this.emit(4))});d(this,"disablePullToRefresh",()=>{this.pullToRefreshOptions.isLock=!0});d(this,"enablePullToRefresh",()=>{this.pullToRefreshOptions.isLock=!1});d(this,"handleMouseDown",t=>{this.handlePointDown(t)});d(this,"handleMouseMove",t=>{this.handlePointMove(t)});d(this,"handleTouchStart",t=>{this.handlePointDown(t)});d(this,"handleTouchMove",t=>{this.handlePointMove(t)});d(this,"handlePointDown",t=>{this.isScrollTo&&Tn(t);const n=dl(t);if(n.x<30){Tn(t);return}this.startPoint=n,this.lastPoint=this.startPoint,this.maxTouchMoveInstanceY=this.getBodyHeight()-this.pullToRefreshOptions.bottomOffset,this.inTouchEnd=!1;const s=this.getScrollTop();this.inTopWhenPointDown=s===0});d(this,"handlePointMove",t=>{if(!this.startPoint)return;const n=this.getScrollTop();n>0&&(this.inTopWhenPointDown=!1);const s=dl(t),i=s.y-this.startPoint.y;if(console.log("[DOMAIN]ScrollView - handlePointMove",n,i),i>0&&n<=0&&(Tn(t),this.canPullToRefresh&&!this.inTouchEnd&&!this.isPullToRefreshing)){if(!this.inTopWhenPointDown)return;const o=hm(this.lastPoint,s);if(o&&o<this.pullToRefreshOptions.minAngle)return;if(this.maxTouchMoveInstanceY>0&&s.y>=this.maxTouchMoveInstanceY){this.inTouchEnd=!0,this.handleTouchEnd();return}this.downHight<this.pullToRefreshOptions.offset?this.movetype!=="pulling"&&(this.movetype==="pending"&&(this.setIndicatorHeightTransition(!1),this.os.ios&&!this.inTopWhenPointDown&&this.optimizeScroll(!0)),this.movetype,this.movetype="pulling",this.emit(0),this.isMoveDown=!0):this.movetype!=="releasing"&&(this.movetype="releasing",this.emit(1),this.isMoveDown=!0),this.downHight=um(s.y-this.startPoint.y,1e3),this.changeIndicatorHeight(this.downHight),this.emit(2,{instance:this.downHight})}if(i<0){const o=this.getScrollHeight(),a=this.getScrollClientHeight();o-a-n<=0&&Tn(t)}this.lastPoint=s});d(this,"handleTouchEnd",()=>{this.canPullToRefresh&&this.isMoveDown&&(this.downHight>=this.pullToRefreshOptions.offset?this.startPullToRefresh():(this.downHight=0,this.setIndicatorHeightTransition(!0),this.changeIndicatorHeight(0)),this.optimizeScroll(!1),this.movetype="pending",this.isMoveDown=!1)});d(this,"handleScrolling",()=>{const t=this.getScrollTop(),n=t-this.preScrollY>0;this.isLoadingMore||this.getScrollHeight()-this.getScrollClientHeight()-t<=this.threshold&&n&&(this.isLoadingMore=!0,this.emit(8)),this.emit(7,{scrollTop:t})});d(this,"setBounce",t=>{console.log("请在 connect 中实现 setBounce 方法")});d(this,"hideIndicator",()=>{console.log("请在 connect 中实现 hideIndicator 方法")});d(this,"scrollTo",(t,n=300)=>{console.log("请在 connect 中实现 scrollTo 方法")});d(this,"destroy",()=>{console.error("请在 connect 中实现 destroy 方法")});const{os:n,offset:s=80,onScroll:i,onReachBottom:o,onPullToRefresh:a,onPullToBack:c}=t;this.options=t,n&&(this.os=n),this.pullToRefreshOptions={isLock:!1,offset:s,bottomOffset:20,minAngle:45},this.canPullToRefresh=!!a,this.canPullToRefresh||(this.needHideIndicator=!0),this.needHideIndicator&&(this.pullToRefreshOptions.offset=9999),i&&this.onScroll(i),o&&this.onReachBottom(o),a&&this.onPullToRefresh(a),po&&po(this)}get state(){return{top:0,left:0,step:this.movetype,scrollTop:this.downHight,pullToRefresh:this.canPullToRefresh,scrollable:this.scrollable}}setReady(){this.emit(9)}setRect(t){this.rect={...this.rect,...t}}finishLoadingMore(){this.isLoadingMore=!1}setMounted(){this.emit(9)}refreshRect(){console.log("请在 connect 中实现 refreshRect 方法")}changeIndicatorHeight(t){console.log("请在 connect 中实现 changeDownIndicatorHeight 方法")}setIndicatorHeightTransition(t){console.log("请在 connect 中实现 addDownIndicatorHeightTransition 方法")}optimizeScroll(t){console.log("请在 connect 中实现 optimizeScroll 方法")}getToBottom(){return this.getScrollHeight()-this.getScrollClientHeight()-this.getScrollTop()}getOffsetTop(t){return console.log("请在 connect 中实现 getScrollHeight 方法"),0}getScrollHeight(){return console.log("请在 connect 中实现 getScrollHeight 方法"),0}getScrollClientHeight(){return console.log("请在 connect 中实现 getClientHeight 方法"),0}getScrollTop(){return console.log("请在 connect 中实现 getScrollTop 方法"),0}setScrollTop(t){console.log("请在 connect 中实现 setScrollTop 方法")}getBodyHeight(){return console.log("请在 connect 中实现 getBodyHeight 方法"),0}inDownOffset(t){return this.on(0,t)}outDownOffset(t){return this.on(1,t)}onPulling(t){return this.on(2,t)}onScroll(t){return this.on(7,t)}onReachBottom(t){return this.on(8,t)}onPullToRefresh(t){return this.canPullToRefresh=!0,this.on(3,t)}onMounted(t){return this.on(9,t)}}class Vn extends $e{constructor(t={}){super(t);d(this,"value",null);const{value:n,onChange:s}=t;n&&(this.value=n),s&&this.onStateChange(s)}get state(){return this.value}select(t){this.value=t,this.emit(0,this.value)}isEmpty(){return this.value===null}clear(){this.value=null,this.emit(0)}onStateChange(t){return this.on(0,t)}}class Wn extends $e{constructor(t={}){super(t);d(this,"id",this.uid());d(this,"cur");d(this,"state",{loading:!1,disabled:!1});this.cur=new Vn;const{onClick:n}=t;n&&this.onClick(()=>{n(this.cur.value)})}click(){this.state.loading||this.state.disabled||this.emit(0)}disable(){this.state.disabled=!0,this.emit(1,{...this.state})}enable(){this.state.disabled=!1,this.emit(1,{...this.state})}bind(t){return this.cur.select(t),this}setLoading(t){this.state.loading!==t&&(this.state.loading=t,this.emit(1,{...this.state}))}onClick(t){this.on(0,t)}onStateChange(t){this.on(1,t)}}class Gy extends $e{constructor(t={}){super(t);d(this,"unique_id","PopperCore");d(this,"debug",!0);d(this,"placement","bottom");d(this,"strategy","absolute");d(this,"middleware",[]);d(this,"reference",null);d(this,"floating",null);d(this,"arrow",null);d(this,"state",{strategy:"absolute",x:0,y:0,isPlaced:!1,placedSide:"bottom",placedAlign:"center",reference:!1});d(this,"_enter",!1);d(this,"_focus",!1);const{_name:n,side:s="bottom",align:i="center",strategy:o="fixed",middleware:a=[]}=t;n&&(this.unique_id=n),this.strategy=o,this.placement=s+(i!=="center"?"-"+i:"")}setReference(t){console.log("[DOMAIN/ui]popper/index - setReference",this.reference,t,this.unique_id),this.reference===null&&(this.reference=t,this.state.reference=!0,this.emit(0,t),this.emit(5,{...this.state}))}updateReference(t){this.reference!==null&&(this.reference=t)}removeReference(){this.reference!==null&&(this.reference=null)}setFloating(t){this.floating=t,this.emit(1,t)}setArrow(t){this.arrow=t}setConfig(t){}checkIsClickAnchor(t){return console.log("请实现 checkIsClickAnchor 方法"),!1}async place(){var c;if(console.log("[DOMAIN/ui]popper/index - place",(c=this.reference)==null?void 0:c.getRect(),this.floating),this.middleware=[],this.reference===null||this.floating===null)return;const t=await this.computePosition(),{x:n,y:s,middlewareData:i}=t,[o,a]=Ky(this.placement);this.state={x:n,y:s,strategy:this.strategy,isPlaced:!0,placedSide:o,placedAlign:a,reference:!0},console.log(...this.log("[DOMAIN]ui/popper - place - before emit placed",{x:n,y:s})),this.emit(5,{...this.state})}async computePosition(){const{placement:n,strategy:s}=this;let i=n;const o=this.reference.getRect(),a=this.floating.getRect(),c={reference:o,floating:a};let{x:l,y:u}=this.computeCoordsFromPlacement(c,n,!0),h={};for(let f=0;f<this.middleware.length;f++){const{name:p,fn:g}=this.middleware[f],{x:y,y:S,data:x,reset:P}=await g({x:l,y:u,initialPlacement:n,placement:i,strategy:s,middlewareData:h,rects:c,elements:{reference:o,floating:a}});l=y??l,u=S??u,h={...h,[p]:{...h[p],...x}}}return{x:l,y:u,placement:i,strategy:s,middlewareData:h}}computeCoordsFromPlacement({reference:t,floating:n},s,i){console.log("computeCoordsFromPlacement",t,n);const o=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,c=Yy(s),l=Jy(c),u=t[l]/2-n[l]/2,h=Vu(s),f=c==="x";let p;switch(h){case"top":p={x:o,y:t.y-n.height};break;case"bottom":p={x:o,y:t.y+t.height};break;case"right":p={x:t.x+t.width,y:a};break;case"left":p={x:t.x-n.width,y:a};break;default:p={x:t.x,y:t.y}}switch(Xy(s)){case"start":p[c]-=u*(i&&f?-1:1);break;case"end":p[c]+=u*(i&&f?-1:1);break}return p}enter(){this._enter!==!0&&(this._enter=!0,this.emit(3))}leave(){this._enter!==!1&&(this._enter=!1,this.emit(4))}reset(){this._enter=!1,this._focus=!1}onReferenceMounted(t){return this.on(0,t)}onFloatingMounted(t){return this.on(1,t)}onEnter(t){this.on(3,t)}onLeave(t){this.on(4,t)}onPlaced(t){this.on(2,t)}onStateChange(t){return this.on(5,t)}get[Symbol.toStringTag](){return"PopperCore"}}function Ky(e){const[r,t="center"]=e.split("-");return[r,t]}function Vu(e){return e.split("-")[0]}function Yy(e){return["top","bottom"].includes(Vu(e))?"x":"y"}function Jy(e){return e==="y"?"height":"width"}function Xy(e){return e.split("-")[1]}class Qy extends $e{constructor(t={}){super(t);d(this,"unique_id","DismissableLayerCore");d(this,"layers",new Set);d(this,"layersWithOutsidePointerEventsDisabled",new Set);d(this,"branches",new Set);d(this,"isPointerInside",!1);d(this,"state",{})}handlePointerOutside(t){}pointerDown(){this.isPointerInside=!0}handlePointerDownOnTop(t){if(console.log(...this.log("handlePointerDownOnTop")),this.isPointerInside===!0){this.isPointerInside=!1;return}this.emit(2),this.emit(3),this.emit(0)}onDismiss(t){return this.on(0,t)}}class In extends $e{constructor(t={}){super(t);d(this,"open",!1);d(this,"title","");d(this,"footer",!0);d(this,"present",new et);d(this,"okBtn",new Wn);d(this,"cancelBtn",new Wn);const{title:n,footer:s=!0,onOk:i,onCancel:o,onUnmounted:a}=t;n&&(this.title=n),this.footer=s,i&&this.onOk(i),o&&this.onCancel(o),a&&this.onUnmounted(a),this.present.onShow(async()=>{this.open=!0,this.emit(5,!0),this.emit(10,{...this.state})}),this.present.onHidden(async()=>{this.open=!1,this.emit(6),this.emit(5,!1),this.emit(10,{...this.state})}),this.present.onUnmounted(()=>{this.emit(4)}),this.okBtn.onClick(()=>{this.ok()}),this.cancelBtn.onClick(()=>{this.hide()})}get state(){return{open:this.open,title:this.title,footer:this.footer}}show(){this.open||this.present.show()}hide(){this.open!==!1&&this.present.hide()}ok(){this.emit(7)}cancel(){this.emit(6)}setTitle(t){this.title=t,this.emit(10,{...this.state})}onShow(t){return this.on(1,t)}onHidden(t){return this.on(3,t)}onUnmounted(t){return this.on(4,t)}onVisibleChange(t){return this.on(5,t)}onOk(t){return this.on(7,t)}onCancel(t){return this.on(6,t)}onStateChange(t){return this.on(10,t)}get[Symbol.toStringTag](){return"Dialog"}}var En=(e=>(e[e.Pending=0]="Pending",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded",e[e.Failed=3]="Failed",e))(En||{});let zl="";class Qn extends $e{constructor(t){super();d(this,"unique_uid");d(this,"src");d(this,"width");d(this,"height");d(this,"scale",null);d(this,"fit");d(this,"step",0);d(this,"realSrc");const{unique_id:n,width:s=200,height:i=200,src:o,scale:a,fit:c="cover"}=t;this.width=s,this.height=i,this.src="",this.fit=c,this.realSrc=o,a&&(this.scale=a),n&&(this.unique_uid=n)}static url(t){return t?t.includes("http")?t:zl+t:""}static setPrefix(t){zl=t}get state(){return{src:this.src,step:this.step,width:this.width,height:this.height,scale:this.scale}}updateSrc(t){this.realSrc=t,this.handleShow()}handleShow(){if(!this.realSrc){this.step=3,this.emit(0,{...this.state});return}this.step=1,this.src=Qn.url(this.realSrc),this.emit(0,{...this.state})}handleLoaded(){this.step=2,this.emit(2),this.emit(0,{...this.state})}handleError(){this.step=3,this.emit(0,{...this.state}),this.emit(3)}onStateChange(t){return this.on(0,t)}onStartLoad(t){return this.on(1,t)}onLoad(t){return this.on(2,t)}onError(t){return this.on(3,t)}}class mr extends $e{constructor(t={}){super(t);d(this,"btns",[]);d(this,"cur",null);d(this,"scale",null);const{scale:n}=t;n&&(this.scale=n)}bind(t){const n=this.btns.find(i=>i.unique_uid===t);if(n)return n;const s=new Qn({src:t,scale:this.scale||void 0});return this.btns.push(s),s}select(t){const n=this.btns.find(s=>s.unique_uid===t);n&&(this.cur=n)}clear(){this.cur=null}onStateChange(t){this.on(0,t)}}class Us extends $e{constructor(t={}){super(t);d(this,"_defaultValue","");d(this,"value","");d(this,"placeholder");d(this,"disabled");d(this,"allowClear",!0);d(this,"autoComplete",!1);d(this,"autoFocus",!1);d(this,"type");d(this,"loading",!1);d(this,"valueUsed","");const{_name:n,defaultValue:s,placeholder:i="请输入",type:o="string",disabled:a=!1,autoFocus:c=!1,autoComplete:l=!1,onChange:u,onBlur:h,onEnter:f,onClear:p,onMounted:g}=t;n&&(this.unique_id=n),this.placeholder=i,this.type=o,this.disabled=a,this.autoComplete=l,s&&(this._defaultValue=s),s&&(this.value=s),u&&this.onChange(u),f&&this.onEnter(()=>{f(this.value)}),h&&this.onBlur(h),p&&this.onClear(p),g&&this.onMounted(g)}get state(){return{value:this.value,placeholder:this.placeholder,disabled:this.disabled,loading:this.loading,type:this.type,autoComplete:this.autoComplete,autoFocus:this.autoFocus,allowClear:this.allowClear}}setMounted(){this.emit(2)}handleEnter(){this.valueUsed=this.value,this.emit(5,this.value)}handleBlur(){this.value!==this.valueUsed&&(this.valueUsed=this.value,this.emit(4,this.value))}setLoading(t){this.loading=t,this.emit(1,{...this.state})}focus(){console.log("请在 connect 中实现该方法")}change(t){this.value=t,this.emit(0,t),this.emit(1,{...this.state})}handleChange(t){if(console.log("[DOMAIN]ui/input - handleChange",t),this.type==="file"){const{target:i}=t,{files:o}=i;this.setValue(o);return}const{target:n}=t,{value:s}=n;this.setValue(s)}setValue(t){this.value=t,this.type==="number"&&(this.value=Number(t)),this.emit(0,t),this.emit(1,{...this.state})}enable(){this.disabled=!0,this.emit(1,{...this.state})}disable(){this.disabled=!1,this.emit(1,{...this.state})}clear(){console.log("[COMPONENT]ui/input/index - clear",this._defaultValue),this.value=this._defaultValue,this.emit(6),this.emit(1,{...this.state})}reset(){this.value=this._defaultValue,this.emit(1,{...this.state})}enter(){this.emit(5)}onChange(t){return this.on(0,t)}onStateChange(t){return this.on(1,t)}onMounted(t){return this.on(2,t)}onFocus(t){return this.on(3,t)}onBlur(t){return this.on(4,t)}onEnter(t){return this.on(5,t)}onClear(t){return this.on(6,t)}}class Zy extends $e{constructor(t={}){super(t);d(this,"id",this.uid());d(this,"cur");d(this,"longPressTimer",null);d(this,"state",{loading:!1,disabled:!1});d(this,"handleMouseDown",()=>{console.log("[DOMAIN]ui/node/index - handleMouseDown"),this.longPressTimer=setTimeout(()=>{console.log("[DOMAIN]ui/node/index - bingo",this),this.emit(2)},1e3)});this.cur=new Vn;const{onClick:n,onLongPress:s}=t;n&&this.onClick(()=>{n(this.cur.value)}),s&&this.onLongPress(()=>{s(this.cur.value)})}clearLongPressTimer(){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null)}handleMouseUp(){console.log("[DOMAIN]ui/node/index - handleMouseUp"),this.clearLongPressTimer()}handleMouseOut(){console.log("[DOMAIN]ui/node/index - handleMouseOut"),this.clearLongPressTimer()}handleClick(){this.click()}click(){this.state.loading||this.state.disabled||this.emit(0)}disable(){this.state.disabled=!0,this.emit(3,{...this.state})}enable(){this.state.disabled=!1,this.emit(3,{...this.state})}bind(t){return this.cur.select(t),this}setLoading(t){this.state.loading!==t&&(this.state.loading=t,this.emit(3,{...this.state}))}onClick(t){return this.on(0,t)}onLongPress(t){return this.on(2,t)}onStateChange(t){return this.on(3,t)}}class e1 extends $e{constructor(t={}){super(t);d(this,"btns",[]);d(this,"cur",null);const{onClick:n,onLongPress:s}=t;n&&this.onClick(n),s&&this.onLongPress(s)}bind(t){const n=this.btns.find(i=>i.cur.value===t);if(n)return n;const s=new Zy({onClick:i=>{this.cur=s,this.emit(0,i)},onLongPress:i=>{this.cur=s,this.emit(2,i)}});return s.bind(t),this.btns.push(s),s}clear(){this.cur=null}setLoading(t){if(this.cur===null){for(let n=0;n<this.btns.length;n+=1)this.btns[n].setLoading(t);return}this.cur.setLoading(t)}onClick(t){return this.on(0,t)}onLongPress(t){return this.on(2,t)}onStateChange(t){return this.on(3,t)}}class hr extends $e{constructor(t={}){super();d(this,"_side");d(this,"_align");d(this,"toBody",!0);d(this,"popper");d(this,"present");d(this,"layer");d(this,"state",{visible:!1});const{side:n="bottom",align:s="end",toBody:i=!0}=t;this._side=n,this._align=s,this.toBody=i,this.popper=new Gy({side:n,align:s}),this.present=new et,this.layer=new Qy,this.layer.onDismiss(()=>{this.hide()})}toggle(){const{visible:t}=this.state;if(t){this.hide();return}this.show()}show(){this.state.visible=!0,this.present.show(),setTimeout(()=>{this.popper.place(),this.emit(0)},200)}hide(){this.state.visible=!1,this.present.hide(),this.emit(1)}destroy(){super.destroy(),this.layer.destroy(),this.popper.destroy(),this.present.destroy()}onShow(t){this.on(0,t)}onHide(t){this.on(1,t)}get[Symbol.toStringTag](){return"PopoverCore"}}class t1 extends $e{constructor(t={}){super(t);d(this,"unique_id","ToastCore");d(this,"present");d(this,"delay",1200);d(this,"timer",null);d(this,"open",!1);d(this,"state",{icon:null,texts:[]});const{delay:n}=t;n&&(this.delay=n),this.present=new et,this.present.onShow(()=>{this.open=!0,this.emit(4,!0)}),this.present.onHidden(()=>{this.open=!1,this.emit(4,!1)})}async show(t){const{icon:n,texts:s}=t;if(this.emit(7,{icon:n,texts:s}),this.timer!==null){this.clearTimer(),this.timer=setTimeout(()=>{this.hide(),this.clearTimer()},this.delay);return}this.present.show(),this.timer=setTimeout(()=>{this.hide(),this.clearTimer()},this.delay)}clearTimer(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}hide(){this.present.hide()}onShow(t){return this.on(1,t)}onHide(t){return this.on(3,t)}onOpenChange(t){return this.on(4,t)}onStateChange(t){return this.on(7,t)}get[Symbol.toStringTag](){return"ToastCore"}}class r1 extends $e{constructor(t){super(t);d(this,"hostname","");d(this,"headers",{});d(this,"debug",!1);const{hostname:n="",headers:s={},debug:i=!1}=t;this.hostname=n,this.headers=s,this.debug=i}async get(t,n,s={}){try{const a={url:[this.hostname,t,n?"?"+Ar(n):""].join(""),method:"GET",id:s.id,headers:{...this.headers,...s.headers||{}}};this.debug&&console.log("[DOMAIN]http_client - before fetch",a);const c=await this.fetch(a);return b.Ok(c.data)}catch(i){const o=i,{message:a}=o;return b.Err(a)}}async post(t,n,s={}){const o=[this.hostname,t].join("");try{const a={url:o,method:"POST",data:n,id:s.id,headers:{...this.headers,...s.headers||{}}};this.debug&&console.log("[DOMAIN]http_client - before fetch",a);const c=await this.fetch(a);return b.Ok(c.data)}catch(a){const c=a,{message:l}=c;return b.Err(l)}}async fetch(t){return console.log("请在 connect 中实现 fetch 方法"),{data:{}}}cancel(t){const n="请在 connect 中实现 cancel 方法";return console.log(n),b.Err(n)}setHeaders(t){this.headers=t}appendHeaders(t){this.headers={...this.headers,...t}}setDebug(t){this.debug=t}onStateChange(t){return this.on(0,t)}}function Wu(e,r){return function(){return e.apply(r,arguments)}}const{toString:n1}=Object.prototype,{getPrototypeOf:ca}=Object,ni=(e=>r=>{const t=n1.call(r);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Vt=e=>(e=e.toLowerCase(),r=>ni(r)===e),si=e=>r=>typeof r===e,{isArray:dn}=Array,Gn=si("undefined");function s1(e){return e!==null&&!Gn(e)&&e.constructor!==null&&!Gn(e.constructor)&&xt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Gu=Vt("ArrayBuffer");function i1(e){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&Gu(e.buffer),r}const o1=si("string"),xt=si("function"),Ku=si("number"),ii=e=>e!==null&&typeof e=="object",a1=e=>e===!0||e===!1,$s=e=>{if(ni(e)!=="object")return!1;const r=ca(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},l1=Vt("Date"),c1=Vt("File"),u1=Vt("Blob"),h1=Vt("FileList"),d1=e=>ii(e)&&xt(e.pipe),f1=e=>{let r;return e&&(typeof FormData=="function"&&e instanceof FormData||xt(e.append)&&((r=ni(e))==="formdata"||r==="object"&&xt(e.toString)&&e.toString()==="[object FormData]"))},p1=Vt("URLSearchParams"),m1=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zn(e,r,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),dn(e))for(n=0,s=e.length;n<s;n++)r.call(null,e[n],n,e);else{const i=t?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let a;for(n=0;n<o;n++)a=i[n],r.call(null,e[a],a,e)}}function Yu(e,r){r=r.toLowerCase();const t=Object.keys(e);let n=t.length,s;for(;n-- >0;)if(s=t[n],r===s.toLowerCase())return s;return null}const Ju=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Xu=e=>!Gn(e)&&e!==Ju;function mo(){const{caseless:e}=Xu(this)&&this||{},r={},t=(n,s)=>{const i=e&&Yu(r,s)||s;$s(r[i])&&$s(n)?r[i]=mo(r[i],n):$s(n)?r[i]=mo({},n):dn(n)?r[i]=n.slice():r[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Zn(arguments[n],t);return r}const g1=(e,r,t,{allOwnKeys:n}={})=>(Zn(r,(s,i)=>{t&&xt(s)?e[i]=Wu(s,t):e[i]=s},{allOwnKeys:n}),e),y1=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),v1=(e,r,t,n)=>{e.prototype=Object.create(r.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),t&&Object.assign(e.prototype,t)},_1=(e,r,t,n)=>{let s,i,o;const a={};if(r=r||{},e==null)return r;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!n||n(o,e,r))&&!a[o]&&(r[o]=e[o],a[o]=!0);e=t!==!1&&ca(e)}while(e&&(!t||t(e,r))&&e!==Object.prototype);return r},b1=(e,r,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=r.length;const n=e.indexOf(r,t);return n!==-1&&n===t},w1=e=>{if(!e)return null;if(dn(e))return e;let r=e.length;if(!Ku(r))return null;const t=new Array(r);for(;r-- >0;)t[r]=e[r];return t},x1=(e=>r=>e&&r instanceof e)(typeof Uint8Array<"u"&&ca(Uint8Array)),S1=(e,r)=>{const n=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;r.call(e,i[0],i[1])}},C1=(e,r)=>{let t;const n=[];for(;(t=e.exec(r))!==null;)n.push(t);return n},$1=Vt("HTMLFormElement"),T1=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),Hl=(({hasOwnProperty:e})=>(r,t)=>e.call(r,t))(Object.prototype),E1=Vt("RegExp"),Qu=(e,r)=>{const t=Object.getOwnPropertyDescriptors(e),n={};Zn(t,(s,i)=>{r(s,i,e)!==!1&&(n[i]=s)}),Object.defineProperties(e,n)},P1=e=>{Qu(e,(r,t)=>{if(xt(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=e[t];if(xt(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},k1=(e,r)=>{const t={},n=s=>{s.forEach(i=>{t[i]=!0})};return dn(e)?n(e):n(String(e).split(r)),t},A1=()=>{},O1=(e,r)=>(e=+e,Number.isFinite(e)?e:r),Ri="abcdefghijklmnopqrstuvwxyz",Ul="0123456789",Zu={DIGIT:Ul,ALPHA:Ri,ALPHA_DIGIT:Ri+Ri.toUpperCase()+Ul},R1=(e=16,r=Zu.ALPHA_DIGIT)=>{let t="";const{length:n}=r;for(;e--;)t+=r[Math.random()*n|0];return t};function M1(e){return!!(e&&xt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const N1=e=>{const r=new Array(10),t=(n,s)=>{if(ii(n)){if(r.indexOf(n)>=0)return;if(!("toJSON"in n)){r[s]=n;const i=dn(n)?[]:{};return Zn(n,(o,a)=>{const c=t(o,s+1);!Gn(c)&&(i[a]=c)}),r[s]=void 0,i}}return n};return t(e,0)},L1=Vt("AsyncFunction"),I1=e=>e&&(ii(e)||xt(e))&&xt(e.then)&&xt(e.catch),O={isArray:dn,isArrayBuffer:Gu,isBuffer:s1,isFormData:f1,isArrayBufferView:i1,isString:o1,isNumber:Ku,isBoolean:a1,isObject:ii,isPlainObject:$s,isUndefined:Gn,isDate:l1,isFile:c1,isBlob:u1,isRegExp:E1,isFunction:xt,isStream:d1,isURLSearchParams:p1,isTypedArray:x1,isFileList:h1,forEach:Zn,merge:mo,extend:g1,trim:m1,stripBOM:y1,inherits:v1,toFlatObject:_1,kindOf:ni,kindOfTest:Vt,endsWith:b1,toArray:w1,forEachEntry:S1,matchAll:C1,isHTMLForm:$1,hasOwnProperty:Hl,hasOwnProp:Hl,reduceDescriptors:Qu,freezeMethods:P1,toObjectSet:k1,toCamelCase:T1,noop:A1,toFiniteNumber:O1,findKey:Yu,global:Ju,isContextDefined:Xu,ALPHABET:Zu,generateString:R1,isSpecCompliantForm:M1,toJSONObject:N1,isAsyncFn:L1,isThenable:I1};function ve(e,r,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s)}O.inherits(ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:O.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const eh=ve.prototype,th={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{th[e]={value:e}});Object.defineProperties(ve,th);Object.defineProperty(eh,"isAxiosError",{value:!0});ve.from=(e,r,t,n,s,i)=>{const o=Object.create(eh);return O.toFlatObject(e,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),ve.call(o,e.message,r,t,n,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const D1=null;function go(e){return O.isPlainObject(e)||O.isArray(e)}function rh(e){return O.endsWith(e,"[]")?e.slice(0,-2):e}function jl(e,r,t){return e?e.concat(r).map(function(s,i){return s=rh(s),!t&&i?"["+s+"]":s}).join(t?".":""):r}function F1(e){return O.isArray(e)&&!e.some(go)}const B1=O.toFlatObject(O,{},null,function(r){return/^is[A-Z]/.test(r)});function oi(e,r,t){if(!O.isObject(e))throw new TypeError("target must be an object");r=r||new FormData,t=O.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,S){return!O.isUndefined(S[y])});const n=t.metaTokens,s=t.visitor||u,i=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&O.isSpecCompliantForm(r);if(!O.isFunction(s))throw new TypeError("visitor must be a function");function l(g){if(g===null)return"";if(O.isDate(g))return g.toISOString();if(!c&&O.isBlob(g))throw new ve("Blob is not supported. Use a Buffer instead.");return O.isArrayBuffer(g)||O.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,y,S){let x=g;if(g&&!S&&typeof g=="object"){if(O.endsWith(y,"{}"))y=n?y:y.slice(0,-2),g=JSON.stringify(g);else if(O.isArray(g)&&F1(g)||(O.isFileList(g)||O.endsWith(y,"[]"))&&(x=O.toArray(g)))return y=rh(y),x.forEach(function(J,H){!(O.isUndefined(J)||J===null)&&r.append(o===!0?jl([y],H,i):o===null?y:y+"[]",l(J))}),!1}return go(g)?!0:(r.append(jl(S,y,i),l(g)),!1)}const h=[],f=Object.assign(B1,{defaultVisitor:u,convertValue:l,isVisitable:go});function p(g,y){if(!O.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(g),O.forEach(g,function(x,P){(!(O.isUndefined(x)||x===null)&&s.call(r,x,O.isString(P)?P.trim():P,y,f))===!0&&p(x,y?y.concat(P):[P])}),h.pop()}}if(!O.isObject(e))throw new TypeError("data must be an object");return p(e),r}function ql(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function ua(e,r){this._pairs=[],e&&oi(e,this,r)}const nh=ua.prototype;nh.append=function(r,t){this._pairs.push([r,t])};nh.toString=function(r){const t=r?function(n){return r.call(this,n,ql)}:ql;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function z1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sh(e,r,t){if(!r)return e;const n=t&&t.encode||z1,s=t&&t.serialize;let i;if(s?i=s(r,t):i=O.isURLSearchParams(r)?r.toString():new ua(r,t).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class H1{constructor(){this.handlers=[]}use(r,t,n){return this.handlers.push({fulfilled:r,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){O.forEach(this.handlers,function(n){n!==null&&r(n)})}}const Vl=H1,ih={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},U1=typeof URLSearchParams<"u"?URLSearchParams:ua,j1=typeof FormData<"u"?FormData:null,q1=typeof Blob<"u"?Blob:null,V1=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),W1=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Bt={isBrowser:!0,classes:{URLSearchParams:U1,FormData:j1,Blob:q1},isStandardBrowserEnv:V1,isStandardBrowserWebWorkerEnv:W1,protocols:["http","https","file","blob","url","data"]};function G1(e,r){return oi(e,new Bt.classes.URLSearchParams,Object.assign({visitor:function(t,n,s,i){return Bt.isNode&&O.isBuffer(t)?(this.append(n,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},r))}function K1(e){return O.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function Y1(e){const r={},t=Object.keys(e);let n;const s=t.length;let i;for(n=0;n<s;n++)i=t[n],r[i]=e[i];return r}function oh(e){function r(t,n,s,i){let o=t[i++];const a=Number.isFinite(+o),c=i>=t.length;return o=!o&&O.isArray(s)?s.length:o,c?(O.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!O.isObject(s[o]))&&(s[o]=[]),r(t,n,s[o],i)&&O.isArray(s[o])&&(s[o]=Y1(s[o])),!a)}if(O.isFormData(e)&&O.isFunction(e.entries)){const t={};return O.forEachEntry(e,(n,s)=>{r(K1(n),s,t,0)}),t}return null}const J1={"Content-Type":void 0};function X1(e,r,t){if(O.isString(e))try{return(r||JSON.parse)(e),O.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(e)}const ai={transitional:ih,adapter:["xhr","http"],transformRequest:[function(r,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,i=O.isObject(r);if(i&&O.isHTMLForm(r)&&(r=new FormData(r)),O.isFormData(r))return s&&s?JSON.stringify(oh(r)):r;if(O.isArrayBuffer(r)||O.isBuffer(r)||O.isStream(r)||O.isFile(r)||O.isBlob(r))return r;if(O.isArrayBufferView(r))return r.buffer;if(O.isURLSearchParams(r))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return G1(r,this.formSerializer).toString();if((a=O.isFileList(r))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return oi(a?{"files[]":r}:r,c&&new c,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),X1(r)):r}],transformResponse:[function(r){const t=this.transitional||ai.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(r&&O.isString(r)&&(n&&!this.responseType||s)){const o=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(r)}catch(a){if(o)throw a.name==="SyntaxError"?ve.from(a,ve.ERR_BAD_RESPONSE,this,null,this.response):a}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Bt.classes.FormData,Blob:Bt.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};O.forEach(["delete","get","head"],function(r){ai.headers[r]={}});O.forEach(["post","put","patch"],function(r){ai.headers[r]=O.merge(J1)});const ha=ai,Q1=O.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Z1=e=>{const r={};let t,n,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),t=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!t||r[t]&&Q1[t])&&(t==="set-cookie"?r[t]?r[t].push(n):r[t]=[n]:r[t]=r[t]?r[t]+", "+n:n)}),r},Wl=Symbol("internals");function wn(e){return e&&String(e).trim().toLowerCase()}function Ts(e){return e===!1||e==null?e:O.isArray(e)?e.map(Ts):String(e)}function ev(e){const r=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(e);)r[n[1]]=n[2];return r}const tv=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Mi(e,r,t,n,s){if(O.isFunction(n))return n.call(this,r,t);if(s&&(r=t),!!O.isString(r)){if(O.isString(n))return r.indexOf(n)!==-1;if(O.isRegExp(n))return n.test(r)}}function rv(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,t,n)=>t.toUpperCase()+n)}function nv(e,r){const t=O.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+t,{value:function(s,i,o){return this[n].call(this,r,s,i,o)},configurable:!0})})}class li{constructor(r){r&&this.set(r)}set(r,t,n){const s=this;function i(a,c,l){const u=wn(c);if(!u)throw new Error("header name must be a non-empty string");const h=O.findKey(s,u);(!h||s[h]===void 0||l===!0||l===void 0&&s[h]!==!1)&&(s[h||c]=Ts(a))}const o=(a,c)=>O.forEach(a,(l,u)=>i(l,u,c));return O.isPlainObject(r)||r instanceof this.constructor?o(r,t):O.isString(r)&&(r=r.trim())&&!tv(r)?o(Z1(r),t):r!=null&&i(t,r,n),this}get(r,t){if(r=wn(r),r){const n=O.findKey(this,r);if(n){const s=this[n];if(!t)return s;if(t===!0)return ev(s);if(O.isFunction(t))return t.call(this,s,n);if(O.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,t){if(r=wn(r),r){const n=O.findKey(this,r);return!!(n&&this[n]!==void 0&&(!t||Mi(this,this[n],n,t)))}return!1}delete(r,t){const n=this;let s=!1;function i(o){if(o=wn(o),o){const a=O.findKey(n,o);a&&(!t||Mi(n,n[a],a,t))&&(delete n[a],s=!0)}}return O.isArray(r)?r.forEach(i):i(r),s}clear(r){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const i=t[n];(!r||Mi(this,this[i],i,r,!0))&&(delete this[i],s=!0)}return s}normalize(r){const t=this,n={};return O.forEach(this,(s,i)=>{const o=O.findKey(n,i);if(o){t[o]=Ts(s),delete t[i];return}const a=r?rv(i):String(i).trim();a!==i&&delete t[i],t[a]=Ts(s),n[a]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const t=Object.create(null);return O.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=r&&O.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,t])=>r+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...t){const n=new this(r);return t.forEach(s=>n.set(s)),n}static accessor(r){const n=(this[Wl]=this[Wl]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=wn(o);n[a]||(nv(s,o),n[a]=!0)}return O.isArray(r)?r.forEach(i):i(r),this}}li.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);O.freezeMethods(li.prototype);O.freezeMethods(li);const Jt=li;function Ni(e,r){const t=this||ha,n=r||t,s=Jt.from(n.headers);let i=n.data;return O.forEach(e,function(a){i=a.call(t,i,s.normalize(),r?r.status:void 0)}),s.normalize(),i}function ah(e){return!!(e&&e.__CANCEL__)}function es(e,r,t){ve.call(this,e??"canceled",ve.ERR_CANCELED,r,t),this.name="CanceledError"}O.inherits(es,ve,{__CANCEL__:!0});function sv(e,r,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?e(t):r(new ve("Request failed with status code "+t.status,[ve.ERR_BAD_REQUEST,ve.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const iv=Bt.isStandardBrowserEnv?function(){return{write:function(t,n,s,i,o,a){const c=[];c.push(t+"="+encodeURIComponent(n)),O.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),O.isString(i)&&c.push("path="+i),O.isString(o)&&c.push("domain="+o),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function ov(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function av(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}function lh(e,r){return e&&!ov(r)?av(e,r):r}const lv=Bt.isStandardBrowserEnv?function(){const r=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function s(i){let o=i;return r&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=s(window.location.href),function(o){const a=O.isString(o)?s(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function cv(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function uv(e,r){e=e||10;const t=new Array(e),n=new Array(e);let s=0,i=0,o;return r=r!==void 0?r:1e3,function(c){const l=Date.now(),u=n[i];o||(o=l),t[s]=c,n[s]=l;let h=i,f=0;for(;h!==s;)f+=t[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-o<r)return;const p=u&&l-u;return p?Math.round(f*1e3/p):void 0}}function Gl(e,r){let t=0;const n=uv(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-t,c=n(a),l=i<=o;t=i;const u={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&l?(o-i)/c:void 0,event:s};u[r?"download":"upload"]=!0,e(u)}}const hv=typeof XMLHttpRequest<"u",dv=hv&&function(e){return new Promise(function(t,n){let s=e.data;const i=Jt.from(e.headers).normalize(),o=e.responseType;let a;function c(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}O.isFormData(s)&&(Bt.isStandardBrowserEnv||Bt.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(e.auth){const p=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(p+":"+g))}const u=lh(e.baseURL,e.url);l.open(e.method.toUpperCase(),sh(u,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function h(){if(!l)return;const p=Jt.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),y={data:!o||o==="text"||o==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:p,config:e,request:l};sv(function(x){t(x),c()},function(x){n(x),c()},y),l=null}if("onloadend"in l?l.onloadend=h:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(h)},l.onabort=function(){l&&(n(new ve("Request aborted",ve.ECONNABORTED,e,l)),l=null)},l.onerror=function(){n(new ve("Network Error",ve.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let g=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const y=e.transitional||ih;e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),n(new ve(g,y.clarifyTimeoutError?ve.ETIMEDOUT:ve.ECONNABORTED,e,l)),l=null},Bt.isStandardBrowserEnv){const p=(e.withCredentials||lv(u))&&e.xsrfCookieName&&iv.read(e.xsrfCookieName);p&&i.set(e.xsrfHeaderName,p)}s===void 0&&i.setContentType(null),"setRequestHeader"in l&&O.forEach(i.toJSON(),function(g,y){l.setRequestHeader(y,g)}),O.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),o&&o!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",Gl(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",Gl(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=p=>{l&&(n(!p||p.type?new es(null,e,l):p),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const f=cv(u);if(f&&Bt.protocols.indexOf(f)===-1){n(new ve("Unsupported protocol "+f+":",ve.ERR_BAD_REQUEST,e));return}l.send(s||null)})},Es={http:D1,xhr:dv};O.forEach(Es,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});const fv={getAdapter:e=>{e=O.isArray(e)?e:[e];const{length:r}=e;let t,n;for(let s=0;s<r&&(t=e[s],!(n=O.isString(t)?Es[t.toLowerCase()]:t));s++);if(!n)throw n===!1?new ve(`Adapter ${t} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(O.hasOwnProp(Es,t)?`Adapter '${t}' is not available in the build`:`Unknown adapter '${t}'`);if(!O.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:Es};function Li(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new es(null,e)}function Kl(e){return Li(e),e.headers=Jt.from(e.headers),e.data=Ni.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),fv.getAdapter(e.adapter||ha.adapter)(e).then(function(n){return Li(e),n.data=Ni.call(e,e.transformResponse,n),n.headers=Jt.from(n.headers),n},function(n){return ah(n)||(Li(e),n&&n.response&&(n.response.data=Ni.call(e,e.transformResponse,n.response),n.response.headers=Jt.from(n.response.headers))),Promise.reject(n)})}const Yl=e=>e instanceof Jt?e.toJSON():e;function an(e,r){r=r||{};const t={};function n(l,u,h){return O.isPlainObject(l)&&O.isPlainObject(u)?O.merge.call({caseless:h},l,u):O.isPlainObject(u)?O.merge({},u):O.isArray(u)?u.slice():u}function s(l,u,h){if(O.isUndefined(u)){if(!O.isUndefined(l))return n(void 0,l,h)}else return n(l,u,h)}function i(l,u){if(!O.isUndefined(u))return n(void 0,u)}function o(l,u){if(O.isUndefined(u)){if(!O.isUndefined(l))return n(void 0,l)}else return n(void 0,u)}function a(l,u,h){if(h in r)return n(l,u);if(h in e)return n(void 0,l)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u)=>s(Yl(l),Yl(u),!0)};return O.forEach(Object.keys(Object.assign({},e,r)),function(u){const h=c[u]||s,f=h(e[u],r[u],u);O.isUndefined(f)&&h!==a||(t[u]=f)}),t}const ch="1.4.0",da={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{da[e]=function(n){return typeof n===e||"a"+(r<1?"n ":" ")+e}});const Jl={};da.transitional=function(r,t,n){function s(i,o){return"[Axios v"+ch+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,a)=>{if(r===!1)throw new ve(s(o," has been removed"+(t?" in "+t:"")),ve.ERR_DEPRECATED);return t&&!Jl[o]&&(Jl[o]=!0,console.warn(s(o," has been deprecated since v"+t+" and will be removed in the near future"))),r?r(i,o,a):!0}};function pv(e,r,t){if(typeof e!="object")throw new ve("options must be an object",ve.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=r[i];if(o){const a=e[i],c=a===void 0||o(a,i,e);if(c!==!0)throw new ve("option "+i+" must be "+c,ve.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ve("Unknown option "+i,ve.ERR_BAD_OPTION)}}const yo={assertOptions:pv,validators:da},rr=yo.validators;class js{constructor(r){this.defaults=r,this.interceptors={request:new Vl,response:new Vl}}request(r,t){typeof r=="string"?(t=t||{},t.url=r):t=r||{},t=an(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:i}=t;n!==void 0&&yo.assertOptions(n,{silentJSONParsing:rr.transitional(rr.boolean),forcedJSONParsing:rr.transitional(rr.boolean),clarifyTimeoutError:rr.transitional(rr.boolean)},!1),s!=null&&(O.isFunction(s)?t.paramsSerializer={serialize:s}:yo.assertOptions(s,{encode:rr.function,serialize:rr.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o;o=i&&O.merge(i.common,i[t.method]),o&&O.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),t.headers=Jt.concat(o,i);const a=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(t)===!1||(c=c&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const l=[];this.interceptors.response.forEach(function(y){l.push(y.fulfilled,y.rejected)});let u,h=0,f;if(!c){const g=[Kl.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,l),f=g.length,u=Promise.resolve(t);h<f;)u=u.then(g[h++],g[h++]);return u}f=a.length;let p=t;for(h=0;h<f;){const g=a[h++],y=a[h++];try{p=g(p)}catch(S){y.call(this,S);break}}try{u=Kl.call(this,p)}catch(g){return Promise.reject(g)}for(h=0,f=l.length;h<f;)u=u.then(l[h++],l[h++]);return u}getUri(r){r=an(this.defaults,r);const t=lh(r.baseURL,r.url);return sh(t,r.params,r.paramsSerializer)}}O.forEach(["delete","get","head","options"],function(r){js.prototype[r]=function(t,n){return this.request(an(n||{},{method:r,url:t,data:(n||{}).data}))}});O.forEach(["post","put","patch"],function(r){function t(n){return function(i,o,a){return this.request(an(a||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}js.prototype[r]=t(),js.prototype[r+"Form"]=t(!0)});const Ps=js;class fa{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{n.subscribe(a),i=a}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},r(function(i,o,a){n.reason||(n.reason=new es(i,o,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const t=this._listeners.indexOf(r);t!==-1&&this._listeners.splice(t,1)}static source(){let r;return{token:new fa(function(s){r=s}),cancel:r}}}const mv=fa;function gv(e){return function(t){return e.apply(null,t)}}function yv(e){return O.isObject(e)&&e.isAxiosError===!0}const vo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vo).forEach(([e,r])=>{vo[r]=e});const vv=vo;function uh(e){const r=new Ps(e),t=Wu(Ps.prototype.request,r);return O.extend(t,Ps.prototype,r,{allOwnKeys:!0}),O.extend(t,r,null,{allOwnKeys:!0}),t.create=function(s){return uh(an(e,s))},t}const Ve=uh(ha);Ve.Axios=Ps;Ve.CanceledError=es;Ve.CancelToken=mv;Ve.isCancel=ah;Ve.VERSION=ch;Ve.toFormData=oi;Ve.AxiosError=ve;Ve.Cancel=Ve.CanceledError;Ve.all=function(r){return Promise.all(r)};Ve.spread=gv;Ve.isAxiosError=yv;Ve.mergeConfig=an;Ve.AxiosHeaders=Jt;Ve.formToJSON=e=>oh(O.isHTMLForm(e)?new FormData(e):e);Ve.HttpStatusCode=vv;Ve.default=Ve;const Ii=Ve;function _v(e){let r=[];e.fetch=async t=>{const{url:n,method:s,id:i,data:o,headers:a}=t,c=Ii.CancelToken.source();if(i&&r.push({id:i,source:c}),s==="GET")try{const l=await Ii.get(n,{params:o,headers:a,cancelToken:c.token});return r=r.filter(u=>u.id!==i),l}catch(l){throw r=r.filter(u=>u.id!==i),l}if(s==="POST")try{const l=await Ii.post(n,o,{headers:a,cancelToken:c.token});return r=r.filter(u=>u.id!==i),l}catch(l){throw r=r.filter(u=>u.id!==i),l}return Promise.reject("unknown method")},e.cancel=t=>{const n=r.find(s=>s.id===t);return n?(r=r.filter(s=>s.id!==t),n.source.cancel("主动取消"),b.Ok(null)):b.Err("没有找到对应请求")}}const vr=new r1({headers:{"client-version":mu}});_v(vr);var gr=(e=>(e.LD="LD",e.SD="SD",e.HD="HD",e.FHD="FHD",e.QHD="QHD",e))(gr||{});const _o={LD:"标清",SD:"普清",HD:"高清",FHD:"4K",QHD:"超高清"};class bv extends $e{constructor(t){super(t);d(this,"key");d(this,"values");d(this,"defaultValues");d(this,"client");d(this,"set",Qo(100,(t,n)=>{const s={...this.values,[t]:n};this.values=s,this.client.setItem(this.key,JSON.stringify(this.values)),this.emit(0,{...this.state})}));d(this,"merge",(t,n,s={})=>{const i=this.get(t)||{};if(Array.isArray(i)){let o=s.reverse?[...n,...i]:[...i,...n];return s.limit&&(o=o.slice(0,s.limit)),this.set(t,o),o}if(typeof i=="object"&&typeof n=="object"){const o={...i,...n};return this.set(t,o),o}return console.warn("the params of merge must be object"),i});const{key:n,client:s,defaultValues:i,values:o}=t;this.key=n,this.values=fu(o,i),console.log(this.values),this.defaultValues=i,this.client=s}get state(){return{values:this.values}}get(t,n){const s=this.values[t];if(s===void 0){if(n)return n[t];throw new Error("the default value no existing")}return s}clear(t){if(this.values[t]===void 0)return null;this.values={...this.values,[t]:this.defaultValues[t]},this.client.setItem(this.key,JSON.stringify(this.values)),this.emit(0,{...this.state})}onStateChange(t){return this.on(0,t)}}const wv={user:{id:"",username:"anonymous",email:"",avatar:"",token:""},qrcode:{step:ht.Pending,text:""},player_settings:{rate:1,volume:.5,type:gr.SD,skip:{}},tv_search:{language:[]},movie_search:{language:[]},media_search_histories:[],dialog_flags:{}},hh="m_global",xv=globalThis.localStorage.getItem(hh),fn=new bv({key:hh,defaultValues:wv,values:(()=>{const e=JSON.parse(xv||"{}");if(e.media_search_histories&&e.media_search_histories.length&&typeof e.media_search_histories[0]=="string"){const n=Nr("2024/03/20").valueOf();e.media_search_histories=e.media_search_histories.map((s,i)=>({text:s,sort:n+i}))}const r=e.media_search_histories?e.media_search_histories.sort((t,n)=>n.sort-t.sort):[];return{...e,media_search_histories:r}})(),client:globalThis.localStorage}),Sv={root:{title:"ROOT",pathname:"/",options:{require:[]},children:{home_layout:{title:"首页",pathname:"/home",options:{keep_alive:!0,animation:{in:"slide-in-from-right",out:"slide-out-to-right"},require:["login"]},children:{home_index:{title:"电视剧",pathname:"/home/index",options:{require:["login"]}},season_list:{title:"电视剧列表",pathname:"/season_list",options:{keep_alive:!0,animation:{in:"fade-in",out:"fade-out"},require:["login"]}},movie_list:{title:"电影列表",pathname:"/movie_list",options:{keep_alive:!0,animation:{in:"fade-in",out:"fade-out"},require:["login"]}},search:{title:"搜索",pathname:"/home/search",options:{keep_alive:!0,animation:{in:"slide-in-from-right",out:"slide-out-to-right"},require:[]}},history:{title:"观看记录",pathname:"/home/history",options:{require:["login"]}},mine:{title:"我的",pathname:"/home/mine",options:{keep_alive:!0,animation:{in:"slide-in-from-right",out:"slide-out-to-right"},require:["login"]}}}},season_playing:{title:"播放电视剧",pathname:"/season_play",options:{keep_alive:!0,animation:{in:"fade-in",out:"fade-out"},require:["login"]}},movie_playing:{title:"播放电影",pathname:"/movie_play",options:{keep_alive:!0,animation:{in:"fade-in",out:"fade-out"},require:["login"]}},login:{title:"登录",pathname:"/login",options:{require:[]}},notfound:{title:"404",pathname:"/notfound",options:{require:[]}}}}},dh=Hy(Sv),fh=dh.routes,pa=dh.routesWithPathname;globalThis.__routes_with_pathname__=pa;globalThis.__routes__=fh;window.location.hostname==="media-t.funzm.com"&&De.setEnv("dev");xm(e=>{e.onFailed(r=>{Je.tip({text:[r.message]}),r.code===900&&Ne.push("root.login")}),e.client||(e.client=vr)});Wy(e=>e.os===Je.env);Mr.prefix="/pc";Qn.setPrefix(window.location.origin);const Pn=new Mr;class Cv extends bu{say(){console.log(`My name is ${this.username}`)}}const kt=new Cv(fn.get("user"),vr),bo=new jr({name:"root",pathname:"/",title:"ROOT",visible:!0,parent:null,views:[]});bo.isRoot=!0;const Ne=new Uy({view:bo,router:Pn,routes:fh,views:{root:bo}});class $v extends km{hideCursor(){document.documentElement.style.cursor="none"}showCursor(r="default"){document.documentElement.style.cursor=r}}const Je=new $v({user:kt,storage:fn,async beforeReady(){var n,s;const{pathname:e,query:r}=Ne.$router,t=pa[e];return console.log("[ROOT]onMount",e,t,Je.$user.isLogin),t?(s=(n=t.options)==null?void 0:n.require)!=null&&s.includes("login")?(await kt.loginWithTokenId({token:Pn.query.token,tmp:Number(Pn.query.tmp)}),kt.isLogin?(Ne.extra_query={token:Pn.query.token,tmp:Pn.query.tmp},kt.isLogin?(vr.appendHeaders({Authorization:Je.$user.token}),De.appendHeaders({Authorization:Je.$user.token}),wo.init(),Ne.isLayout(t.name)?(Ne.push("root.home_layout.home_index",{},{ignore:!0}),b.Ok(null)):(Ne.push(t.name,r,{ignore:!0}),b.Ok(null))):(Je.tip({text:["请先登录"]}),Ne.push("root.login",{redirect:t.pathname}),b.Err("need login"))):(Je.tip({text:["请先登录"]}),Ne.push("root.login",{redirect:t.pathname}),b.Err("need login"))):Ne.isLayout(t.name)?b.Err("can't goto layout"):(Ne.push(t.name,r,{ignore:!0}),b.Ok(null)):(Ne.push("root.notfound"),b.Err("not found"))}});Je.setEnv({prod:!0,dev:!1});jy(Je);Vy(Ne);Ne.onClickLink(({href:e,target:r})=>{const{pathname:t,query:n}=Mr.parse(e),s=pa[t];if(!s){Je.tip({text:["没有匹配的页面"]});return}if(r==="_blank"){const i=Ne.buildURLWithPrefix(s.name,n);window.open(i);return}Ne.push(s.name,n)});Ne.onRouteChange(({ignore:e,reason:r,view:t,href:n})=>{console.log("[ROOT]rootView.onRouteChange",n,Ne.$router.href);const{title:s}=t;Je.setTitle(s),!e&&(Je.env.ios||(r==="push"&&Ne.$router.pushState(n),r==="replace"&&Ne.$router.replaceState(n)))});kt.onLogin(e=>{vr.appendHeaders({Authorization:kt.token}),De.appendHeaders({Authorization:kt.token}),fn.set("user",e)});kt.onLogout(()=>{fn.clear("user"),De.deleteHeaders("Authorization"),Ne.push("root.login")});kt.onExpired(()=>{fn.clear("user"),Je.tip({text:["token 已过期，请重新登录"]})});kt.onTip(e=>{Je.tip(e)});kt.onNeedUpdate(()=>{Je.tipUpdate()});const wo=new vt(new Ee(_m,{process:bm,client:vr}),{search:{status:1}});new Ee(gu,{client:vr});vt.commonProcessor=e=>{if(e===null)return{dataSource:[],page:1,pageSize:20,total:0,noMore:!1,empty:!1,error:null};try{const r=e.data||e,{list:t,page:n,page_size:s,total:i,noMore:o,no_more:a,next_marker:c}=r,l={dataSource:t,page:n,pageSize:s,total:i,empty:!1,noMore:!1,error:null,next_marker:c};return i<=s*n&&(l.noMore=!0),a!==void 0&&(l.noMore=a),o!==void 0&&(l.noMore=o),c===null&&(l.noMore=!0),t.length===0&&n===1&&(l.empty=!0),l}catch(r){return{dataSource:[],page:1,pageSize:20,total:0,noMore:!1,empty:!1,error:new Error(`${r.message}`)}}};/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=({size:e,strokeWidth:r=2,absoluteStrokeWidth:t,color:n,iconNode:s,name:i,class:o,...a},{slots:c})=>eo("svg",{..._s,width:e||_s.width,height:e||_s.height,stroke:n||_s.stroke,"stroke-width":t?Number(r)*24/Number(e):r,class:["lucide",`lucide-${Tv(i??"icon")}`],...a},[...s.map(l=>eo(...l)),...c.default?[c.default()]:[]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(e,r)=>(t,{slots:n})=>eo(Ev,{...t,iconNode:r,name:e},n);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=We("ArrowLeftIcon",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=We("BellIcon",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=We("BirdIcon",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=We("CaptionsOffIcon",[["path",{d:"M10.5 5H19a2 2 0 0 1 2 2v8.5",key:"jqtk4d"}],["path",{d:"M17 11h-.5",key:"1961ue"}],["path",{d:"M19 19H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2",key:"1keqsi"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M7 11h4",key:"1o1z6v"}],["path",{d:"M7 15h2.5",key:"1ina1g"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=We("CaptionsIcon",[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=We("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=We("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=We("HistoryIcon",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=We("HomeIcon",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=We("ImageOffIcon",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=We("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=We("LayersIcon",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=We("LoaderCircleIcon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=We("MaximizeIcon",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=We("MinimizeIcon",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=We("PauseIcon",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=We("PlayIcon",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=We("SkipForwardIcon",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-vue-next v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=We("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ts(e){const{page:r,pageSize:t,...n}=e;return De.post("/api/v2/wechat/media/list",{...n,page:r,page_size:t})}function rs(e){return e.error?b.Err(e.error):b.Ok({...e.data,list:e.data.list.map(r=>{const{id:t,type:n,name:s,original_name:i,overview:o,extra_text:a,poster_path:c,air_date:l,vote_average:u,genres:h,origin_country:f,actors:p=[]}=r;return{id:t,type:n,name:s||i,overview:o,poster_path:c,air_date:Nr(l).format(n===we.Movie?"YYYY-MM-DD":"YYYY"),vote:(()=>u===0?null:u.toFixed(1))(),genres:[...f.map(g=>n===we.Movie?Is[g]:n===we.Season?no[g]:null).filter(Boolean),...h.map(g=>g.label).filter(Boolean)],episode_count_text:a,actors:p.map(g=>g.name).join(" / ")}})})}const Bv={class:"w-full h-[480px] center flex items-center justify-center"},zv={class:"flex flex-col items-center justify-center text-slate-500"},Hv={class:"mt-4 flex items-center space-x-2"},Uv={class:"text-xl"},jv={class:"w-full h-[480px] center flex items-center justify-center"},qv={class:"flex flex-col items-center justify-center text-slate-500"},Vv={class:"mt-4 flex items-center space-x-2"},Wv={class:"text-xl text-center"},Gv={class:"mt-4 flex justify-center py-4 text-slate-500"},Kv={class:"mt-4 flex flex-col items-center space-x-2 cursor-pointer"},Yv={class:"text-center text-xl"},Jv={class:"mt-4 flex justify-center py-4 text-slate-500"},Xv={class:"flex items-center space-x-2"},Qv=m("div",{class:"text-center text-xl"},"没有数据了",-1),ns=ue({__name:"ListView",props:{class:{},store:{}},setup(e){const r=e,{store:t}=r,n=ie(t.response);t.onStateChange(i=>{console.log("[COMPONENT]ListView - store.onStateChange",i.empty,!i.noMore&&!i.initial),n.value=i});const s=rt("relative",r.class);return(i,o)=>(C(),R(fe,null,[z(Lt,{when:!n.value.error},{fallback:Q(()=>{var a;return[m("div",Bv,[m("div",zv,[m("div",Hv,[m("div",Uv,re((a=n.value.error)==null?void 0:a.message),1)])])])]}),default:Q(()=>[z(Lt,{when:n.value.initial},{default:Q(()=>[Se(i.$slots,"skeleton")]),_:3},8,["when"]),z(Lt,{when:n.value.empty},{default:Q(()=>[m("div",jv,[m("div",qv,[m("div",null,[z($(kv),{class:"w-24 h-24"})]),m("div",Vv,[z(Lt,{when:n.value.loading},{default:Q(()=>[pr(" ... ")]),_:1},8,["when"]),m("div",Wv,re(n.value.loading?"加载中":"列表为空"),1)])])])]),_:1},8,["when"]),z(Lt,{when:!n.value.empty},{default:Q(()=>[m("div",{class:Ce($(s))},[Se(i.$slots,"default")],2)]),_:3},8,["when"]),z(Lt,{when:!n.value.noMore&&!n.value.initial,name:"bottom"},{default:Q(()=>[m("div",Gv,[m("div",Kv,[z(Lt,{when:n.value.loading},{default:Q(()=>[z($(ga),{class:"animate animate-spin",size:32})]),_:1},8,["when"]),m("div",Yv,re(n.value.loading?"加载中":"加载更多"),1)])])]),_:1},8,["when"])]),_:3},8,["when"]),z(Lt,{when:n.value.noMore&&!n.value.empty},{default:Q(()=>[m("div",Jv,[m("div",Xv,[z(Lt,{when:n.value.loading},{default:Q(()=>[pr(" ... ")]),_:1},8,["when"]),Qv])])]),_:1},8,["when"])],64))}}),pn=ue({__name:"AspectRatio",props:{ratio:{},class:{}},setup(e){const r=e,{ratio:t=1/1}=r,n=rt(r.class);return(s,i)=>(C(),R("div",{class:Ce($(n)),style:dt({position:"relative",width:"100%",paddingBottom:`${100/$(t)}%`})},[Se(s.$slots,"default")],6))}});function Zv(e,r){const t=new IntersectionObserver(n=>{n.forEach(s=>{s.isIntersecting&&(r.handleShow(),t.unobserve(e))})},{threshold:.01});t.observe(e)}const e0=["src","alt"],mn=ue({__name:"Image",props:{class:{},store:{},src:{},alt:{}},setup(e){const r=e,{store:t,src:n}=r;function s(){t.handleError()}const i=ie(t.state),o=ie();t.onStateChange(c=>{i.value=c}),_t(()=>{const c=o.value;c&&Zv(c,t)});const a=rt(r.class,"flex items-center justify-center text-w-fg-2 bg-w-bg-3");return(c,l)=>(C(),R("div",{ref_key:"imgRef",ref:o,class:Ce($(a))},[i.value.step===$(En).Failed?(C(),ge($(Nv),{key:0,size:64})):i.value.step===$(En).Pending?(C(),ge($(Lv),{key:1,size:64})):[$(En).Loading,$(En).Loaded].includes(i.value.step)?(C(),R("img",{key:2,style:dt({width:"100%",height:"100%","object-fit":i.value.fit,transform:`scale(${i.value.scale})`}),src:i.value.src,alt:i.value.alt,onError:s},null,44,e0)):be("",!0)],2))}}),t0=ue({__name:"root",setup(e){return(r,t)=>Se(r.$slots,"default")}}),bh=ue({__name:"root",props:{store:{}},setup(e){return(r,t)=>(C(),ge(t0,null,{default:Q(()=>[Se(r.$slots,"default")]),_:3}))}}),r0=ue({__name:"anchor",props:{store:{},className:{}},setup(e){const{store:r,className:t}=e,n=ie(),s=rt("__a popper__anchor",t);async function i(o){const a=o.currentTarget;a&&(console.log("[PACKAGE/ui]popper/anchor - onMounted",a,a.getBoundingClientRect()),await Yo(200),r.checkIsClickAnchor=c=>!1,r.setReference({getRect(){return a.getBoundingClientRect()}}))}return(o,a)=>(C(),R("div",{ref_key:"el",ref:n,class:Ce($(s)),onAnimationend:i},[Se(o.$slots,"default")],34))}}),wh=ue({__name:"trigger",props:{store:{},className:{}},setup(e){const{store:r,className:t}=e;function n(s){console.log("[PACKAGE]ui/popover - handleClick"),r.toggle()}return(s,i)=>(C(),ge(r0,{store:s.store.popper,"class-name":s.className},{default:Q(()=>[m("button",{onClick:n},[Se(s.$slots,"default")])]),_:3},8,["store","class-name"]))}}),xh=ue({__name:"presence",props:{store:{},enterClassName:{},exitClassName:{},className:{}},setup(e){const{store:r,enterClassName:t,exitClassName:n,className:s}=e,i=ie(r.state),o=rt("presence",i.value.enter&&t?t:"",i.value.exit&&n?n:"",s);return r.onStateChange(a=>{i.value=a}),(a,c)=>i.value.mounted?(C(),R("div",{key:0,class:Ce($(o)),role:"presentation",style:dt({display:i.value.visible?"block":"none"})},[Se(a.$slots,"default")],6)):be("",!0)}}),Sh=ue({__name:"portal",props:{store:{},className:{}},setup(e){return(r,t)=>(C(),ge(xh,{store:r.store.present,"class-name":r.className},{default:Q(()=>[r.store.toBody?(C(),ge(Yc,{key:0,to:"body"},[Se(r.$slots,"default")])):Se(r.$slots,"default",{key:1})]),_:3},8,["store","class-name"]))}}),n0=["role"],s0=["data-side","data-align"],i0=ue({__name:"content",props:{store:{},className:{},role:{}},setup(e){const{store:r,className:t,role:n}=e,s=ie(r.state),i=ie(),o=rt("popper__content",t);return r.onStateChange(a=>{s.value=a}),_t(()=>{const a=i.value;a&&r.setFloating({getRect(){return a.getBoundingClientRect()}})}),(a,c)=>(C(),R("div",{ref_key:"el",ref:i,role:a.role,style:dt({position:s.value.strategy,left:0,top:0,transform:s.value.isPlaced?`translate3d(${Math.round(s.value.x)}px, ${Math.round(s.value.y)}px, 0)`:"translate3d(0, -200%, 0)","min-width":"max-content","z-index":99}),tabIndex:-1},[m("div",{class:Ce($(o)),"data-side":s.value.placedSide,"data-align":s.value.placedAlign},[Se(a.$slots,"default")],10,s0)],12,n0))}}),o0=ue({__name:"dismissable-layer",props:{store:{}},setup(e){const{store:r}=e,t=ie(),n=ie(null),s=ie({}),i=globalThis==null?void 0:globalThis.document,o=c=>{console.log("handle click document",c.target,c),c.target&&r.handlePointerDownOnTop()};function a(){r.pointerDown()}return _t(()=>{r.layers.add(s.value),n.value=window.setTimeout(()=>{console.log("register content of pointerdown"),i.addEventListener("click",o)},0)}),Lr(()=>{r.layers.delete(s.value),r.layersWithOutsidePointerEventsDisabled.delete(s.value),n.value!==null&&window.clearTimeout(n.value),i.removeEventListener("click",o),i.removeEventListener("click",r.handlePointerDownOnTop)}),(c,l)=>(C(),R("div",{ref_key:"el",ref:t,class:"dismissable-layer",onPointerdown:a},[Se(c.$slots,"default")],544))}}),a0=ue({__name:"content-impl",props:{store:{},className:{}},setup(e){const{store:r,className:t}=e,n=ie(r.present.state);return r.present.onStateChange(s=>{n.value=s}),(s,i)=>(C(),ge(o0,{store:s.store.layer},{default:Q(()=>[z(i0,{store:s.store.popper,"class-name":s.className},{default:Q(()=>[Se(s.$slots,"default")]),_:3},8,["store","class-name"])]),_:3},8,["store"]))}}),l0=ue({__name:"content-non-modal",props:{store:{},className:{}},setup(e){return(r,t)=>(C(),ge(a0,{store:r.store,"class-name":r.className},{default:Q(()=>[Se(r.$slots,"default")]),_:3},8,["store","class-name"]))}}),Ch=ue({__name:"content",props:{store:{},className:{}},setup(e){return(r,t)=>(C(),ge(l0,{store:r.store,"class-name":r.className},{default:Q(()=>[Se(r.$slots,"default")]),_:3},8,["store","class-name"]))}}),c0=ue({__name:"close",props:{store:{},className:{}},setup(e){const{store:r,className:t}=e;function n(){r.hide()}return(s,i)=>(C(),R("button",{class:Ce(s.className),onClick:n},[Se(s.$slots,"default")],2))}}),Xl=ue({__name:"Popover",props:{store:{},className:{}},setup(e){const{store:r,className:t}=e;ie(r.state);const n=rt("z-50 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","relative rounded-md bg-w-bg-0 text-w-fg-1 shadow-lg focus:shadow-md focus:ring-2 focus:ring-violet-700",t);return(s,i)=>(C(),ge(bh,{store:s.store,"class-name":""},{default:Q(()=>[z(wh,{"class-name":"inline-flex items-center justify-center",store:s.store},{default:Q(()=>[Se(s.$slots,"trigger")]),_:3},8,["store"]),z(Sh,{store:s.store,"class-name":""},{default:Q(()=>[z(Ch,{store:s.store,"class-name":$(n)},{default:Q(()=>[Se(s.$slots,"content"),z(c0,{"class-name":"font-inherit rounded-full h-6 w-6 inline-flex items-center justify-center absolute top-3 right-3",store:s.store},{default:Q(()=>[z($(Fv),{class:"w-8 h-8"})]),_:1},8,["store"])]),_:3},8,["store","class-name"])]),_:3},8,["store"])]),_:3},8,["store"]))}}),u0={class:"bg-w-bg-1"},h0={class:"w-[1080px] mx-auto py-8 2xl:w-[1280px]"},d0={class:"text-w-fg-2"},$h=ue({__name:"index",setup(e){return(r,t)=>(C(),R("div",u0,[m("div",h0,[m("div",d0," 版本 v"+re($(mu)),1)])]))}});function Th(e){return De.post("/api/v2/wechat/media/playing",{media_id:e.media_id,type:e.type})}function Eh(e){if(e.error)return b.Err(e.error);const{id:r,name:t,overview:n,poster_path:s,genres:i,origin_country:o,source_count:a,cur_source:c,sources:l,vote_average:u,source_groups:h}=e.data,f=l.map(Ph),p=(()=>h.map(S=>{const{start:x,end:P}=S,J=c.order>=x&&c.order<=P;return{text:x===P?x:`${x}-${P}`,cur:J,media_id:r,start:x,end:P,list:J?f:[]}}))(),g=f.find(S=>S.id===c.id),y=(()=>{if(g){const P=(()=>{const J=g.files.find(H=>H.id===c.cur_source_file_id);return J||g.files[0]})();return{...g,...Ql({...c,cur_source_file_id:P.id})}}const S=f[0];if(!S)return null;const x=(()=>{const P=S.files.find(J=>J.id===c.cur_source_file_id);return P||S.files[0]})();return{...S,...Ql({...S,current_time:0,thumbnail_path:"",cur_source_file_id:x.id})}})();return b.Ok({id:r,name:t,overview:n,posterPath:s,genres:i,originCountry:o,voteAverage:u,sourceCount:a,sourceGroups:p,curSource:y})}function Ph(e){const{id:r,name:t,overview:n,air_date:s,order:i,media_id:o,still_path:a,runtime:c,sources:l,subtitles:u}=e;return{id:r,name:(()=>{const h=/^第[0-9一二三四五六七八九十]{1,}[集期章]：/;return t.match(h)?t.replace(h,""):t})(),overview:n,seasonId:o,order:i,runtime:(()=>c?sm(c):null)(),stillPath:a,files:l.map((h,f)=>({id:h.id,name:`源${f+1}`,invalid:!1,order:f+1})),subtitles:u}}function Ql(e){const{id:r,current_time:t,thumbnail_path:n,cur_source_file_id:s}=e;return{id:r,currentTime:t,thumbnailPath:n,curFileId:s}}function Zl(e){return De.post("/api/v2/wechat/media/episode",{media_id:e.media_id,start:e.start,end:e.end})}function ec(e){return e.error?b.Err(e.error.message):b.Ok(e.data.list.map(r=>Ph(r)))}function kh(e){const{media_id:r,media_source_id:t,current_time:n,duration:s,thumbnail:i,source_id:o}=e;return De.post("/api/v2/wechat/history/update",{media_id:r,media_source_id:t,current_time:n,duration:s,thumbnail:i,source_id:o})}function Ah(e){const{page:r,pageSize:t,...n}=e;return De.post("/api/v2/wechat/history/list",{...n,page:r,page_size:t})}function Oh(e){if(e.error)return e;const{list:r,total:t,page_size:n,next_marker:s}=e.data;return b.Ok({page_size:n,total:t,next_marker:s,list:r.map(i=>{const{id:o,type:a,media_id:c,name:l,poster_path:u,has_update:h,episode_count:f,cur_episode_number:p,cur_episode_count:g,thumbnail_path:y,duration:S,current_time:x,air_date:P,updated:J}=i;return{id:o,type:a,media_id:c,name:l,posterPath:u,episodeCountText:(()=>a===we.Movie||!f?null:g===f?`全${f}集`:`更新至${g}集`)(),episodeText:a===we.Movie?null:rm(p),hasUpdate:!!h,airDate:P,currentTime:x,percent:x===0||S===0?0:parseFloat((x/S*100).toFixed(0)),updated:im(J),thumbnail_path:y}})})}function f0(e){return De.post("/api/v2/wechat/history/delete",{history_id:e.history_id})}async function p0(e){return await De.post("/api/v2/wechat/media/series",{media_id:e.media_id})}const m0=m("div",{class:""},[m("div",{class:"text-2xl"},"最近看过")],-1),g0={class:"mt-4 min-w-[328px] min-h-[482px] space-y-2"},y0={class:"relative flex w-full cursor-pointer select-none"},v0=["onClick"],_0={class:"relative w-[160px] h-[90px] overflow-hidden rounded-md"},b0={class:"absolute w-full top-0 flex flex-row-reverse items-center"},w0={class:"relative z-20 p-2 text-[12px]"},x0={key:0,class:"absolute top-2 left-2"},S0=m("div",{class:"huizhang"},"更新",-1),C0=[S0],$0={class:"flex-1 ml-2 w-full"},T0={class:"overflow-hidden max-w-full text-xl truncate"},E0={class:"flex items-center"},P0=m("p",{class:"mx-1"},"·",-1),k0={class:""},A0={class:"relative mt-4 w-full"},O0=m("div",{class:"text-white text-center"},"查看全部",-1),R0=[O0],M0=ue({__name:"index",props:{store:{},app:{},client:{},history:{}},setup(e){const{app:r,client:t,history:n,store:s}=e,i=new vt(new Ee(Ah,{process:Oh,client:t}),{pageSize:5}),o=new Ee(f0,{client:t,onLoading(p){a.okBtn.setLoading(p)},onFailed(p){r.tip({text:["删除失败",p.message]})},onSuccess(p){r.tip({text:["删除成功"]}),a.hide(),i.deleteItem(g=>{var y;return g.id===((y=c.value)==null?void 0:y.id)}),c.clear()}}),a=new In({onOk(){c.value&&o.run({history_id:c.value.id})}});new mr;const c=new Vn;new Zt({onScroll(p){p.scrollTop>r.screen.height},onReachBottom(){i.loadMore()}}),new e1({onClick(p){if(!p)return;const{type:g,media_id:y}=p;if(g===we.Season){n.push("root.season_playing",{id:y});return}if(g===we.Movie){n.push("root.movie_playing",{id:y});return}}});const l=new mr({scale:1.38}),u=ie(i.response);ie(!1);function h(p){const{type:g,media_id:y}=p;if(s.hide(),g===we.Season){n.push("root.season_playing",{id:y});return}if(g===we.Movie){n.push("root.movie_playing",{id:y});return}}function f(){n.push("root.home_layout.history"),s.hide()}return i.onStateChange(p=>{u.value=p}),i.init(),(p,g)=>(C(),R(fe,null,[m0,m("div",g0,[(C(!0),R(fe,null,Le(u.value.dataSource,y=>(C(),R("div",y0,[m("div",{class:"relative flex rounded-lg",onClick:S=>h(y)},[m("div",_0,[z(pn,{ratio:10/15},{default:Q(()=>[z(mn,{"class-name":"overflow-hidden absolute inset-0",store:$(l).bind(y.thumbnail_path),alt:y.name},null,8,["store","alt"])]),_:2},1024),m("div",b0,[m("div",w0,re(y.episodeCountText),1)]),y.hasUpdate?(C(),R("div",x0,C0)):be("",!0)]),m("div",$0,[m("div",T0,re(y.name),1),m("div",E0,[pr(re(y.updated)+" ",1),y.episodeText?(C(),R(fe,{key:0},[P0,m("p",k0,re(y.episodeText),1)],64)):be("",!0)]),m("div",A0,[m("div",{class:"w-full h-[4px] rounded-md bg-w-brand",style:dt({width:`${y.percent}%`})},null,4)])])],8,v0)]))),256))]),m("div",{class:"flex items-center justify-center mt-6"},[m("div",{class:"bg-w-brand px-4 py-2 rounded-3xl cursor-pointer",onClick:f},R0)])],64))}}),N0=["data-state"],L0=ue({__name:"KeepAliveView",props:{className:{},store:{},index:{},immediately:{type:Boolean}},setup(e){const{store:r,immediately:t,index:n,className:s}=e,i=ie(r.state);r.ready(),Lr(()=>{r.setUnload()}),r.onStateChange(a=>{console.log("view state change",r.unique_id,a),i.value=a});const o=tu(()=>({display:(()=>t?i.value.visible?"block":"none":i.value.mounted&&i.value.visible?"block":"none")(),"z-index":n}));return(a,c)=>(C(),R("div",{class:Ce(a.className),style:dt(o.value),"data-state":i.value.visible?"open":"closed"},[Se(a.$slots,"default")],14,N0))}}),I0={class:"layout flex flex-col w-full h-full"},D0={class:"w-[1080px] h-[130px] mx-auto 2xl:w-[1280px]"},F0={class:"top-header-bar py-4 flex items-center justify-between"},B0=m("div",{class:"z-10 absolute left-2 top-[18px] w-full h-[16px] rounded-md bg-green-500"},null,-1),z0=m("div",{class:"z-20 relative text-w-fg-0 text-3xl italic"},"FamilyFlix",-1),H0=[B0,z0],U0={class:"flex items-center space-x-4"},j0={class:"relative"},q0={class:"flex items-center justify-between p-2 rounded-full bg-w-bg-2 cursor-pointer"},V0={key:0,className:"absolute top-[-2px] right-[2px] px-[8px] h-[16px] rounded-xl break-all whitespace-nowrap text-[12px] border-w-bg-0 dark:border-w-fg-0 bg-w-red text-white dark:text-w-fg-0 translate-x-1/2"},W0=m("div",null,[m("div",{class:"text-2xl"},"系统消息")],-1),G0={class:"mt-4 min-h-[320px] min-w-[240px]"},K0=["onClick"],Y0={class:"flex items-center justify-between p-2 rounded-full bg-w-bg-2 cursor-pointer"},J0=m("div",{class:"h-[1px] bg-w-fg-1"},null,-1),X0={class:"flex items-center justify-between w-full"},Q0={class:"nav flex items-center space-x-4"},Z0=m("div",null,"首页",-1),e_={class:"layout__content flex-1 z-index-0 relative flex flex-col w-full h-full"},t_={class:"flex-1 h-full"},r_={class:"absolute inset-0 w-full h-full"},n_={class:"w-full h-full scrollbar-hide overflow-y-auto bg-white opacity-100 dark:bg-black hide-scroll"},s_={class:"w-[1080px] mx-auto mt-4 2xl:w-[1280px]"},i_={class:"relative p-4 space-y-2 bg-w-bg--2 rounded-md"},o_={class:"absolute -right-20 top-0"},a_=m("div",{class:"field flex items-center"},[m("div",{class:"w-[120px]"},"视剧类型"),m("div",{class:"flex space-x-2"},[m("div",{class:"py-1 px-2 rounded-md text-sm bg-w-bg-2 cursor-pointer"},"电视剧"),m("div",{class:"py-1 px-2 rounded-md text-sm bg-w-bg-2 cursor-pointer"},"电影")])],-1),l_={class:"field flex items-center"},c_=m("div",{class:"w-[120px]"},"题材",-1),u_={class:"flex space-x-2"},h_={class:"py-1 px-2 rounded-md text-sm bg-w-bg-2 cursor-pointer"},d_={class:"field flex items-center"},f_=m("div",{class:"w-[120px]"},"发行地区",-1),p_={class:"flex space-x-2"},m_={class:"py-1 px-2 rounded-md text-sm bg-w-bg-2 cursor-pointer"},g_={class:"field flex items-center"},y_=m("div",{class:"w-[120px]"},"上映时间",-1),v_={class:"flex space-x-2"},__={class:"py-1 px-2 rounded-md text-sm bg-w-bg-2 cursor-pointer"},b_=["onClick"],w_={class:"mt-2"},x_={class:"text-lg truncate"},S_={class:""},C_={key:0,className:"absolute w-full top-2 right-2 flex flex-row-reverse items-center"},$_={className:"huizhang relative z-20 p-2 text-[12px] text-w-bg-0 dark:text-w-fg-0"},T_={key:1,className:"absolute w-full top-8 right-2 flex flex-row-reverse items-center"},E_={className:"huizhang huizhang--blue relative z-20 p-2 text-[12px] text-w-bg-0 dark:text-w-fg-0"},P_=ue({__name:"layout",props:{app:{},history:{},client:{},view:{},storage:{},pages:{},parent:{}},setup(e){const{app:r,view:t,client:n,pages:s,history:i}=e,o=new vt(new Ee(ts,{process:rs,client:n}),{pageSize:14}),a=new Us({defaultValue:"",placeholder:"请输入关键字搜索",onEnter(V){o.search({name:V}),c.scrollTo({top:0})},onChange(V){o.searchDebounce({name:V})},onBlur(V){V&&V!==o.params.name&&o.search({name:V})}});new Wn({onClick(){a.value&&o.search({name:a.value})}});const c=new Zt({}),l=new mr,u=new hr({align:"start"}),h=new hr({align:"start"}),f=ie(t.curView),p=ie(t.subViews),g=ie(wo.response),y=ie(o.response),S=ie(!1);function x(V){const{id:W,type:T}=V;if(T===we.Season){i.push("root.season_playing",{id:W});return}if(T===we.Movie){i.push("root.movie_playing",{id:W});return}}function P(V){const{media:W}=V;if(u.hide(),W&&W.type===we.Season){i.push("root.season_playing",{id:W.id});return}W&&W.type===we.Movie&&i.push("root.movie_playing",{id:W.id})}function J(){S.value=!0}function H(){if(console.log("[]isSearching.value",S.value),S.value){S.value=!1;return}i.push("root.home_layout.home_index")}return o.onStateChange(V=>{y.value=V}),wo.onStateChange(V=>{g.value=V}),t.onSubViewsChange(V=>{p.value=V}),t.onCurViewChange(V=>{f.value=V}),(V,W)=>(C(),R("div",I0,[m("div",D0,[m("div",F0,[m("div",{class:"relative cursor-pointer",onClick:H},H0),m("div",U0,[m("div",j0,[z(Xl,{store:$(u),"class-name":"relative"},{trigger:Q(()=>[m("div",q0,[z($(Pv),{size:48,class:"w-6 h-6"})]),g.value.total?(C(),R("div",V0,re(g.value.total),1)):be("",!0)]),content:Q(()=>[W0,m("div",G0,[(C(!0),R(fe,null,Le(g.value.dataSource,(T,N)=>(C(),R("div",{class:"py-2 text-lg cursor-pointer",onClick:M=>P(T)},re(T.msg),9,K0))),256))])]),_:1},8,["store"])]),m("div",null,[z(Xl,{store:$(h),"class-name":""},{trigger:Q(()=>[m("div",Y0,[z($(Rv),{size:48,class:"w-6 h-6"})])]),content:Q(()=>[z(M0,{app:V.app,history:V.history,client:V.client,store:$(h)},null,8,["app","history","client","store"])]),_:1},8,["store"])])])]),J0,m("div",X0,[m("div",Q0,[m("div",{class:"flex items-center py-4 space-x-2 cursor-pointer",onClick:H},[m("div",null,[z($(Mv),{class:"w-4 h-4"})]),Z0])]),m("div",{class:"flex items-center",onClick:J},[z(Ls,{store:$(a)},null,8,["store"])])])]),m("div",e_,[m("div",t_,[m("div",{style:dt(S.value?"display: none":"display: block")},[(C(!0),R(fe,null,Le(p.value,(T,N)=>(C(),ge(L0,{key:"id","class-name":"keep-alive-view absolute inset-0 w-full h-full overflow-y-auto bg-white opacity-100 dark:bg-black hide-scroll",store:T,index:N},{default:Q(()=>[(C(),ge(Bc(V.pages[T.name]),{app:V.app,history:V.history,client:V.client,storage:V.storage,pages:V.pages,view:T},null,8,["app","history","client","storage","pages","view"]))]),_:2},1032,["store","index"]))),128))],4),m("div",{style:dt(S.value?"display: block; height: 100%;":"display: none; height: 100%;")},[m("div",r_,[m("div",n_,[z(Dr,{store:$(c)},{default:Q(()=>[m("div",s_,[m("div",i_,[m("div",o_,[m("div",{class:"flex items-center justify-between p-4 rounded-full bg-w-bg-2 cursor-pointer",onClick:H},[z($(Av),{class:"w-8 h-8"})])]),a_,m("div",l_,[c_,m("div",u_,[(C(!0),R(fe,null,Le($(ym),T=>(C(),R("div",h_,re(T.label),1))),256))])]),m("div",d_,[f_,m("div",p_,[(C(!0),R(fe,null,Le($(mm),T=>(C(),R("div",m_,re(T.label),1))),256))])]),m("div",g_,[y_,m("div",v_,[(C(!0),R(fe,null,Le($(vm),T=>(C(),R("div",__,re(T.label),1))),256))])])]),z(ns,{store:$(o),class:"grid grid-cols-7 gap-4 mt-4 min-h-[634px]"},{default:Q(()=>[(C(!0),R(fe,null,Le(y.value.dataSource,T=>(C(),R("div",{class:"relative w-[166px] bg-w-bg-2 cursor-pointer",onClick:N=>x(T)},[z(pn,{ratio:10/15},{default:Q(()=>[(C(),ge(mn,{class:"overflow-hidden absolute inset-0 rounded-md",store:$(l).bind(T.poster_path),key:T.poster_path},null,8,["store"]))]),_:2},1024),m("div",w_,[m("div",x_,re(T.name),1),m("div",S_,re(T.air_date),1)]),T.episode_count_text?(C(),R("div",C_,[m("div",$_,re(T.episode_count_text),1)])):be("",!0),T.vote?(C(),R("div",T_,[m("div",E_,re(T.vote),1)])):be("",!0)],8,b_))),256))]),_:1},8,["store"])]),z($h)]),_:1},8,["store"])])])],4)])])]))}}),k_={class:"flex items-center justify-between"},A_={class:"flex items-center"},O_={class:"text-3xl"},R_={key:0,class:"flex items-center ml-4 space-x-2"},M_=["data-value"],N_=m("div",null,null,-1),L_=["data-value"],I_=m("div",{class:""},"全部",-1),D_={class:"grid grid-cols-6 gap-4 mt-4 min-h-[634px] 2xl:grid-cols-7"},F_=["onClick"],B_={class:"mt-2"},z_={class:"text-xl truncate"},H_={class:""},U_={class:"absolute top-2 right-2 space-y-2"},j_={key:0,className:"flex flex-row-reverse items-center w-full "},q_={className:"huizhang huizhang--blue relative z-20 p-2 text-[12px] text-w-bg-0"},V_={key:1,className:"flex flex-row-reverse items-center w-full"},W_={className:"huizhang relative z-20 p-2 text-[12px] text-w-bg-0"},Di=ue({__name:"index",props:{title:{},showExtra:{type:Boolean},type:{},params:{},app:{},client:{},storage:{},history:{}},setup(e){const r=e,{app:t,client:n,storage:s,history:i,title:o,params:a,showExtra:c=!1}=r,l=new vt(new Ee(ts,{process:rs,client:n}),{pageSize:(()=>({sm:6,md:12,lg:12,xl:14,"2xl":14})[t.curDeviceSize])(),search:{...a}}),u=new mr,h=ie(l.response),f=ie({language:je.CN});function p(y){const{id:S,type:x}=y;if(x===we.Season){i.push("root.season_playing",{id:S});return}if(x===we.Movie){i.push("root.movie_playing",{id:S});return}}function g(y){const S=y.currentTarget;if(S===null)return;const{elm:x,value:P}=S.dataset;if(x==="language"&&P){f.value.language=P,l.search({language:P});return}if(x==="all"){if(Number(P)===we.Movie){i.push("root.home_layout.movie_list");return}if(Number(P)===we.Season){i.push("root.home_layout.season_list");return}}}return l.onStateChange(y=>{h.value=y}),l.init(),(y,S)=>(C(),R("div",null,[m("div",k_,[m("div",A_,[m("div",O_,re($(o)),1),$(c)?(C(),R("div",R_,[(C(!0),R(fe,null,Le([$(je).CN,$(je).US,$(je).KR],x=>(C(),R("div",{class:Ce(f.value.language===x?"px-2 py-1 rounded bg-w-fg-1 text-w-bg-0 cursor-pointer":"px-2 py-1 rounded bg-w-bg-1 cursor-pointer"),"data-elm":"language","data-value":x,onClick:g},re($(Is)[x]),11,M_))),256)),N_])):be("",!0)]),r.type?(C(),R("div",{key:0,class:"extra flex items-center cursor-pointer","data-elm":"all","data-value":r.type,onClick:g},[I_,z($(Ov),{class:"w-6 h-6"})],8,L_)):be("",!0)]),m("div",D_,[(C(!0),R(fe,null,Le(h.value.dataSource,x=>(C(),R("div",{class:"relative w-[166px] cursor-pointer",onClick:P=>p(x)},[z(pn,{ratio:10/15},{default:Q(()=>[(C(),ge(mn,{key:x.poster_path,class:"overflow-hidden absolute inset-0 rounded-md",store:$(u).bind(x.poster_path)},null,8,["store"]))]),_:2},1024),m("div",B_,[m("div",z_,re(x.name),1),m("div",H_,re(x.air_date),1)]),m("div",U_,[x.vote?(C(),R("div",j_,[m("div",q_,re(x.vote),1)])):be("",!0),x.episode_count_text?(C(),R("div",V_,[m("div",W_,re(x.episode_count_text),1)])):be("",!0)])],8,F_))),256))])]))}}),G_={class:"w-[1080px] mx-auto mt-8 pb-8 2xl:w-[1280px]"},K_={class:"space-y-8"},Y_=m("div",{class:"h-[1px] my-4 bg-w-fg-1"},null,-1),J_=m("div",{class:"h-[1px] my-4 bg-w-fg-1"},null,-1),X_=ue({__name:"index",props:{app:{},history:{},client:{},view:{},storage:{},pages:{},parent:{}},setup(e){const r=new Zt({});return(t,n)=>(C(),ge(Dr,{store:$(r)},{default:Q(()=>[m("div",G_,[m("div",K_,[z(Di,{title:"最新影视剧",params:{},app:t.app,client:t.client,storage:t.storage,history:t.history},null,8,["app","client","storage","history"]),Y_,z(Di,{title:"电视剧",type:$(we).Season,"show-extra":!0,params:{type:$(we).Season,language:$(je).CN},app:t.app,client:t.client,storage:t.storage,history:t.history},null,8,["type","params","app","client","storage","history"]),J_,z(Di,{title:"电影",type:$(we).Movie,"show-extra":!0,params:{type:$(we).Movie,language:$(je).CN},app:t.app,client:t.client,storage:t.storage,history:t.history},null,8,["type","params","app","client","storage","history"])])]),z($h)]),_:1},8,["store"]))}}),Q_={class:"h-full flex flex-col"},Z_={class:"w-full p-4"},eb={class:"flex space-x-2"},tb={class:"relative w-[166px] bg-w-bg-2 cursor-pointer"},rb={class:"mt-2"},nb={class:"text-lg truncate"},sb={class:""},ib={key:0,className:"absolute w-full top-2 right-2 flex flex-row-reverse items-center"},ob={className:"huizhang relative z-20 p-2 text-[12px] text-w-bg-0 dark:text-w-fg-0"},ab={key:1,className:"absolute w-full top-8 right-2 flex flex-row-reverse items-center"},lb={className:"huizhang huizhang--blue relative z-20 p-2 text-[12px] text-w-bg-0 dark:text-w-fg-0"},cb=ue({__name:"search",props:{app:{},history:{},client:{},view:{},storage:{},pages:{},parent:{}},setup(e){const{view:r,client:t}=e,n=new vt(new Ee(ts,{process:rs,client:t})),s=new Us({defaultValue:"",placeholder:"请输入关键字搜索"}),i=new Wn({onClick(){s.value&&n.search({name:s.value})}}),o=new Zt({}),a=new mr,c=ie(n.response);return r.onReady(()=>{console.log("home/search ready")}),r.onMounted(()=>{console.log("home/search mounted")}),r.onShow(()=>{console.log("home/search show")}),r.onHidden(()=>{console.log("home/search hide")}),n.onStateChange(l=>{c.value={...l,dataSource:l.dataSource.map(u=>({...u,poster_path:Qn.url(u.poster_path)}))}}),(l,u)=>{const h=ds("Input"),f=ds("Button"),p=ds("LazyImage"),g=ds("AspectRatio");return C(),R("div",Q_,[m("div",Z_,[m("div",eb,[z(h,{store:$(s),class:""},null,8,["store"]),z(f,{store:$(i),class:"w-[80px]"},{default:Q(()=>[pr("搜索")]),_:1},8,["store"])])]),z(Dr,{class:"flex-1",store:$(o)},{default:Q(()=>[z(ns,{store:$(n),class:"p-4 space-y-4"},{default:Q(()=>[(C(!0),R(fe,null,Le(c.value.dataSource,y=>(C(),R("div",tb,[z(g,{ratio:10/15},{default:Q(()=>[z(p,{class:"overflow-hidden absolute inset-0 rounded-md",store:$(a).bind(y.poster_path)},null,8,["store"])]),_:2},1024),m("div",rb,[m("div",nb,re(y.name),1),m("div",sb,re(y.air_date),1)]),y.episode_count_text?(C(),R("div",ib,[m("div",ob,re(y.episode_count_text),1)])):be("",!0),y.vote?(C(),R("div",ab,[m("div",lb,re(y.vote),1)])):be("",!0)]))),256))]),_:1},8,["store"])]),_:1},8,["store"])])}}}),ub={class:"w-[1080px] mx-auto mt-8 2xl:w-[1280px]"},hb=m("div",{class:"text-3xl"},"观看记录",-1),db=["onClick"],fb={class:"relative w-full h-full bg-w-bg-2 rounded-lg"},pb={class:"relative w-full overflow-hidden rounded-t-md"},mb={class:"absolute w-full top-0 flex flex-row-reverse items-center"},gb={class:"relative z-20 p-2 text-w-bg-0 dark:text-w-fg-0"},yb={class:"absolute bottom-0 w-full"},vb={key:0,class:"absolute top-2 left-2"},_b=m("div",{class:"huizhang"},"更新",-1),bb=[_b],wb={class:"mt-4 pb-4"},xb={class:"text-xl text-w-fg-0"},Sb={class:"flex items-center text-w-fg-1"},Cb=m("p",{class:"mx-1"},"·",-1),$b={class:""},Tb=m("p",{class:"mx-1"},"·",-1),Eb=ue({__name:"history",props:{app:{},history:{},client:{},view:{},storage:{},pages:{},parent:{}},setup(e){const{app:r,view:t,history:n,client:s}=e,i=new vt(new Ee(Ah,{process:Oh,client:s}),{pageSize:24}),o=new Zt({onReachBottom(){i.loadMore()}}),a=new mr({scale:1.38}),c=ie(i.response);function l(u){const{type:h,media_id:f}=u;if(h===we.Season){n.push("root.season_playing",{id:f});return}if(h===we.Movie){n.push("root.movie_playing",{id:f});return}}return i.onStateChange(u=>{c.value=u}),i.init(),(u,h)=>(C(),ge(Dr,{store:$(o),class:""},{default:Q(()=>[m("div",ub,[hb,z(ns,{store:$(i),class:"grid grid-cols-1 gap-4 mt-4 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-6"},{default:Q(()=>[(C(!0),R(fe,null,Le(c.value.dataSource,f=>(C(),R("div",{class:"cursor-pointer",onClick:p=>l(f)},[m("div",fb,[m("div",pb,[z(pn,{ratio:16/9},{default:Q(()=>[z(mn,{class:"absolute inset-0",store:$(a).bind(f.thumbnail_path),alt:f.name},null,8,["store","alt"])]),_:2},1024),m("div",mb,[m("div",gb,re(f.episodeCountText),1)]),m("div",yb,[m("div",{class:"w-full h-[6px] bg-w-brand",style:dt({width:f.percent+"%"})},null,4)])]),f.hasUpdate?(C(),R("div",vb,bb)):be("",!0),m("div",wb,[m("div",xb,re(f.name),1),m("div",Sb,[pr(re(f.updated)+" ",1),Cb,f.episodeText?(C(),R(fe,{key:0},[m("p",$b,re(f.episodeText),1),Tb],64)):be("",!0),pr(" "+re(f.percent)+"% ",1)])])])],8,db))),256))]),_:1},8,["store"])])]),_:1},8,["store"]))}}),Pb=ue({__name:"mine",setup(e){return(r,t)=>(C(),R("div",null,"Mine Page"))}}),kb="modulepreload",Ab=function(e){return"/pc/"+e},tc={},ya=function(r,t,n){if(!t||t.length===0)return r();const s=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=Ab(i),i in tc)return;tc[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let u=s.length-1;u>=0;u--){const h=s[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":kb,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((u,h)=>{l.addEventListener("load",u),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>r())},Fi=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Bi(e,r,t,n){e.addEventListener?e.addEventListener(r,t,n):e.attachEvent&&e.attachEvent("on".concat(r),t)}function xn(e,r,t,n){e.removeEventListener?e.removeEventListener(r,t,n):e.detachEvent&&e.detachEvent("on".concat(r),t)}function Rh(e,r){const t=r.slice(0,r.length-1);for(let n=0;n<t.length;n++)t[n]=e[t[n].toLowerCase()];return t}function Mh(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");const r=e.split(",");let t=r.lastIndexOf("");for(;t>=0;)r[t-1]+=",",r.splice(t,1),t=r.lastIndexOf("");return r}function Ob(e,r){const t=e.length>=r.length?e:r,n=e.length>=r.length?r:e;let s=!0;for(let i=0;i<t.length;i++)n.indexOf(t[i])===-1&&(s=!1);return s}const Kn={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Fi?173:189,"=":Fi?61:187,";":Fi?59:186,"'":222,"[":219,"]":221,"\\":220},qt={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},xo={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Ze={16:!1,18:!1,17:!1,91:!1},Ie={};for(let e=1;e<20;e++)Kn["f".concat(e)]=111+e;let ke=[],Dn=null,Nh="all";const Gt=new Map,ss=e=>Kn[e.toLowerCase()]||qt[e.toLowerCase()]||e.toUpperCase().charCodeAt(0),Rb=e=>Object.keys(Kn).find(r=>Kn[r]===e),Mb=e=>Object.keys(qt).find(r=>qt[r]===e);function Lh(e){Nh=e||"all"}function Yn(){return Nh||"all"}function Nb(){return ke.slice(0)}function Lb(){return ke.map(e=>Rb(e)||Mb(e)||String.fromCharCode(e))}function Ib(){const e=[];return Object.keys(Ie).forEach(r=>{Ie[r].forEach(t=>{let{key:n,scope:s,mods:i,shortcut:o}=t;e.push({scope:s,shortcut:o,mods:i,keys:n.split("+").map(a=>ss(a))})})}),e}function Db(e){const r=e.target||e.srcElement,{tagName:t}=r;let n=!0;const s=t==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(r.type);return(r.isContentEditable||(s||t==="TEXTAREA"||t==="SELECT")&&!r.readOnly)&&(n=!1),n}function Fb(e){return typeof e=="string"&&(e=ss(e)),ke.indexOf(e)!==-1}function Bb(e,r){let t,n;e||(e=Yn());for(const s in Ie)if(Object.prototype.hasOwnProperty.call(Ie,s))for(t=Ie[s],n=0;n<t.length;)t[n].scope===e?t.splice(n,1).forEach(o=>{let{element:a}=o;return va(a)}):n++;Yn()===e&&Lh(r||"all")}function zb(e){let r=e.keyCode||e.which||e.charCode;const t=ke.indexOf(r);if(t>=0&&ke.splice(t,1),e.key&&e.key.toLowerCase()==="meta"&&ke.splice(0,ke.length),(r===93||r===224)&&(r=91),r in Ze){Ze[r]=!1;for(const n in qt)qt[n]===r&&(Ue[n]=!1)}}function Ih(e){if(typeof e>"u")Object.keys(Ie).forEach(s=>{Array.isArray(Ie[s])&&Ie[s].forEach(i=>bs(i)),delete Ie[s]}),va(null);else if(Array.isArray(e))e.forEach(s=>{s.key&&bs(s)});else if(typeof e=="object")e.key&&bs(e);else if(typeof e=="string"){for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];let[s,i]=t;typeof s=="function"&&(i=s,s=""),bs({key:e,scope:s,method:i,splitKey:"+"})}}const bs=e=>{let{key:r,scope:t,method:n,splitKey:s="+"}=e;Mh(r).forEach(o=>{const a=o.split(s),c=a.length,l=a[c-1],u=l==="*"?"*":ss(l);if(!Ie[u])return;t||(t=Yn());const h=c>1?Rh(qt,a):[],f=[];Ie[u]=Ie[u].filter(p=>{const y=(n?p.method===n:!0)&&p.scope===t&&Ob(p.mods,h);return y&&f.push(p.element),!y}),f.forEach(p=>va(p))})};function rc(e,r,t,n){if(r.element!==n)return;let s;if(r.scope===t||r.scope==="all"){s=r.mods.length>0;for(const i in Ze)Object.prototype.hasOwnProperty.call(Ze,i)&&(!Ze[i]&&r.mods.indexOf(+i)>-1||Ze[i]&&r.mods.indexOf(+i)===-1)&&(s=!1);(r.mods.length===0&&!Ze[16]&&!Ze[18]&&!Ze[17]&&!Ze[91]||s||r.shortcut==="*")&&(r.keys=[],r.keys=r.keys.concat(ke),r.method(e,r)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function nc(e,r){const t=Ie["*"];let n=e.keyCode||e.which||e.charCode;if(!Ue.filter.call(this,e))return;if((n===93||n===224)&&(n=91),ke.indexOf(n)===-1&&n!==229&&ke.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach(a=>{const c=xo[a];e[a]&&ke.indexOf(c)===-1?ke.push(c):!e[a]&&ke.indexOf(c)>-1?ke.splice(ke.indexOf(c),1):a==="metaKey"&&e[a]&&ke.length===3&&(e.ctrlKey||e.shiftKey||e.altKey||(ke=ke.slice(ke.indexOf(c))))}),n in Ze){Ze[n]=!0;for(const a in qt)qt[a]===n&&(Ue[a]=!0);if(!t)return}for(const a in Ze)Object.prototype.hasOwnProperty.call(Ze,a)&&(Ze[a]=e[xo[a]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(ke.indexOf(17)===-1&&ke.push(17),ke.indexOf(18)===-1&&ke.push(18),Ze[17]=!0,Ze[18]=!0);const s=Yn();if(t)for(let a=0;a<t.length;a++)t[a].scope===s&&(e.type==="keydown"&&t[a].keydown||e.type==="keyup"&&t[a].keyup)&&rc(e,t[a],s,r);if(!(n in Ie))return;const i=Ie[n],o=i.length;for(let a=0;a<o;a++)if((e.type==="keydown"&&i[a].keydown||e.type==="keyup"&&i[a].keyup)&&i[a].key){const c=i[a],{splitKey:l}=c,u=c.key.split(l),h=[];for(let f=0;f<u.length;f++)h.push(ss(u[f]));h.sort().join("")===ke.sort().join("")&&rc(e,c,s,r)}}function Ue(e,r,t){ke=[];const n=Mh(e);let s=[],i="all",o=document,a=0,c=!1,l=!0,u="+",h=!1,f=!1;for(t===void 0&&typeof r=="function"&&(t=r),Object.prototype.toString.call(r)==="[object Object]"&&(r.scope&&(i=r.scope),r.element&&(o=r.element),r.keyup&&(c=r.keyup),r.keydown!==void 0&&(l=r.keydown),r.capture!==void 0&&(h=r.capture),typeof r.splitKey=="string"&&(u=r.splitKey),r.single===!0&&(f=!0)),typeof r=="string"&&(i=r),f&&Ih(e,i);a<n.length;a++)e=n[a].split(u),s=[],e.length>1&&(s=Rh(qt,e)),e=e[e.length-1],e=e==="*"?"*":ss(e),e in Ie||(Ie[e]=[]),Ie[e].push({keyup:c,keydown:l,scope:i,mods:s,shortcut:n[a],method:t,key:n[a],splitKey:u,element:o});if(typeof o<"u"&&window){if(!Gt.has(o)){const p=function(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return nc(y,o)},g=function(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;nc(y,o),zb(y)};Gt.set(o,{keydownListener:p,keyupListenr:g,capture:h}),Bi(o,"keydown",p,h),Bi(o,"keyup",g,h)}if(!Dn){const p=()=>{ke=[]};Dn={listener:p,capture:h},Bi(window,"focus",p,h)}}}function Hb(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Ie).forEach(t=>{Ie[t].filter(s=>s.scope===r&&s.shortcut===e).forEach(s=>{s&&s.method&&s.method()})})}function va(e){const r=Object.values(Ie).flat();if(r.findIndex(n=>{let{element:s}=n;return s===e})<0){const{keydownListener:n,keyupListenr:s,capture:i}=Gt.get(e)||{};n&&s&&(xn(e,"keyup",s,i),xn(e,"keydown",n,i),Gt.delete(e))}if((r.length<=0||Gt.size<=0)&&(Object.keys(Gt).forEach(s=>{const{keydownListener:i,keyupListenr:o,capture:a}=Gt.get(s)||{};i&&o&&(xn(s,"keyup",o,a),xn(s,"keydown",i,a),Gt.delete(s))}),Gt.clear(),Object.keys(Ie).forEach(s=>delete Ie[s]),Dn)){const{listener:s,capture:i}=Dn;xn(window,"focus",s,i),Dn=null}}const zi={getPressedKeyString:Lb,setScope:Lh,getScope:Yn,deleteScope:Bb,getPressedKeyCodes:Nb,getAllKeyCodes:Ib,isPressed:Fb,filter:Db,trigger:Hb,unbind:Ih,keyMap:Kn,modifier:qt,modifierMap:xo};for(const e in zi)Object.prototype.hasOwnProperty.call(zi,e)&&(Ue[e]=zi[e]);if(typeof window<"u"){const e=window.hotkeys;Ue.noConflict=r=>(r&&window.hotkeys===Ue&&(window.hotkeys=e),Ue),window.hotkeys=Ue}function Ub(e,r){e.onloadstart=()=>{console.log("[COMPONENT]VideoPlayer/connect - 1. $video.onloadstart"),r.handleStartLoad()},e.onloadedmetadata=function(n){console.log("[COMPONENT]VideoPlayer/connect - 2. $video.onloadedmetadata",e.duration);const s=this.videoWidth,i=this.videoHeight;r.handleLoadedmetadata({width:s,height:i,duration:e.duration})},e.onload=()=>{console.log("[COMPONENT]VideoPlayer/connect - 3. $video.onload"),r.handleLoad()},e.oncanplay=n=>{console.log("[COMPONENT]VideoPlayer/connect - 4. $video.oncanplay"),r.handleCanPlay({duration:e.duration})},e.onplay=()=>{console.log("[COMPONENT]VideoPlayer/connect - $video.onplay"),r.handlePlay()},e.onplaying=()=>{console.log("[COMPONENT]VideoPlayer/connect - $video.onplaying"),r.handlePlaying()},e.ontimeupdate=n=>{const{currentTime:s,duration:i}=n.currentTarget;r.handleTimeUpdate({currentTime:s,duration:i})},e.onpause=n=>{console.log("[COMPONENT]VideoPlayer/connect - $video.onpause");const{currentTime:s,duration:i}=n.currentTarget;r.handlePause({currentTime:s,duration:i})},e.onwaiting=()=>{console.log("[COMPONENT]VideoPlayer/connect - 5. $video.onwaiting")},e.onended=()=>{console.log("[COMPONENT]VideoPlayer/connect - 6. $video.onended"),r.handleEnded()},e.onvolumechange=n=>{const{volume:s}=n.currentTarget,i=s;r._curVolume!==i&&r.handleVolumeChange(i)},e.onresize=()=>{const{videoHeight:n,videoWidth:s}=e;r.handleResize({width:s,height:n})},e.onerror=n=>{console.log("[COMPONENT]VideoPlayer/connect - 7. $video.onerror");const s=(()=>{var o,a;if(typeof n=="string")return new Error(n);const i=(a=(o=n.target)==null?void 0:o.error)==null?void 0:a.code;return i===MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED?new Error("不支持的视频格式"):i===MediaError.MEDIA_ERR_DECODE?new Error("视频解码错误"):i===MediaError.MEDIA_ERR_ABORTED?new Error("视频加载中止"):new Error("unknown")})();r.handleError(s.message)},e.addEventListener("webkitstartfullscreen",()=>{r.handleFullscreenChange(!0)}),e.addEventListener("webkitendfullscreen",()=>{r.handleFullscreenChange(!1)});const t=document.createElement("canvas");r.screenshot=()=>{t.width=e.width,t.height=e.height;const n=t.getContext("2d");if(!n)return b.Err("getContext 失败");n.drawImage(e,0,0,t.width,t.height);const s=t.toDataURL("image/png");return b.Ok(s.split(",")[1])},r.bindAbstractNode({$node:e,async play(){try{await e.play()}catch(n){console.log(n)}},pause(){e.pause()},canPlayType(n){return!!e.canPlayType(n)},async load(n){if(console.log("[DOMAIN]player/connect - load",n,!!e.canPlayType("application/vnd.apple.mpegurl")),e.canPlayType("application/vnd.apple.mpegurl")){e.src=n,e.load();return}const i=(await ya(()=>import("./hls-c9ab3393.js"),[])).default;if(i.isSupported()&&n.includes("m3u8")){const o=new i({fragLoadingTimeOut:2e3});o.attachMedia(e),o.on(i.Events.MEDIA_ATTACHED,()=>{o.loadSource(n)});return}e.src=n,e.load()},setCurrentTime(n){e.currentTime=n},setVolume(n){e.volume=n},setRate(n){e.playbackRate=n},enableFullscreen(){e.removeAttribute("webkit-playsinline"),e.removeAttribute("playsinline")},disableFullscreen(){e.setAttribute("webkit-playsinline","true"),e.setAttribute("playsinline","true")},requestFullscreen(){e.requestFullscreen&&e.requestFullscreen(),e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),e.mozRequestFullScreen&&e.mozRequestFullScreen(),e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullscreen(){console.log("no")},showSubtitle(){e.textTracks[0]&&(e.textTracks[0].mode="showing")},hideSubtitle(){e.textTracks[0]&&(e.textTracks[0].mode="hidden")},showAirplay(){if(e.webkitShowPlaybackTargetPicker){e.webkitShowPlaybackTargetPicker();return}alert("AirPlay not supported.")},pictureInPicture(){if(e.webkitSetPresentationMode){e.webkitSetPresentationMode("picture-in-picture");return}alert("Picture-in-Picture not supported.")}})}const jb=["poster","height"],qb=["src","label","srcLang"],Dh=ue({__name:"Video",props:{store:{}},setup(e){const{store:r}=e,t=ie(null),n=ie(r.state);return r.onStateChange(s=>{n.value=s}),_t(()=>{const s=t.value;console.log("[COMPONENT]Video - onMounted",s),s!==null&&(r.setMounted(),Ub(s,r))}),(s,i)=>(C(),R("video",{ref_key:"videoRef",ref:t,class:"w-full",poster:n.value.poster,height:n.value.height,controls:!1,preload:"none"},[n.value.subtitle?(C(),R("track",{key:0,src:n.value.subtitle.src,kind:"captions",label:n.value.subtitle.label,srcLang:n.value.subtitle.lang},null,8,qb)):be("",!0)],8,jb))}}),Vb={class:"w-[72px] text-xl"},Wb=m("div",{class:"progress__mask absolute top-1/2 left-0 w-full bg-w-fg-3 rounded-sm",style:{height:"12px",transform:"translateY(-50%)"}},null,-1),Gb={class:"text-xl"},Sr=6,Fh=ue({__name:"index",props:{app:{},store:{},class:{}},setup(e){const r=e,{app:t,store:n}=r;function s(l){const{store:u}=l,h={current:!1},f={current:null},p={current:null},g={current:{width:0,left:0}},y={current:0},S={current:0},x={current:null},P={current:!1},J={current:0},H={current:0},V={current:-6},W=new et;let T;(M=>{M[M.Change=0]="Change"})(T||(T={}));const N=vu();return{$time:W,leftRef:V,barRef:p,cursorRef:f,handleTouchStart(M){M.stopPropagation(),console.log("[COMPONENT]onTouchStart");const U=(()=>M.touches?M.touches[0]:{clientX:M.clientX})();h.current=!0,u.startAdjustCurrentTime(),u.pause();const Z=U.clientX,te=g.current,j=Z-te.left,L=U.clientX-te.left;J.current=Z,H.current=j,S.current=new Date().valueOf(),x.current=setTimeout(function(){x.current!==null&&(console.log("long press"),h.current=!0,P.current||(P.current=!0,W.show()),H.current=L)},200);const k=p.current,G=f.current;k&&(k.style.width=L+"px"),G&&(V.current=L-Sr,G.style.left=L-Sr+"px")},handleTouchMove(M){if(M.stopPropagation(),h.current===!1)return;const U=(()=>M.touches?M.touches[0]:{clientX:M.clientX})(),Z=U.clientX-J.current+H.current,te=g.current;if(Z<0||Z>te.width)return;const j=U.clientX-te.left,L=j/te.width;y.current=Z;const k=p.current,G=f.current;k&&(k.style.width=j+"px"),G&&(V.current=j-Sr,G.style.left=j-Sr+"px"),xr(L*u._duration)},handleTouchEnd(M){if(M.stopPropagation(),h.current=!1,x.current&&(clearTimeout(x.current),x.current=null),new Date().valueOf()-S.current<=200){const L=H.current/g.current.width*u._duration;u.adjustCurrentTime(L);return}P.current&&(W.hide(),P.current=!1),H.current=y.current;const te=H.current/g.current.width*u._duration;u.adjustCurrentTime(te)},handleAnimationEnd(M){const{currentTarget:U}=M,Z=U.getBoundingClientRect();g.current={width:Z.width,left:Z.left};const te=u.currentTime/u._duration*Z.width,j=p.current,L=f.current;j&&(j.style.width=te+"px"),L&&(L.style.left=te-Sr+"px")},ready(){const M=u.onProgress(te=>{const j=g.current;if(j&&j.width){const L=Math.floor(u.currentTime/u._duration*j.width),k=p.current,G=f.current;k&&(k.style.width=L+"px"),G&&(G.style.left=L-Sr+"px")}N.emit(0,{currentTime:xr(te.currentTime),duration:xr(te.duration)})});function U(){const te=g.current;if(!te)return;const j=u.currentTime/u._duration*te.width,L=p.current,k=f.current;L&&(L.style.width=j+"px"),k&&(k.style.left=j-Sr+"px"),N.emit(0,{currentTime:xr(u.currentTime),duration:xr(u._duration)})}const Z=u.onCanPlay(()=>{U()});return U(),()=>{M(),Z()}},onChange(M){return N.on(0,M)}}}const i=s({store:n}),o=ie(null),a=ie(null),c=ie({currentTime:xr(n._currentTime),duration:xr(n._duration)});return _t(()=>{const l=o.value,u=a.value;i.barRef.current=l,i.cursorRef.current=u,i.onChange(h=>{c.value=h}),i.ready()}),Lr(()=>{}),(l,u)=>(C(),R("div",{class:"flex items-center user-select-none",onMousedown:u[1]||(u[1]=(...h)=>$(i).handleTouchStart&&$(i).handleTouchStart(...h)),onMousemove:u[2]||(u[2]=(...h)=>$(i).handleTouchMove&&$(i).handleTouchMove(...h)),onMouseup:u[3]||(u[3]=(...h)=>$(i).handleTouchEnd&&$(i).handleTouchEnd(...h))},[m("div",Vb,re(c.value.currentTime),1),m("div",{class:"__a relative mx-4 w-full bg-gray-300 cursor-pointer rounded-md",onAnimationend:u[0]||(u[0]=(...h)=>$(i).handleAnimationEnd&&$(i).handleAnimationEnd(...h))},[Wb,m("div",{ref_key:"barRef",ref:o,class:"progress__bar absolute top-1/2 left-0 bg-green-500",style:{width:"0px",height:"12px",transform:"translateY(-50%)"}},null,512),m("div",{ref_key:"cursorRef",ref:a,class:"progress__cursor absolute top-1/2",style:{left:"0px",width:"24px",height:"24px","border-radius":"50%","background-color":"#fff",transform:"translate(0px, -50%)"}},null,512)],32),m("div",Gb,re(c.value.duration),1)],32))}}),Jn=ue({__name:"Presence",props:{store:{},enterClassName:{},exitClassName:{},className:{}},setup(e){const{store:r,enterClassName:t,exitClassName:n,className:s}=e,i=ie(r.state),o=rt("presence",i.value.enter&&t?t:"",i.value.exit&&n?n:"",s);return r.onStateChange(a=>i.value=a),(a,c)=>i.value.mounted?(C(),R("div",{key:0,class:Ce($(o)),role:"presentation",style:dt({display:i.value.visible?"block":"none"})},[Se(a.$slots,"default")],6)):be("",!0)}}),Zr=ue({__name:"TipMenu",props:{store:{},className:{}},setup(e){const{store:r,className:t}=e;ie(r.state);const n=rt("z-50 rounded-md border bg-popover p-2 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","relative rounded-md bg-black shadow-lg focus:shadow-md focus:ring-2 focus:ring-violet-700",t);return(s,i)=>(C(),ge(bh,{store:s.store,"class-name":""},{default:Q(()=>[m("div",null,[z(wh,{"class-name":"inline-flex items-center justify-center",store:s.store},{default:Q(()=>[Se(s.$slots,"trigger")]),_:3},8,["store"]),z(Sh,{store:s.store,"class-name":""},{default:Q(()=>[z(Ch,{store:s.store,"class-name":$(n)},{default:Q(()=>[Se(s.$slots,"content")]),_:3},8,["store","class-name"])]),_:3},8,["store"])])]),_:3},8,["store"]))}}),Kb={class:"fixed inset-0 z-50 flex items-start justify-center sm:items-center"},Yb={class:Ce("fixed left-[50%] top-[30%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full bg-w-bg-0 border-w-bg-2")},Jb={class:"flex flex-col space-y-1.5 text-center sm:text-left"},Xb=ue({__name:"Dialog",props:{store:{},class:{}},setup(e){const r=e,{store:t}=r;return(n,s)=>(C(),R("div",null,[z(Jn,{store:$(t).present},{default:Q(()=>[m("div",Kb,[m("div",{class:Ce("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm transition-all duration-100 data-[state=open]:fade-in data-[state=closed]:animate-out data-[state=closed]:fade-out"),onClick:s[0]||(s[0]=(...i)=>$(t).hide&&$(t).hide(...i))}),m("div",Yb,[m("div",Jb,[Se(n.$slots,"default")])])])]),_:3},8,["store"])]))}});function Yt(e){if(e.match(/[0-9]{1,2}:[0-9]{2}:[0-9]{2}[\.,]/)){const r=e.split(":"),t=parseInt(r[0]),n=parseInt(r[1]),s=parseFloat(r[2].replace(",","."));return parseFloat((t*60*60+n*60+s).toFixed(2))}if(e.match(/[0-9]{2}:[0-9]{2}[\.,]/)){const r=e.split(":"),t=parseInt(r[0]),n=parseFloat(r[1].replace(",","."));return parseFloat((t*60+n).toFixed(2))}return 0}function sc(e){const r=e.match(/([0-9]{1,2})(:[0-9]{2}:[0-9]{2}[\.,])([0-9]{1,})/);if(!r)return e;const[,t,n,s]=r;return Vr(t)+n+Vr(s,{count:3,pos:2})}function Qb(e){if(!e)return"srt";const{pathname:r}=ju(e),t=r.split(".").pop();return t?t.toLowerCase():"srt"}const Zb={srt:e=>{if(!e)return[];let r=e.split(`\r
\r
`).filter(Boolean);return r.length===1&&(r=r[0].split(`

`).filter(Boolean)),r.map((t,n)=>{const s=(()=>{let[u,...h]=t.split(`\r
`).filter(Boolean);if(u&&u.includes("-->")){const[f,p]=u.split(" --> ");return[f,p,h]}if([u,...h]=h,u&&u.includes("-->")){const[f,p]=u.split(" --> ");return[f,p,h]}return null})();if(s===null)return null;const[i,o,a]=s,c=i.replace(/,/,"."),l=o.replace(/,/,".");return{start:c,end:l,startTime:Yt(c),endTime:Yt(l),texts:a}}).filter(Boolean).filter(t=>!(t===null||Math.abs(t.endTime-t.startTime)<.1)).map((t,n)=>{const{start:s,end:i,startTime:o,endTime:a,texts:c}=t;return{line:String(n),start:s,end:i,startTime:o,endTime:a,texts:c}})},vtt:e=>e?e.replace(/WEBVTT/,"").split(`

`).filter(Boolean).filter(n=>n!==`
`).map((n,s)=>{const[i,...o]=n.split(`
`).filter(Boolean),[a,c]=i.split(" --> "),l=a.split(",")[0],u=c.split(",")[0];return{start:l,end:u,startTime:Yt(l),endTime:Yt(u),texts:o}}).filter(n=>!(Math.abs(n.endTime-n.startTime)<.1)).map((n,s)=>{const{start:i,end:o,startTime:a,endTime:c,texts:l}=n;return{line:String(s),start:i,end:o,startTime:a,endTime:c,texts:l}}):[],ass:e=>{if(!e)return[];const r=e.match(/Dialogue:[^\n]{1,}\n{0,}/g);return r?r.map(t=>{const n=t.replace(/{[^}]{1,}}/g,""),[,s,i,o,a,c,l,u,h,...f]=n.split(","),[p="",g=""]=f.map(y=>y.replace(/\n$/,"")).join(",").split("\\N");return{start:s,end:i,startTime:Yt(s),endTime:Yt(i),texts:[p,g].filter(Boolean)}}).filter(t=>!(Math.abs(t.endTime-t.startTime)<.1)).map((t,n)=>{const{start:s,end:i,startTime:o,endTime:a,texts:c}=t;return{line:String(n),start:s,end:i,startTime:o,endTime:a,texts:c}}):[]}};function ew(e,r){const t=Zb[r];return t?t(e):[{line:"1",start:"",startTime:0,end:"",endTime:0,texts:[e]}]}const tw={[je.CN]:"简体中文",[je.TW]:"繁体中文",[je.JP]:"日语",[je.US]:"英语","chi&eng":"中英对照"},rw={[je.CN]:"zh",[je.TW]:"zh",[je.JP]:"ja",[je.US]:"en","chi&eng":"zh"};function Bh(e){const{lines:r}=e,t=["WEBVTT","",...r.map((i,o)=>{const{start:a,end:c,texts:l}=i;return[`${sc(a)} --> ${sc(c)}`,...l].join(`
`)})].join(`\r
\r
`),n=new Blob([t],{type:"text/vtt"});return{src:URL.createObjectURL(n),label:e.lang?tw[e.lang.join("&")]:e.filename,lang:(()=>e.lang&&rw[e.lang.join("&")]||"zh")()}}var So=(e=>(e[e.LocalFile=1]="LocalFile",e[e.AliyundriveFile=2]="AliyundriveFile",e[e.MediaInnerFile=3]="MediaInnerFile",e))(So||{});class _a extends $e{constructor(t){super(t);d(this,"filename","");d(this,"lang");d(this,"suffix");d(this,"files",[]);d(this,"lines",[]);d(this,"targetLine");d(this,"curLine",null);d(this,"curLineIndex",null);d(this,"curTime",0);d(this,"baseStep",0);const{filename:n,lines:s,suffix:i,language:o}=t;this.filename=n,this.lines=s,this.suffix=i,this.lang=o,this.targetLine=s[0]}static async New(t,n){const{id:s,name:i,type:o,url:a,language:c}=t,{client:l}=n,u=await(async()=>{if(o===So.MediaInnerFile){const S=await(async()=>{try{const x=await l.fetch({url:a,method:"GET"});return b.Ok(x.data)}catch(x){const P=x;return b.Err(P.message)}})();return S.error?b.Err(S.error):b.Ok({name:i,content:S.data})}if(o===So.LocalFile)try{const S=await l.fetch({url:[De.getHostname(),a].join(""),method:"GET"});return b.Ok({name:i,content:S.data})}catch(S){const x=S;return b.Err(x.message)}return b.Err("未知字幕类型")})();if(u.error)return b.Err(u.error);const{content:h,name:f}=u.data,p=Qb(f),g=ew(h,p),y=new _a({filename:f,language:c,suffix:p,lines:g});return n.currentTime&&y.handleTimeChange(n.currentTime),b.Ok(y)}get state(){return{curLine:this.curLine}}changeTargetLine(t){let n=this.lines.find(s=>{const{start:i,end:o}=s,a=Yt(i),c=Yt(o);return t>a&&t<=c});n||(n=this.lines.find(s=>{const{start:i,end:o}=s,a=Yt(i);return t<a})),n&&(this.targetLine=n)}handleTimeChange(t){if(Math.abs(t-this.curTime)>=1&&(this.curLine=null,this.curLineIndex=null,this.emit(0,{...this.state}),this.changeTargetLine(t)),this.curTime=t,!this.targetLine)return;const n=this.curLineIndex,{startTime:s,endTime:i}=this.targetLine,o=s+this.baseStep,a=i+this.baseStep;(()=>{if(this.curLine&&t>this.curLine.endTime&&(this.curLineIndex=null),t>o&&t<=a){this.curLineIndex=this.lines.findIndex(c=>c===this.targetLine),this.targetLine=this.lines[this.curLineIndex+1]??null;return}})(),n!==this.curLineIndex&&((()=>{if(this.curLineIndex===null){this.curLine=null;return}this.curLine=this.lines[this.curLineIndex]})(),this.emit(0,{...this.state}))}increase(t){this.baseStep+=t}subtract(t){this.baseStep-=t}onStateChange(t){return this.on(0,t)}}function nw(e){return De.post("/api/v2/wechat/source",{id:e.id,type:e.type})}function sw(e){if(e.error)return b.Err(e.error);const{id:r,url:t,width:n,height:s,thumbnail_path:i,type:o,invalid:a,other:c,subtitles:l}=e.data;return b.Ok({id:r,url:t,type:o,typeText:_o[o],width:n,height:s,invalid:a,thumbnailPath:i,resolutions:c.map(u=>{const{cur:h,url:f,width:p,height:g,type:y}=u;return{cur:h,url:f,type:y,typeText:_o[u.type],width:p,height:g}}),subtitles:l})}class zh extends $e{constructor(t){super();d(this,"profile",null);d(this,"curResolution",gr.SD);d(this,"subtitle",null);d(this,"subtitles",[]);d(this,"loading",!1);d(this,"$subtitle",null);d(this,"$client");const{client:n,resolution:s=gr.SD}=t;this.$client=n,this.curResolution=s}get state(){return{resolution:this.curResolution}}async load(t){const s=await new Ee(nw,{process:sw,client:this.$client}).run({id:t.id,type:this.curResolution});if(s.error)return this.tip({text:["获取影片详情失败",s.error.message]}),this.profile={id:t.id,invalid:1,url:"",type:this.curResolution,typeText:"",width:0,height:0,thumbnailPath:"",resolutions:[],subtitles:[]},this.emit(2,{...this.state}),b.Err(s.error);const{url:i,thumbnailPath:o,typeText:a,type:c,width:l,height:u,resolutions:h,subtitles:f}=s.data;return this.curResolution=c,this.profile={id:t.id,url:i,type:c,typeText:a,invalid:0,width:l,height:u,thumbnailPath:o,resolutions:h,subtitles:f},this.emit(2,{...this.state}),b.Ok(this.profile)}changeResolution(t){if(this.profile===null){const f=this.tip({text:["视频还未加载完成"]});return b.Err(f)}const{id:n,resolutions:s,subtitles:i,thumbnailPath:o}=this.profile;if(this.curResolution===t){const f=this.tip({text:[`当前已经是${_o[t]}了`]});return b.Err(f)}this.curResolution=t;const a=s.find(f=>f.type===t);if(!a){const f=this.tip({text:[`没有 '${t}' 分辨率`]});return b.Err(f)}const{url:c,typeText:l,width:u,height:h}=a;return this.profile={id:n,url:c,type:t,typeText:l,invalid:0,width:u,height:h,resolutions:s,subtitles:i,thumbnailPath:o},this.emit(2,{...this.state}),b.Ok(this.profile)}async loadSubtitle(t){const{extraSubtitleFiles:n,currentTime:s}=t;if(!this.profile)return b.Err("请先调用 load 获取视频文件");const i=n.concat(this.profile.subtitles).filter(Boolean);this.subtitles=i,console.log("[DOMAIN]tv/index - loadSubtitle2 ",i);const o=(()=>{const a=i.find(l=>l.language.join("&")===[je.CN,je.US].join("&"));if(a)return a;const c=i.find(l=>l.language.join("&")===je.CN);return c||(i[0]??null)})();return o?this.loadSubtitleFile(o,s):b.Err("没有可加载的字幕文件")}async loadSubtitleFile(t,n){var a;if(t.url===((a=this.subtitle)==null?void 0:a.url))return b.Err("已经是当前字幕了");this.$subtitle&&this.$subtitle.destroy(),this.$subtitle=null;const s=await _a.New(t,{currentTime:n,client:this.$client});if(s.error)return b.Err("实例化字幕失败");this.$subtitle=s.data;const{curLine:i}=s.data,o={url:t.url,visible:!0,index:(i==null?void 0:i.line)??"0",texts:(i==null?void 0:i.texts)??[]};return this.subtitle=o,console.log("[DOMAIN]movie/index - before emit Events.SubtitleChange",this.subtitle),this.emit(4,this.$subtitle),this.emit(3,{...o}),this.$subtitle.onStateChange(c=>{const{curLine:l}=c,u={url:t.url,visible:!0,index:(l==null?void 0:l.line)??"0",texts:(l==null?void 0:l.texts)??[]};this.subtitle=u,this.emit(3,{...u})}),b.Ok(null)}toggleSubtitleVisible(){if(this.subtitle){if(this.subtitle.visible){this.hideSubtitle();return}this.showSubtitle()}}hideSubtitle(){this.subtitle&&(this.subtitle.visible=!1,this.emit(3,{...this.subtitle}))}showSubtitle(){this.subtitle&&(this.subtitle.visible=!0,this.emit(3,{...this.subtitle}))}onSourceChange(t){return this.on(0,t)}onSubtitleChange(t){return this.on(3,t)}onSubtitleLoaded(t){return this.on(4,t)}onResolutionChange(t){return this.on(1,t)}onStateChange(t){return this.on(2,t)}}class iw extends $e{constructor(t){super();d(this,"profile",null);d(this,"sourceGroups",[]);d(this,"curSource",null);d(this,"curGroup",null);d(this,"currentTime",0);d(this,"curResolutionType",gr.SD);d(this,"playing",!1);d(this,"_pending",!1);d(this,"$source");d(this,"$client");d(this,"$update");d(this,"updatePlayProgress",ow(10*1e3,(t={})=>{this.updatePlayProgressForce(t)}));d(this,"_pause",Qo(800,()=>{this.playing=!1}));const{client:n,resolution:s=gr.SD}=t;this.curResolutionType=s,this.$client=n,this.$source=new zh({resolution:s,client:n}),this.$update=new Ee(kh,{client:n})}get state(){return{playing:this.playing,profile:this.profile,curSource:this.curSource,groups:this.sourceGroups,curGroup:this.curGroup}}async fetchProfile(t){if(t===void 0){const f=this.tip({text:["缺少季 id 参数"]});return b.Err(f)}const s=await new Ee(Th,{process:Eh,client:this.$client}).run({media_id:t,type:we.Season});if(s.error){const f=this.tip({text:["获取电视剧详情失败",s.error.message]});return b.Err(f)}const{id:i,name:o,overview:a,sourceCount:c,posterPath:l,curSource:u,sourceGroups:h}=s.data;if(u===null){const f=this.tip({text:["该电视剧尚未收录影片"]});return b.Err(f)}return this.profile={id:i,name:o,overview:a,posterPath:l},this.sourceGroups=h,this.curGroup=h.find(f=>f.cur)??null,this.emit(0,{profile:this.profile,curSource:u}),this.emit(7,{...this.state}),b.Ok({...this.state})}fetchSeries(t){p0({media_id:t})}async playEpisode(t,n){const{currentTime:s=0}=n;console.log("[DOMAIN]media/season - playEpisode",t,this.curSource);const{id:i,files:o}=t;if(this.curSource&&i===this.curSource.id)return this.tip({text:["已经是该剧集了"]}),b.Ok(this.curSource);if(o.length===0){const l=this.tip({text:["该剧集缺少视频源"]});return b.Err(l)}const a=(()=>{if(t.curFileId){const l=o.find(u=>u.id===t.curFileId);if(l)return l}return o[0]})();this.curSource={...t,currentTime:s,thumbnailPath:t.stillPath,curFileId:a.id};const c=await this.$source.load(a);return c.error?(this.tip({text:[c.error.message]}),b.Err(c.error)):(this.currentTime=s,this.curSource={...t,currentTime:s,thumbnailPath:t.stillPath,curFileId:a.id},(async()=>{const l=await this.$source.loadSubtitle({extraSubtitleFiles:t.subtitles,currentTime:s});if(l.error){console.log("[DOMAIN]media/season - loadSubtitle failed ",l.error.message);return}})(),this.emit(3,{...c.data,currentTime:s}),this.emit(7,{...this.state}),b.Ok(this.curSource))}switchEpisode(t){return this.playEpisode(t,{currentTime:0})}async getNextEpisode(){if(this.profile===null||this.curSource===null||!this.curGroup)return b.Err("请先调用 fetchProfile 方法");const t=this.curSource,n=this.curGroup,s=this.sourceGroups.findIndex(h=>h.text===n.text),i=n.list.findIndex(h=>h.id===t.id);if(i===-1)return b.Err("在剧集组里没有找到当前剧集");if(!(i===n.list.length-1)){let h=n.list[i+1];if(h.id||(h=n.list[i+2]),h)return b.Ok(h)}if(s===this.sourceGroups.length-1)return b.Err("已经是最后一集了");const a=this.sourceGroups[s+1];if(!a)return b.Err("已经是最后一集了2");const l=await new Ee(Zl,{process:ec,client:this.$client}).run({media_id:a.media_id,start:a.start,end:a.end});if(l.error)return b.Err(l.error);if(l.data.length===0)return b.Err("已经是最后一集了3");a.list=l.data,n.cur=!1,a.cur=!0;const u=a.list[0];return b.Ok(u)}prepareNextEpisode(){}async playNextEpisode(){if(this._pending){const s=this.tip({text:["正在加载..."]});return b.Err(s)}this.emit(4),this._pending=!0;const t=await this.getNextEpisode();if(this._pending=!1,t.error){const s=this.tip({text:[t.error.message]});return b.Err(s)}const n=t.data;return n===null?b.Err("没有找到可播放剧集"):(await this.playEpisode(n,{currentTime:0}),b.Ok(null))}async fetchEpisodeOfGroup(t){if(this.profile===null){const o=this.tip({text:["请先调用 fetchProfile"]});return b.Err(o)}const n=this.sourceGroups.find(o=>o.start===t.start&&o.end===t.end);if(!n){const o=this.tip({text:["参数错误"]});return b.Err(o)}const i=await new Ee(Zl,{process:ec,client:this.$client}).run({media_id:this.profile.id,start:n.start,end:n.end});return i.error?b.Err(i.error):i.data.length===0?b.Err("没有剧集"):(this.curGroup&&(this.curGroup.cur=!1),n.list=i.data,n.cur=!0,this.curGroup=n,this.emit(7,{...this.state}),b.Ok(null))}async changeSourceFile(t){if(this.profile===null){const s=this.tip({text:["视频还未加载完成"]});return b.Err(s)}if(this.curSource===null){const s=this.tip({text:["视频还未加载完成"]});return b.Err(s)}const n=await this.$source.load({id:t.id});return this.curSource.curFileId=t.id,n.error?(this.tip({text:[n.error.message]}),b.Err(n.error)):(this.emit(3,{...n.data,currentTime:this.currentTime}),b.Ok(null))}changeResolution(t){if(this.profile===null){const i=this.tip({text:["视频还未加载完成"]});return b.Err(i)}const n=this.$source.changeResolution(t);if(n.error){const i=this.tip({text:[n.error.message]});return b.Err(i)}const s=n.data;return this.emit(3,{...s,currentTime:this.currentTime}),b.Ok(s)}setCurrentTime(t){this.currentTime=t}setCurResolution(t){this.curResolutionType=t}markFileInvalid(t){!this.curSource||!this.curSource.files.find(s=>s.id===t)||(this.curSource.files=this.curSource.files.map(s=>s.id===t?{...s,invalid:!0}:s))}screenshot(){return b.Err("请实现 screenshot 方法")}updatePlayProgressForce(t={}){const{currentTime:n=this.currentTime,duration:s=0}=t;if(console.log("[DOMAIN]media/season - update_play_progress",n,this.profile,this.curSource,this.$source.profile),this.profile===null||this.curSource===null||this.$source.profile===null)return;const i=(()=>{const o=this.screenshot();return o.data?o.data:""})();this.$update.run({media_id:this.profile.id,media_source_id:this.curSource.id,current_time:parseFloat(n.toFixed(2)),duration:parseFloat(s.toFixed(2)),thumbnail:i,source_id:this.$source.profile.id})}handleCurTimeChange(t){var s,i;this.playing=!0,this._pause();const{currentTime:n=0}=t;this.currentTime=n,(s=this.$source.subtitle)!=null&&s.visible&&((i=this.$source.$subtitle)==null||i.handleTimeChange(n)),this.updatePlayProgress(t)}getTitle(){if(this.profile&&this.curSource){const{name:t}=this.curSource,{name:n}=this.profile;return[t,n]}if(this.profile){const{name:t}=this.profile;return[t]}return[]}onSourceFileChange(t){return this.on(3,t)}onProfileLoaded(t){return this.on(0,t)}onEpisodeChange(t){return this.on(1,t)}onStateChange(t){return this.on(7,t)}onBeforeNextEpisode(t){return this.on(4,t)}onBeforePrevEpisode(t){return this.on(5,t)}onBeforeChangeSource(t){return this.on(6,t)}}function ow(e,r){let t=!0;return setInterval(()=>{t=!0},e),(...n)=>{t!==!1&&(r(...n),t=!1)}}const Hh=[.5,.75,1,1.25,1.5,2];var Uh=(e=>(e[e.Mounted=0]="Mounted",e[e.UrlChange=1]="UrlChange",e[e.CurrentTimeChange=2]="CurrentTimeChange",e[e.BeforeAdjustCurrentTime=3]="BeforeAdjustCurrentTime",e[e.TargetTimeChange=4]="TargetTimeChange",e[e.AfterAdjustCurrentTime=5]="AfterAdjustCurrentTime",e[e.ResolutionChange=6]="ResolutionChange",e[e.VolumeChange=7]="VolumeChange",e[e.DurationChange=8]="DurationChange",e[e.RateChange=9]="RateChange",e[e.SizeChange=10]="SizeChange",e[e.Preload=11]="Preload",e[e.Ready=12]="Ready",e[e.Loaded=13]="Loaded",e[e.SourceLoaded=14]="SourceLoaded",e[e.CanPlay=15]="CanPlay",e[e.Play=16]="Play",e[e.Progress=17]="Progress",e[e.Pause=18]="Pause",e[e.BeforeLoadStart=19]="BeforeLoadStart",e[e.BeforeEnded=20]="BeforeEnded",e[e.CanSetCurrentTime=21]="CanSetCurrentTime",e[e.End=22]="End",e[e.Resize=23]="Resize",e[e.ExitFullscreen=24]="ExitFullscreen",e[e.Error=25]="Error",e[e.StateChange=26]="StateChange",e))(Uh||{});class ba extends $e{constructor(t){super();d(this,"metadata",null);d(this,"$app");d(this,"_timer",null);d(this,"_canPlay",!1);d(this,"_ended",!1);d(this,"_duration",0);d(this,"_currentTime",0);d(this,"_curVolume",.5);d(this,"_curRate",1);d(this,"theTimeSkip",0);d(this,"playing",!1);d(this,"poster");d(this,"subtitle",null);d(this,"_mounted",!1);d(this,"_target_current_time",0);d(this,"_subtitleVisible",!1);d(this,"prepareFullscreen",!1);d(this,"_progress",0);d(this,"virtualProgress",0);d(this,"errorMsg","");d(this,"_passPoint",!1);d(this,"_size",{width:0,height:0});d(this,"_abstractNode",null);d(this,"bindAbstractNode",t=>{this._abstractNode=t,this._abstractNode&&(this.pendingRate&&(this.changeRate(this.pendingRate),this.pendingRate=null),this._abstractNode.setVolume(this._curVolume))});d(this,"getNode",()=>this._abstractNode?this._abstractNode.$node:null);d(this,"hasPlayed",!1);d(this,"play",()=>{console.log("[DOMAIN]player/index - play",this._abstractNode,this.playing),this._abstractNode!==null&&(this.playing||(this._abstractNode.play(),this.hasPlayed=!0,this._abstractNode.setRate(this._curRate),this.playing=!0,this.emit(26,{...this.state})))});d(this,"pause",()=>{this._abstractNode!==null&&(this._abstractNode.pause(),this.playing=!1,this.emit(26,{...this.state}))});d(this,"changeVolume",t=>{this._abstractNode!==null&&(this._curVolume=t,this._abstractNode.setVolume(t),this.emit(7,{volume:t}))});d(this,"pendingRate",null);d(this,"changeRate",t=>{if(this._abstractNode===null){this.pendingRate=t;return}this._curRate=t,this._abstractNode.setRate(t),this.emit(9,{rate:t})});d(this,"tmpRate",null);d(this,"changeRateTmp",t=>{this._abstractNode!==null&&(this.tmpRate=t,this._abstractNode.setRate(t))});d(this,"recoverRate",()=>{this.tmpRate!==null&&this._abstractNode!==null&&(this.tmpRate=null,this._abstractNode.setRate(this._curRate))});d(this,"changeSkipTime",t=>{this.theTimeSkip=t,this.emit(26,{...this.state})});d(this,"showAirplay",()=>{this._abstractNode!==null&&this._abstractNode.showAirplay()});d(this,"pictureInPicture",()=>{this._abstractNode!==null&&this._abstractNode.pictureInPicture()});d(this,"toggleSubtitle",()=>{this._subtitleVisible=!this._subtitleVisible});d(this,"setPoster",t=>{t!==null&&(this.poster=t,this.emit(26,{...this.state}))});d(this,"setCurrentTime",(t=0)=>{console.log("[DOMAIN]player/index - setCurrentTime",this._abstractNode,t),this._abstractNode!==null&&(this._currentTime=t||0,this._abstractNode.setCurrentTime(t||0))});d(this,"speedUp",(t=10)=>{let n=this._currentTime+t;this._duration&&n>=this._duration&&(n=this._duration),this.setCurrentTime(n)});d(this,"rewind",(t=10)=>{let n=this._currentTime-t;n<=0&&(n=0),this.setCurrentTime(n)});d(this,"setSize",t=>{if(this._size.width!==0&&this._size.width===t.width&&this._size.height!==0&&this._size.height===t.height)return;const n=this.$app,{width:s,height:i}=t,o=Math.ceil(i/s*n.screen.width);Number.isNaN(o)||(this._size={width:n.screen.width,height:o},this.emit(10,{...this._size}),this.emit(26,{...this.state}))});d(this,"setResolution",t=>{this.emit(6,t)});d(this,"clearSubtitle",()=>{this.subtitle=null,this.emit(26,{...this.state})});d(this,"showSubtitle",t=>{this.subtitle=t,this.emit(26,{...this.state});const n=this._abstractNode;n&&setTimeout(()=>{this._subtitleVisible=!0,n.showSubtitle()},800)});d(this,"toggleSubtitleVisible",()=>{if(this._abstractNode){if(this._subtitleVisible){this._subtitleVisible=!1,this._abstractNode.hideSubtitle();return}this._subtitleVisible=!0,this._abstractNode.showSubtitle()}});d(this,"requestFullScreen",()=>{const t=this._abstractNode;if(t){if(this.$app.env.android||this.$app.env.weapp){this.play(),t.requestFullscreen();return}this.pause(),t.enableFullscreen(),this.play()}});d(this,"exitFullscreen",()=>{const t=this._abstractNode;t&&t.exitFullscreen()});d(this,"loadSource",t=>{this.metadata=t,this._canPlay=!1,this.errorMsg="",this.emit(1,t),this.emit(26,{...this.state})});d(this,"preloadSource",t=>{this.emit(11,{url:t})});d(this,"canPlayType",t=>this._abstractNode?this._abstractNode.canPlayType(t):!1);d(this,"load",t=>{console.log("[DOMAIN]player - load",t,this._abstractNode),this._canPlay=!1,this.errorMsg="",this._abstractNode&&this._abstractNode.load(t)});d(this,"startAdjustCurrentTime",()=>{this.emit(3)});d(this,"adjustProgressManually",t=>{const n=t*this._duration;this.virtualProgress=t,this.emit(4,n)});d(this,"adjustCurrentTime",t=>{this.hasPlayed&&!this.playing&&this.play();let n=t;n<0&&(n=0),n>this._duration&&(n=this._duration),this.setCurrentTime(n),this.emit(5,{time:n})});d(this,"node",()=>this._abstractNode?this._abstractNode.$node:null);d(this,"updated",!1);d(this,"handleTimeUpdate",({currentTime:t,duration:n})=>{if(this.startLoad&&!this.updated&&(this.emit(21),this.updated=!0),this._currentTime===t)return;this._currentTime=t,typeof n=="number"&&!Number.isNaN(n)&&(this._duration=n);const s=Math.floor(t/this._duration*100);if(this._progress=s,this.emit(17,{currentTime:this._currentTime,duration:this._duration,progress:this._progress}),t+10>=this._duration){if(this._passPoint)return;this.emit(20),this._passPoint=!0;return}this._passPoint=!1});d(this,"enableFullscreen",()=>{const t=this._abstractNode;t&&(this.prepareFullscreen=!0,t.enableFullscreen(),this.emit(26,{...this.state}))});d(this,"disableFullscreen",()=>{const t=this._abstractNode;t&&(this.prepareFullscreen=!1,t.disableFullscreen(),this.emit(26,{...this.state}))});d(this,"setMounted",()=>{this._mounted=!0,this.emit(0),this.emit(12)});d(this,"setInvalid",t=>{this.errorMsg=t,this.emit(26,{...this.state})});d(this,"isFullscreen",!1);d(this,"handleFullscreenChange",t=>{this.isFullscreen=t,t===!1&&this.emit(24)});d(this,"handlePause",({currentTime:t,duration:n})=>{this.emit(18,{currentTime:t,duration:n})});d(this,"handleVolumeChange",t=>{this._curVolume=t,this.emit(7,{volume:t})});d(this,"handleResize",t=>{});d(this,"startLoad",!1);d(this,"handleStartLoad",()=>{this.startLoad=!0});d(this,"handleEnded",()=>{this.playing=!1,this._ended=!0,this.emit(22,{current_time:this._currentTime,duration:this._duration})});d(this,"handleLoadedmetadata",t=>{const{width:n,height:s,duration:i}=t;this.setSize({width:n,height:s}),this._duration=i,this.emit(14,{width:n,height:s,duration:i})});d(this,"handleLoad",()=>{this.emit(13)});d(this,"handleCanPlay",(t={})=>{t.duration&&this._duration!==t.duration&&(this._duration=t.duration,this.emit(8,t.duration)),!this._canPlay&&(this._canPlay=!0,this.emit(15),this.emit(26,{...this.state}))});d(this,"handlePlay",()=>{});d(this,"handlePlaying",()=>{this.hasPlayed=!0});d(this,"handleError",t=>{this.errorMsg=t,this.emit(25,new Error(t))});d(this,"onReady",t=>this.on(12,t));d(this,"onBeforeStartLoad",t=>this.on(19,t));d(this,"onLoaded",t=>this.on(13,t));d(this,"onProgress",t=>this.on(17,t));d(this,"onCanPlay",t=>this.on(15,t));d(this,"onUrlChange",t=>this.on(1,t));d(this,"onExitFullscreen",t=>this.on(24,t));d(this,"onPreload",t=>this.on(11,t));d(this,"onBeforeEnded",t=>this.on(20,t));d(this,"onSizeChange",t=>this.on(10,t));d(this,"onVolumeChange",t=>this.on(7,t));d(this,"onRateChange",t=>this.on(9,t));d(this,"onDurationChange",t=>this.on(8,t));d(this,"onPause",t=>this.on(18,t));d(this,"onResolutionChange",t=>this.on(6,t));d(this,"onCanSetCurrentTime",t=>this.on(21,t));d(this,"beforeAdjustCurrentTime",t=>this.on(3,t));d(this,"afterAdjustCurrentTime",t=>this.on(5,t));d(this,"onPlay",t=>this.on(16,t));d(this,"onSourceLoaded",t=>this.on(14,t));d(this,"onTargetTimeChange",t=>this.on(4,t));d(this,"onCurrentTimeChange",t=>this.on(2,t));d(this,"onEnd",t=>this.on(22,t));d(this,"onError",t=>this.on(25,t));d(this,"onStateChange",t=>this.on(26,t));d(this,"onMounted",t=>this.on(0,t));const{app:n,volume:s,rate:i,skipTime:o}=t;s&&(this._curVolume=s),o&&(this.theTimeSkip=o),i&&(this._curRate=i),this.$app=n}get currentTime(){return this._currentTime}get state(){return{playing:this.playing,poster:this.poster,width:this._size.width,height:this._size.height,ready:this._canPlay,error:this.errorMsg,rate:this._curRate,volume:this._curVolume,currentTime:this._currentTime,subtitle:this.subtitle,prepareFullscreen:this.prepareFullscreen,skip:this.theTimeSkip,skipText:this.theTimeSkip?du(this.theTimeSkip):""}}screenshot(){return b.Err("请实现 screenshot 方法")}}d(ba,"Events",Uh);class jh extends $e{constructor(t){super(t);d(this,"unique_uid");d(this,"value");const{value:n,unique_id:s}=t;this.value=n,s&&(this.unique_uid=s)}get state(){return{value:this.value}}set(t){this.show(t)}show(t){this.value=t,this.emit(0,{...this.state})}onStateChange(t){return this.on(0,t)}}const aw={class:"video flex items-center w-full h-full bg-[#000000]"},lw={class:"absolute top-0 w-full"},cw=m("div",{class:"absolute z-10 inset-0 opacity-80 bg-gradient-to-b to-transparent from-w-black"},null,-1),uw={class:"inline-template p-4"},hw={key:0,class:"text-4xl truncate break-all"},dw={class:"absolute bottom-0 w-full safe-bottom"},fw=m("div",{class:"absolute z-10 inset-0 opacity-80 bg-gradient-to-t to-transparent from-w-black"},null,-1),pw={class:"px-4"},mw={class:"flex items-center justify-between mt-6 w-full px-4"},gw={class:"flex items-center space-x-4 min-h-[64px]"},yw={key:1},vw={class:"flex items-center space-x-4"},_w=m("div",{class:""},"选集",-1),bw={class:"relative p-2 rounded-md cursor-pointer"},ww={class:"z-10 relative rounded-md"},xw={class:"space-y-2"},Sw=["onClick"],Cw={class:""},$w={class:"relative p-2 rounded-md cursor-pointer"},Tw={class:"rounded-md"},Ew={class:"space-y-2"},Pw=["onClick"],kw={class:""},Aw={key:0},Ow={key:1},Rw=m("div",{class:"relative p-2 rounded-md cursor-pointer"},[m("div",null,"切换源")],-1),Mw={class:"rounded-md"},Nw={class:"space-y-2"},Lw=["onClick"],Iw={class:""},Dw={class:"relative box-border h-full px-4 safe-bottom"},Fw={class:"flex space-x-2 max-w-full overflow-x-auto scroll--hidden"},Bw=["onClick"],zw={class:"grid gap-2 grid-cols-6"},Hw=["onClick"],Uw={key:0,class:"cursor-pointer"},jw={class:"absolute right-1 top-1 text-w-fg-1",style:{"font-size":"10px"}},qw=m("div",{class:"flex items-end h-[28px]"},[m("div",{class:"bar bar1"}),m("div",{class:"bar bar2"}),m("div",{class:"bar bar3"})],-1),Vw={key:1,class:"cursor-pointer"},Ww=ue({__name:"season_playing",props:{app:{},history:{},client:{},view:{},storage:{},pages:{},parent:{}},setup(e){const r=e;function t(T){const{app:N,storage:M,client:U,view:Z}=T,te=M.get("player_settings"),{type:j,volume:L,rate:k,skip:G}=te,w=new iw({client:U,resolution:j}),E=new ba({app:N,volume:L,rate:k,skipTime:G[Z.query.id]});return console.log("[PAGE]play - useInitialize"),N.onHidden(()=>{E.pause()}),N.onShow(()=>{console.log("[PAGE]play - app.onShow",E.currentTime),E.setCurrentTime(E.currentTime)}),N.onOrientationChange(F=>{if(console.log("[PAGE]tv/play - app.onOrientationChange",F,N.screen.width),F==="horizontal"){if(!E.hasPlayed&&N.env.ios||E.isFullscreen)return;E.requestFullScreen(),E.isFullscreen=!0}if(F==="vertical"&&(E.disableFullscreen(),w.$source.profile)){const{width:B,height:oe}=w.$source.profile;E.setSize({width:B,height:oe})}}),E.onExitFullscreen(()=>{E.pause(),N.orientation===Xo.Vertical&&E.disableFullscreen()}),w.screenshot=()=>E.screenshot(),w.onProfileLoaded(F=>{N.setTitle(w.getTitle().join(" - "));const{curSource:B}=F;w.playEpisode(B,{currentTime:B.currentTime??0}),E.setCurrentTime(B.currentTime)}),w.$source.onSubtitleLoaded(F=>{E.showSubtitle(Bh(F))}),w.onEpisodeChange(F=>{N.setTitle(w.getTitle().join(" - "));const{currentTime:B}=F;E.setCurrentTime(B),E.pause()}),w.onTip(F=>{N.tip(F)}),w.onBeforeNextEpisode(()=>{E.pause()}),w.onSourceFileChange(F=>{console.log("[PAGE]play - tv.onSourceChange",F.currentTime),E.pause(),E.setSize({width:F.width,height:F.height}),M.merge("player_settings",{type:F.type}),E.loadSource(F)}),E.onReady(()=>{E.disableFullscreen()}),E.onCanPlay(()=>{const{currentTime:F}=w;console.log("[PAGE]play - player.onCanPlay",E.hasPlayed,F);function B(){E.setCurrentTime(F===0?E.theTimeSkip:F),te.rate&&E.changeRate(Number(k))}(()=>{if(N.env.android){setTimeout(()=>{B()},1e3);return}B()})(),E.hasPlayed&&E.play()}),E.onVolumeChange(({volume:F})=>{M.merge("player_settings",{volume:F})}),E.onProgress(({currentTime:F,duration:B})=>{E._canPlay&&w.handleCurTimeChange({currentTime:F,duration:B})}),E.onPause(({currentTime:F,duration:B})=>{console.log("[PAGE]play - player.onPause",F,B),w.updatePlayProgressForce({currentTime:F,duration:B})}),E.onEnd(()=>{console.log("[PAGE]play - player.onEnd"),w.playNextEpisode()}),E.onResolutionChange(({type:F})=>{console.log("[PAGE]play - player.onResolutionChange",F,w.currentTime)}),E.onSourceLoaded(()=>{console.log("[PAGE]play - player.onSourceLoaded",w.currentTime),E.setCurrentTime(w.currentTime),E.hasPlayed}),E.onError(async F=>{console.log("[PAGE]play - player.onError",F),await(async()=>{if(!w.curSource)return;const B=w.curSource.files,oe=w.curSource.curFileId,_e=B.findIndex(ct=>ct.id===oe)+1,qe=B[_e];if(!qe){N.tip({text:["视频加载错误",F.message]}),E.setInvalid(F.message);return}await w.changeSourceFile(qe)})(),E.pause()}),E.onUrlChange(async({url:F})=>{const B=E.node();if(console.log("[]player.onUrlChange",F,E.canPlayType("application/vnd.apple.mpegurl"),B),E.canPlayType("application/vnd.apple.mpegurl")){E.load(F);return}const se=(await ya(()=>import("./hls-c9ab3393.js"),[])).default;if(se.isSupported()&&F.includes("m3u8")){const _e=new se({fragLoadingTimeOut:2e3});_e.attachMedia(B),_e.on(se.Events.MEDIA_ATTACHED,()=>{_e.loadSource(F)});return}E.load(F)}),{$tv:w,$player:E,ready(){w.fetchProfile(Z.query.id)},changeSkipTime(F){l.$player.changeSkipTime(F);const B={...G,[Z.query.id]:F};M.merge("player_settings",{skip:B})}}}class n{constructor(N){d(this,"$view");d(this,"$scroll",new Zt({}));d(this,"$mask",new et({mounted:!0,visible:!0}));d(this,"$top",new et({mounted:!0,visible:!0}));d(this,"$bottom",new et({mounted:!0,visible:!0}));d(this,"$control",new et({mounted:!0,visible:!0}));d(this,"$time",new et({}));d(this,"$subtitle",new et({}));d(this,"$settings",new In);d(this,"$episodes",new In);d(this,"$skip",new In);d(this,"$resolutionMenu",new hr({align:"center",side:"top",toBody:!1}));d(this,"$sourceMenu",new hr({align:"center",side:"top",toBody:!1}));d(this,"$rateMenu",new hr({align:"center",side:"top",toBody:!1}));d(this,"$episode",new jh({value:1}));d(this,"visible",!0);d(this,"timer",null);const{view:M}=N;this.$view=M}showControls(){this.visible=!0,s.showCursor(),this.$top.show(),this.$bottom.show(),this.$control.show(),this.$mask.show()}hideControls(){this.visible=!1,s.hideCursor(),this.$top.hide({destroy:!1}),this.$bottom.hide({destroy:!1}),this.$control.hide({destroy:!1}),this.$mask.hide({destroy:!1})}toggleControls(){if(this.visible){this.hideControls();return}this.showControls()}attemptToShowControls(){return this.timer!==null?(this.hideControls(),clearTimeout(this.timer),this.timer=null,!1):(this.showControls(),!0)}prepareHideControls(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{this.hideControls(),this.timer=null},2400)}stopHideControls(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}}const{app:s,view:i,client:o,storage:a,history:c}=r,l=t(r),u=new n(r),h=ie(null),f=ie(l.$tv.state),p=ie(l.$tv.$source.profile),g=ie(l.$tv.$source.subtitle),y=ie(!1),S=ie(l.$player.state);i.query.rate&&l.$player.changeRate(Number(i.query.rate)),i.onHidden(()=>{l.$player.pause()}),l.$tv.onStateChange(T=>{f.value=T}),l.$tv.onSourceFileChange(T=>{p.value=T}),l.$tv.$source.onSubtitleChange(T=>{g.value=T,u.$subtitle.show()}),l.$player.onStateChange(T=>{S.value=T});async function x(T){await l.$tv.switchEpisode(T)}function P(T){l.$tv.changeResolution(T.type)}function J(T){l.$player.changeRate(T),a.merge("player_settings",{rate:T})}function H(T){l.$tv.changeSourceFile(T)}function V(T){const N=T.currentTarget;if(N===null)return;const{elm:M,value:U}=N.dataset;if(M){if(M==="screen"){u.toggleControls();return}if(M==="play-menu"){l.$player.play();return}if(M==="pause-menu"){l.$player.pause();return}if(M==="arrow-left-menu"){if(console.log("history.$router.histories.length",c.$router.histories.length),c.$router.histories.length===0){c.clear(),c.push("root.home_layout.home_index",{});return}c.back();return}if(M==="skip-forward-menu"){l.$tv.playNextEpisode();return}if(M==="episodes-menu"){u.$episodes.show();return}if(M==="subtitle-menu"){if(l.$tv.$source.subtitle===null)return;l.$player.toggleSubtitleVisible(),l.$tv.$source.toggleSubtitleVisible();return}if(M==="skip-menu"){const Z=l.$tv.currentTime,te=Number(Z);l.changeSkipTime(te),s.tip({text:[`设置片头跳过 ${du(te)}`]});return}if(M==="screen-menu"){const Z=h.value;if(!Z)return;if(document.fullscreenElement){document.exitFullscreen(),y.value=!1;return}y.value=!0,Z.requestFullscreen().catch(te=>{console.error(`Error attempting to enable full-screen mode: ${te.message}`)})}}}function W(){u.visible!==!0&&u.showControls()}return _t(()=>{Ue("space",(T,N)=>{if(T.preventDefault(),l.$player.playing){u.showControls(),l.$player.pause();return}l.$player.play(),u.hideControls()}),Ue("left",T=>{T.preventDefault(),l.$player.rewind(2)}),Ue("right",T=>{T.preventDefault(),l.$player.speedUp(2)}),document.documentElement.addEventListener("mousemove",W)}),Lr(()=>{document.documentElement.removeEventListener("mousemove",W),l.$tv.destroy(),l.$player.destroy(),Ue.unbind("space"),Ue.unbind("left"),Ue.unbind("right")}),l.ready(),(T,N)=>(C(),R("div",{ref_key:"pageRef",ref:h,class:"relative w-full h-screen bg-[#000000]"},[m("div",aw,[z(Dh,{store:$(l).$player},null,8,["store"])]),m("div",{class:"absolute z-0 inset-0","data-elm":"screen",onClick:V},[m("div",lw,[z(Jn,{store:$(u).$top,class:"animate-in fade-in slide-in-from-top data-[state=closed]:animate-out data-[state=closed]:slide-out-to-top data-[state=closed]:fade-out"},{default:Q(()=>{var M,U;return[cw,m("div",{class:"relative z-20 p-4 text-w-white",onClick:N[0]||(N[0]=Xr(()=>{},["stop"]))},[m("div",{class:"flex items-center cursor-pointer","data-elm":"arrow-left-menu",onClick:V},[m("div",uw,[z($(ma),{class:"w-12 h-12"})]),f.value.curSource?(C(),R("div",hw,re((M=f.value.curSource)==null?void 0:M.order)+"、"+re((U=f.value.curSource)==null?void 0:U.name),1)):be("",!0)])])]}),_:1},8,["store"])]),m("div",dw,[z(Jn,{store:$(u).$bottom,class:"animate-in fade-in slide-in-from-bottom data-[state=closed]:animate-out data-[state=closed]:slide-out-to-bottom data-[state=closed]:fade-out"},{default:Q(()=>{var M,U;return[fw,m("div",{class:"relative z-20 px-4 py-6 pt-10 text-white",onClick:N[1]||(N[1]=Xr(()=>{},["stop"])),onMouseup:N[2]||(N[2]=Xr(()=>{},["stop"]))},[m("div",pw,[z(Fh,{app:$(s),store:$(l).$player},null,8,["app","store"])]),m("div",mw,[m("div",gw,[S.value.ready?(C(),R(fe,{key:0},[m("div",null,[S.value.playing?(C(),R("div",{key:0,class:"cursor-pointer","data-elm":"pause-menu",onClick:V},[z($(vh),{class:"w-16 h-16"})])):(C(),R("div",{key:1,class:"cursor-pointer","data-elm":"play-menu",onClick:V},[z($(_h),{class:"w-16 h-16"})]))]),m("div",{class:"relative rounded-md space-x-2 cursor-pointer","data-elm":"skip-forward-menu",onClick:V},[z($(Dv),{class:"w-16 h-16"})])],64)):(C(),R("div",yw,[z($(ga),{class:"w-16 h-16 animate animate-spin"})]))]),m("div",vw,[m("div",{class:"flex items-center p-2 rounded-md space-x-2 cursor-pointer","data-elm":"episodes-menu",onClick:V},[z($(Iv),{class:"w-8 h-8"}),_w]),z(Zr,{store:$(u).$resolutionMenu,"class-name":""},{trigger:Q(()=>{var Z;return[m("div",bw,[m("div",null,re((Z=p.value)==null?void 0:Z.typeText),1)])]}),content:Q(()=>{var Z;return[m("div",ww,[m("div",xw,[(C(!0),R(fe,null,Le((Z=p.value)==null?void 0:Z.resolutions,te=>{var j;return C(),R("div",{class:Ce(((j=p.value)==null?void 0:j.type)===te.type?"relative p-2 rounded-sm text-center cursor-pointer bg-gray-800":"relative p-2 rounded-sm text-center cursor-pointer"),onClick:L=>P(te)},[m("div",Cw,re(te.typeText),1)],10,Sw)}),256))])])]}),_:1},8,["store"]),z(Zr,{store:$(u).$rateMenu,"class-name":""},{trigger:Q(()=>[m("div",$w,[m("div",null,re(S.value.rate)+"x",1)])]),content:Q(()=>[m("div",Tw,[m("div",Ew,[(C(!0),R(fe,null,Le($(Hh),Z=>(C(),R("div",{class:Ce(S.value.rate===Z?"relative p-2 rounded-sm text-center cursor-pointer bg-gray-800":"relative p-2 rounded-sm text-center cursor-pointer"),onClick:te=>J(Z)},[m("div",kw,re(Z),1)],10,Pw))),256))])])]),_:1},8,["store"]),m("div",{class:"relative p-2 rounded-md cursor-pointer","data-elm":"skip-menu",onClick:V},[(M=S.value)!=null&&M.skipText?(C(),R("div",Aw,"片头跳过"+re((U=S.value)==null?void 0:U.skipText),1)):(C(),R("div",Ow,"设置片头跳过时间"))]),g.value?(C(),R("div",{key:0,class:"relative p-2 rounded-md cursor-pointer","data-elm":"subtitle-menu",onClick:V},[g.value.visible?(C(),ge($(mh),{key:0,class:"w-8 h-8"})):(C(),ge($(ph),{key:1,class:"w-8 h-8"}))])):be("",!0),z(Zr,{store:$(u).$sourceMenu,"class-name":""},{trigger:Q(()=>[Rw]),content:Q(()=>{var Z;return[m("div",Mw,[m("div",Nw,[(C(!0),R(fe,null,Le((Z=f.value.curSource)==null?void 0:Z.files,te=>{var j;return C(),R("div",{class:Ce(((j=f.value.curSource)==null?void 0:j.curFileId)===te.id?"relative p-2 rounded-sm text-center cursor-pointer bg-gray-8yy00":"relative p-2 rounded-sm text-center cursor-pointer"),onClick:L=>H(te)},[m("div",Iw,re(te.name),1)],10,Lw)}),256))])])]}),_:1},8,["store"]),m("div",{class:"relative p-2 rounded-md cursor-pointer","data-elm":"screen-menu",onClick:V},[y.value?(C(),ge($(yh),{key:1,class:"w-8 h-8"})):(C(),ge($(gh),{key:0,class:"w-8 h-8"}))])])])],32)]}),_:1},8,["store"])])]),z(Xb,{store:$(u).$episodes},{default:Q(()=>{var M;return[m("div",Dw,[m("div",Fw,[(C(!0),R(fe,null,Le(f.value.groups,U=>(C(),R("div",{class:Ce(U.cur?"p-2 underline":"p-2"),onClick:Z=>$(l).$tv.fetchEpisodeOfGroup(U)},re(U.text),11,Bw))),256))]),m("div",zw,[(C(!0),R(fe,null,Le((M=f.value.curGroup)==null?void 0:M.list,U=>{var Z;return C(),R("div",{class:Ce("relative flex justify-center items-center w-12 h-12 p-2 rounded-md bg-w-fg-3"),onClick:te=>x(U)},[((Z=f.value.curSource)==null?void 0:Z.id)===U.id?(C(),R("div",Uw,[m("div",jw,re(U.order),1),qw])):(C(),R("div",Vw,re(U.order),1))],8,Hw)}),256))])])]}),_:1},8,["store"])],512))}}),Gw={class:"w-[1080px] mx-auto mt-8 pb-4 2xl:w-[1280px]"},Kw=m("div",{class:"flex items-center justify-between"},[m("div",{class:"flex items-center"},[m("div",{class:"text-3xl"},"电视剧")])],-1),Yw={class:"grid grid-cols-6 gap-4 mt-4 min-h-[634px] 2xl:grid-cols-7"},Jw=["onClick"],Xw={class:"mt-2"},Qw={class:"text-xl truncate"},Zw={class:""},ex={class:"absolute top-2 right-2 space-y-2"},tx={key:0,className:"flex flex-row-reverse items-center w-full "},rx={className:"huizhang huizhang--blue relative z-20 p-2 text-[12px] text-w-bg-0 dark:text-w-fg-0"},nx={key:1,className:"flex flex-row-reverse items-center w-full"},sx={className:"huizhang relative z-20 p-2 text-[12px] text-w-bg-0 dark:text-w-fg-0"},ix=ue({__name:"season_list",props:{app:{},client:{},storage:{},history:{}},setup(e){const r=e,{app:t,client:n,storage:s,history:i}=r,o=new vt(new Ee(ts,{process:rs,client:n}),{pageSize:(()=>({sm:6,md:12,lg:12,xl:14,"2xl":14})[t.curDeviceSize])(),search:{type:we.Season}}),a=new mr,c=new Zt({async onReachBottom(){await o.loadMore(),c.finishLoadingMore()}}),l=ie(o.response);ie({language:je.CN});function u(h){const{id:f,type:p}=h;if(p===we.Season){i.push("root.season_playing",{id:f});return}if(p===we.Movie){i.push("root.movie_playing",{id:f});return}}return o.onStateChange(h=>{l.value=h}),o.init(),(h,f)=>(C(),ge(Dr,{store:$(c),class:"absolute top-0 bottom-0 pb-24 overflow-y-auto"},{default:Q(()=>[z(ns,{store:$(o),class:""},{default:Q(()=>[m("div",Gw,[Kw,m("div",Yw,[(C(!0),R(fe,null,Le(l.value.dataSource,p=>(C(),R("div",{class:"relative w-[166px] cursor-pointer",onClick:g=>u(p)},[z(pn,{ratio:10/15},{default:Q(()=>[(C(),ge(mn,{key:p.poster_path,class:"overflow-hidden absolute inset-0 rounded-md",store:$(a).bind(p.poster_path)},null,8,["store"]))]),_:2},1024),m("div",Xw,[m("div",Qw,re(p.name),1),m("div",Zw,re(p.air_date),1)]),m("div",ex,[p.vote?(C(),R("div",tx,[m("div",rx,re(p.vote),1)])):be("",!0),p.episode_count_text?(C(),R("div",nx,[m("div",sx,re(p.episode_count_text),1)])):be("",!0)])],8,Jw))),256))])])]),_:1},8,["store"])]),_:1},8,["store"]))}});class ox extends $e{constructor(t){super();d(this,"profile",null);d(this,"curSource",null);d(this,"currentTime",0);d(this,"currentFixTime",0);d(this,"curResolutionType",gr.SD);d(this,"_pending",!1);d(this,"played",!1);d(this,"canAutoPlay",!1);d(this,"$source");d(this,"$client");d(this,"$update");d(this,"updatePlayProgress",ax(10*1e3,(t={})=>{this.updatePlayProgressForce(t)}));d(this,"handleCurTimeChange",(t={})=>{var s,i;const{currentTime:n=0}=t;this.currentTime=n,(s=this.$source.subtitle)!=null&&s.visible&&((i=this.$source.$subtitle)==null||i.handleTimeChange(n+this.currentFixTime)),this.updatePlayProgress(t)});const{client:n,resolution:s=gr.SD}=t;this.$client=n,this.$source=new zh({resolution:s,client:n}),this.$update=new Ee(kh,{client:n})}get state(){return{profile:this.profile,curSource:this.curSource,fixTime:this.currentFixTime}}async fetchProfile(t){if(t===void 0){const u=this.tip({text:["缺少电影 id 参数"]});return b.Err(u)}const s=await new Ee(Th,{process:Eh,client:this.$client}).run({media_id:t,type:we.Movie});if(s.error){const u=this.tip({text:["获取电视剧详情失败",s.error.message]});return b.Err(u)}const{id:i,name:o,overview:a,posterPath:c,curSource:l}=s.data;if(this.profile={id:i,name:o,overview:a,posterPath:c},l===null){const u=this.tip({text:["当前没有可播放的视频源"]});return b.Err(u)}return this.emit(0,{profile:this.profile,curSource:l}),this.emit(2,{...this.state}),b.Ok({...this.profile})}async playSource(t,n){const{currentTime:s=0}=n;if(!this.profile){const l=this.tip({text:["请先调用 fetchProfile 获取详情"]});return b.Err(l)}const{id:i,files:o}=t;if(this.curSource&&i===this.curSource.id)return this.tip({text:["已经是该剧集了"]}),b.Ok(this.curSource);if(o.length===0){const l=this.tip({text:["该剧集缺少视频源"]});return b.Err(l)}const a=(()=>{if(t.curFileId){const l=o.find(u=>u.id===t.curFileId);if(l)return l}return o[0]})();this.curSource={...t,currentTime:s,thumbnailPath:t.stillPath,curFileId:a.id};const c=await this.$source.load(a);if(c.error){const l=this.tip({text:[c.error.message]});return b.Err(l)}return this.currentTime=s,this.curSource={...t,currentTime:s,thumbnailPath:t.stillPath,curFileId:c.data.id},(async()=>{const l=await this.$source.loadSubtitle({extraSubtitleFiles:t.subtitles,currentTime:s});if(l.error){console.log("[DOMAIN]media/season - loadSubtitle failed ",l.error.message);return}})(),this.emit(1,{...c.data,currentTime:s}),this.emit(2,{...this.state}),b.Ok(c.data)}async changeSourceFile(t){if(this.profile===null){const s=this.tip({text:["视频还未加载完成"]});return b.Err(s)}if(this.curSource===null){const s=this.tip({text:["视频还未加载完成"]});return b.Err(s)}const n=await this.$source.load({id:t.id});return this.curSource.curFileId=t.id,n.error?(this.tip({text:[n.error.message]}),b.Err(n.error)):(this.emit(1,{...n.data,currentTime:this.currentTime}),b.Ok(null))}changeResolution(t){if(this.profile===null){const i=this.tip({text:["视频还未加载完成"]});return b.Err(i)}const n=this.$source.changeResolution(t);if(n.error){const i=this.tip({text:[n.error.message]});return b.Err(i)}const s=n.data;return this.emit(1,{...s,currentTime:this.currentTime}),b.Ok(s)}setCurResolution(t){this.curResolutionType=t}setCurrentTime(t){this.currentTime=t}screenshot(){return b.Err("请实现 screenshot 方法")}updatePlayProgressForce(t={}){const{currentTime:n=this.currentTime,duration:s=0}=t;if(!this.profile||this.curSource===null||this.$source.profile===null)return;const i=(()=>{const o=this.screenshot();return o.data?o.data:""})();this.$update.run({media_id:this.profile.id,media_source_id:this.curSource.id,current_time:parseFloat(n.toFixed(2)),duration:parseFloat(s.toFixed(2)),thumbnail:i,source_id:this.$source.profile.id})}minFixTime(t=1){var n,s;this.currentFixTime-=t,(n=this.$source.subtitle)!=null&&n.visible&&((s=this.$source.$subtitle)==null||s.handleTimeChange(this.currentTime+this.currentFixTime)),this.emit(2,{...this.state})}addFixTime(t=1){var n,s;this.currentFixTime+=t,(n=this.$source.subtitle)!=null&&n.visible&&((s=this.$source.$subtitle)==null||s.handleTimeChange(this.currentTime+this.currentFixTime)),this.emit(2,{...this.state})}getTitle(){if(this.profile===null)return["加载中..."];const{name:t}=this.profile;return[t]}onSourceFileChange(t){return this.on(1,t)}onProfileLoaded(t){return this.on(0,t)}onStateChange(t){return this.on(2,t)}}function ax(e,r){let t=!0;return setInterval(()=>{t=!0},e),(...n)=>{t!==!1&&(r(...n),t=!1)}}const lx={class:"video flex items-center w-full h-full bg-[#000000]"},cx={class:"absolute top-0 w-full"},ux=m("div",{class:"absolute z-10 inset-0 opacity-80 bg-gradient-to-b to-transparent from-w-black"},null,-1),hx={class:"inline-template p-4"},dx={key:0,class:"text-4xl truncate break-all"},fx={class:"absolute bottom-0 w-full safe-bottom"},px=m("div",{class:"absolute z-10 inset-0 opacity-80 bg-gradient-to-t to-transparent from-w-black"},null,-1),mx={class:"px-4"},gx={class:"flex items-center justify-between mt-6 w-full px-4"},yx={class:"flex items-center space-x-4 min-h-[64px]"},vx={key:0},_x={key:1},bx={class:"relative flex items-center space-x-4"},wx={class:"relative p-2 rounded-md cursor-pointer"},xx={class:"z-10 relative rounded-md"},Sx={class:"space-y-2"},Cx=["onClick"],$x={class:""},Tx={class:"relative p-2 rounded-md cursor-pointer"},Ex={class:"rounded-md"},Px={class:"space-y-2"},kx=["onClick"],Ax={class:""},Ox=m("div",{class:"relative p-2 rounded-md cursor-pointer"},[m("div",null,"切换源")],-1),Rx={class:"rounded-md"},Mx={class:"space-y-2"},Nx=["onClick"],Lx={class:""},Ix=ue({__name:"movie_playing",props:{app:{},history:{},client:{},view:{},storage:{},pages:{},parent:{}},setup(e){const r=e;function t(W){const{app:T,client:N,storage:M}=W,U=M.get("player_settings"),Z=new Vn({value:U}),{type:te,volume:j,rate:L}=U,k=new ox({resolution:te,client:N}),G=k,w=new ba({app:T,volume:j,rate:L}),E=new Vn,F=w;return T.onHidden(()=>{w.pause()}),T.onShow(()=>{console.log("[PAGE]play - app.onShow",w.currentTime),w.setCurrentTime(w.currentTime)}),T.onOrientationChange(B=>{if(console.log("[PAGE]tv/play - app.onOrientationChange",B,T.screen.width),B==="horizontal"){if(!w.hasPlayed&&T.env.ios||w.isFullscreen)return;w.requestFullScreen(),w.isFullscreen=!0}B==="vertical"&&w.disableFullscreen()}),w.onExitFullscreen(()=>{w.pause(),T.orientation===Xo.Vertical&&w.disableFullscreen()}),k.screenshot=()=>F.screenshot(),k.onProfileLoaded(B=>{T.setTitle(k.getTitle().join(" - "));const{curSource:oe}=B;k.playSource(oe,{currentTime:oe.currentTime??0}),w.setCurrentTime(oe.currentTime)}),k.$source.onSubtitleLoaded(B=>{w.showSubtitle(Bh(B))}),k.onTip(B=>{T.tip(B)}),k.onSourceFileChange(B=>{w.pause(),w.setSize({width:B.width,height:B.height}),M.merge("player_settings",{type:B.type}),w.loadSource(B)}),w.onReady(()=>{w.disableFullscreen()}),w.onCanPlay(()=>{const{currentTime:B}=k;console.log("[PAGE]play - player.onCanPlay",w.hasPlayed,B);function oe(){w.setCurrentTime(B);const{rate:se}=Z.value;se&&w.changeRate(Number(se))}(()=>{if(T.env.android){setTimeout(()=>{oe()},1e3);return}oe()})(),w.hasPlayed&&w.play()}),w.onVolumeChange(({volume:B})=>{M.merge("player_settings",{volume:B})}),w.onProgress(({currentTime:B,duration:oe})=>{w._canPlay&&k.handleCurTimeChange({currentTime:B,duration:oe})}),w.onPause(({currentTime:B,duration:oe})=>{console.log("[PAGE]play - player.onPause",B,oe),k.updatePlayProgressForce({currentTime:B,duration:oe})}),w.onResolutionChange(({type:B})=>{console.log("[PAGE]play - player.onResolutionChange",B,k.currentTime)}),w.onSourceLoaded(()=>{console.log("[PAGE]play - player.onSourceLoaded",k.currentTime),w.setCurrentTime(k.currentTime),w.hasPlayed}),w.onError(async B=>{var oe,se;console.log("[PAGE]play - player.onError",(oe=k.curSource)==null?void 0:oe.name,(se=k.curSource)==null?void 0:se.curFileId),await(async()=>{if(!k.curSource)return;const _e=k.curSource.files,qe=k.curSource.curFileId,Qe=_e.findIndex(St=>St.id===qe)+1,pt=_e[Qe];if(!pt){T.tip({text:["视频加载错误",B.message]}),w.setInvalid(B.message);return}await k.changeSourceFile(pt)})(),w.pause()}),w.onUrlChange(async({url:B})=>{const oe=w.node();if(console.log("[]player.onUrlChange",B,w.canPlayType("application/vnd.apple.mpegurl"),oe),w.canPlayType("application/vnd.apple.mpegurl")){w.load(B);return}const _e=(await ya(()=>import("./hls-c9ab3393.js"),[])).default;if(_e.isSupported()&&B.includes("m3u8")){const qe=new _e({fragLoadingTimeOut:2e3});qe.attachMedia(oe),qe.on(_e.Events.MEDIA_ATTACHED,()=>{qe.loadSource(B)});return}w.load(B)}),{$tv:G,$player:F,$report:E}}class n{constructor(T){d(this,"$view");d(this,"$scroll",new Zt({}));d(this,"$mask",new et({mounted:!0,visible:!0}));d(this,"$top",new et({mounted:!0,visible:!0}));d(this,"$bottom",new et({mounted:!0,visible:!0}));d(this,"$control",new et({mounted:!0,visible:!0}));d(this,"$time",new et({}));d(this,"$subtitle",new et({}));d(this,"$settings",new In);d(this,"$resolutionMenu",new hr({align:"center",side:"top",toBody:!1}));d(this,"$sourceMenu",new hr({align:"center",side:"top",toBody:!1}));d(this,"$rateMenu",new hr({align:"center",side:"top",toBody:!1}));d(this,"$episode",new jh({value:1}));d(this,"visible",!0);d(this,"timer",null);const{view:N}=T;this.$view=N}showControls(){this.visible=!0,s.showCursor(),this.$top.show(),this.$bottom.show(),this.$control.show(),this.$mask.show()}hideControls(){this.visible=!1,s.hideCursor(),this.$top.hide({destroy:!1}),this.$bottom.hide({destroy:!1}),this.$control.hide({destroy:!1}),this.$mask.hide({destroy:!1})}toggleControls(){if(this.visible){this.hideControls();return}this.showControls()}attemptToShowControls(){return this.timer!==null?(this.hideControls(),clearTimeout(this.timer),this.timer=null,!1):(this.showControls(),!0)}prepareHideControls(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{this.hideControls(),this.timer=null},2400)}stopHideControls(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}}const{app:s,view:i,client:o,storage:a,history:c}=r,l=t(r),u=new n(r),h=ie(null),f=ie(l.$tv.state),p=ie(l.$tv.$source.profile),g=ie(l.$tv.$source.subtitle),y=ie(!1),S=ie(l.$player.state);i.query.rate&&l.$player.changeRate(Number(i.query.rate)),i.onHidden(()=>{l.$player.pause()}),l.$tv.onStateChange(W=>{f.value=W}),l.$tv.onSourceFileChange(W=>{p.value=W}),l.$tv.$source.onSubtitleChange(W=>{g.value=W}),l.$player.onStateChange(W=>{S.value=W});function x(W){l.$tv.changeResolution(W.type)}function P(W){l.$player.changeRate(W),a.merge("player_settings",{rate:W})}function J(W){l.$tv.changeSourceFile(W)}function H(W){const T=W.currentTarget;if(T===null)return;console.log("[PAGE]media/moving_playing - handleClickElm",T);const{elm:N}=T.dataset;if(N){if(N==="screen"){u.toggleControls();return}if(N==="play-menu"){l.$player.play();return}if(N==="pause-menu"){l.$player.pause();return}if(N==="arrow-left-menu"){if(console.log("history.$router.histories.length",c.$router.histories.length),c.$router.histories.length===0){c.clear(),c.push("root.home_layout.home_index",{});return}c.back();return}if(N==="subtitle-menu"){if(l.$tv.$source.subtitle===null)return;l.$player.toggleSubtitleVisible(),l.$tv.$source.toggleSubtitleVisible();return}if(N==="screen-menu"){const M=h.value;if(!M)return;if(document.fullscreenElement){document.exitFullscreen(),y.value=!1;return}y.value=!0,M.requestFullscreen().catch(U=>{console.error(`Error attempting to enable full-screen mode: ${U.message}`)})}}}function V(){u.visible!==!0&&u.showControls()}return _t(()=>{Ue("space",(W,T)=>{if(W.preventDefault(),l.$player.playing){u.showControls(),l.$player.pause();return}l.$player.play(),u.hideControls()}),Ue("left",W=>{W.preventDefault(),l.$player.rewind(2)}),Ue("right",W=>{W.preventDefault(),l.$player.speedUp(2)}),document.documentElement.addEventListener("mousemove",V)}),Lr(()=>{document.documentElement.removeEventListener("mousemove",V),l.$tv.destroy(),l.$player.destroy(),Ue.unbind("space"),Ue.unbind("left"),Ue.unbind("right")}),l.$tv.fetchProfile(i.query.id),(W,T)=>(C(),R("div",{ref_key:"pageRef",ref:h,class:"relative w-full h-screen bg-[#000000]"},[m("div",lx,[z(Dh,{store:$(l).$player},null,8,["store"])]),m("div",{class:"absolute z-0 inset-0","data-elm":"screen",onClick:H},[m("div",cx,[z(Jn,{store:$(u).$top,class:"animate-in fade-in slide-in-from-top data-[state=closed]:animate-out data-[state=closed]:slide-out-to-top data-[state=closed]:fade-out"},{default:Q(()=>{var N;return[ux,m("div",{class:"relative z-20 p-4 text-w-white",onClick:T[0]||(T[0]=Xr(()=>{},["stop"]))},[m("div",{class:"flex items-center cursor-pointer","data-elm":"arrow-left-menu",onClick:H},[m("div",hx,[z($(ma),{class:"w-12 h-12"})]),f.value.curSource?(C(),R("div",dx,re((N=f.value.curSource)==null?void 0:N.name),1)):be("",!0)])])]}),_:1},8,["store"])]),m("div",fx,[z(Jn,{store:$(u).$bottom,class:"animate-in fade-in slide-in-from-bottom data-[state=closed]:animate-out data-[state=closed]:slide-out-to-bottom data-[state=closed]:fade-out"},{default:Q(()=>[px,m("div",{class:"relative z-20 px-4 py-6 pt-10 text-w-white",onClick:T[1]||(T[1]=Xr(()=>{},["stop"])),onMouseup:T[2]||(T[2]=Xr(()=>{},["stop"]))},[m("div",mx,[z(Fh,{app:$(s),store:$(l).$player},null,8,["app","store"])]),m("div",gx,[m("div",yx,[S.value.ready?(C(),R("div",vx,[S.value.playing?(C(),R("div",{key:0,class:"cursor-pointer","data-elm":"pause-menu",onClick:H},[z($(vh),{class:"w-16 h-16"})])):(C(),R("div",{key:1,class:"cursor-pointer","data-elm":"play-menu",onClick:H},[z($(_h),{class:"w-16 h-16"})]))])):(C(),R("div",_x,[z($(ga),{class:"w-16 h-16 animate animate-spin"})]))]),m("div",bx,[z(Zr,{store:$(u).$resolutionMenu,"class-name":""},{trigger:Q(()=>{var N;return[m("div",wx,[m("div",null,re((N=p.value)==null?void 0:N.typeText),1)])]}),content:Q(()=>{var N;return[m("div",xx,[m("div",Sx,[(C(!0),R(fe,null,Le((N=p.value)==null?void 0:N.resolutions,M=>{var U;return C(),R("div",{class:Ce(((U=p.value)==null?void 0:U.type)===M.type?"relative p-2 rounded-sm text-center cursor-pointer bg-gray-200":"relative p-2 rounded-sm text-center cursor-pointer"),onClick:Z=>x(M)},[m("div",$x,re(M.typeText),1)],10,Cx)}),256))])])]}),_:1},8,["store"]),z(Zr,{store:$(u).$rateMenu,"class-name":""},{trigger:Q(()=>[m("div",Tx,[m("div",null,re(S.value.rate)+"x",1)])]),content:Q(()=>[m("div",Ex,[m("div",Px,[(C(!0),R(fe,null,Le($(Hh),N=>(C(),R("div",{class:Ce(S.value.rate===N?"relative p-2 rounded-sm text-center cursor-pointer bg-gray-200":"relative p-2 rounded-sm text-center cursor-pointer"),onClick:M=>P(N)},[m("div",Ax,re(N),1)],10,kx))),256))])])]),_:1},8,["store"]),g.value?(C(),R("div",{key:0,class:"relative p-2 rounded-md cursor-pointer","data-elm":"subtitle-menu",onClick:H},[g.value.visible?(C(),ge($(mh),{key:0,class:"w-8 h-8"})):(C(),ge($(ph),{key:1,class:"w-8 h-8"}))])):be("",!0),z(Zr,{store:$(u).$sourceMenu,"class-name":""},{trigger:Q(()=>[Ox]),content:Q(()=>{var N;return[m("div",Rx,[m("div",Mx,[(C(!0),R(fe,null,Le((N=f.value.curSource)==null?void 0:N.files,M=>{var U;return C(),R("div",{class:Ce(((U=f.value.curSource)==null?void 0:U.curFileId)===M.id?"relative p-2 rounded-sm text-center cursor-pointer bg-gray-200":"relative p-2 rounded-sm text-center cursor-pointer"),onClick:Z=>J(M)},[m("div",Lx,re(M.name),1)],10,Nx)}),256))])])]}),_:1},8,["store"]),m("div",{class:"relative p-2 rounded-md cursor-pointer","data-elm":"screen-menu",onClick:H},[y.value?(C(),ge($(yh),{key:1,class:"w-8 h-8"})):(C(),ge($(gh),{key:0,class:"w-8 h-8"}))])])])],32)]),_:1},8,["store"])])])],512))}}),Dx={class:"w-[1080px] mx-auto mt-8 pb-4 2xl:w-[1280px]"},Fx=m("div",{class:"flex items-center justify-between"},[m("div",{class:"flex items-center"},[m("div",{class:"text-3xl"},"电影")])],-1),Bx={class:"grid grid-cols-6 gap-4 mt-4 min-h-[634px] 2xl:grid-cols-7"},zx=["onClick"],Hx={class:"mt-2"},Ux={class:"text-xl truncate"},jx={class:""},qx={class:"absolute top-2 right-2 space-y-2"},Vx={key:0,className:"flex flex-row-reverse items-center w-full "},Wx={className:"huizhang huizhang--blue relative z-20 p-2 text-[12px] text-w-bg-0 dark:text-w-fg-0"},Gx={key:1,className:"flex flex-row-reverse items-center w-full"},Kx={className:"huizhang relative z-20 p-2 text-[12px] text-w-bg-0 dark:text-w-fg-0"},Yx=ue({__name:"movie_list",props:{app:{},client:{},storage:{},history:{}},setup(e){const r=e,{app:t,client:n,storage:s,history:i}=r,o=new vt(new Ee(ts,{process:rs,client:n}),{pageSize:(()=>({sm:6,md:12,lg:12,xl:14,"2xl":14})[t.curDeviceSize])(),search:{type:we.Movie}}),a=new mr,c=new Zt({async onReachBottom(){await o.loadMore(),c.finishLoadingMore()}}),l=ie(o.response);ie({language:je.CN});function u(h){const{id:f,type:p}=h;if(p===we.Season){i.push("root.season_playing",{id:f});return}if(p===we.Movie){i.push("root.movie_playing",{id:f});return}}return o.onStateChange(h=>{l.value=h}),o.init(),(h,f)=>(C(),ge(Dr,{store:$(c),class:"absolute top-0 bottom-0 pb-24 overflow-y-auto"},{default:Q(()=>[z(ns,{store:$(o),class:""},{default:Q(()=>[m("div",Dx,[Fx,m("div",Bx,[(C(!0),R(fe,null,Le(l.value.dataSource,p=>(C(),R("div",{class:"relative w-[166px] cursor-pointer",onClick:g=>u(p)},[z(pn,{ratio:10/15},{default:Q(()=>[(C(),ge(mn,{key:p.poster_path,class:"overflow-hidden absolute inset-0 rounded-md",store:$(a).bind(p.poster_path)},null,8,["store"]))]),_:2},1024),m("div",Hx,[m("div",Ux,re(p.name),1),m("div",jx,re(p.air_date),1)]),m("div",qx,[p.vote?(C(),R("div",Vx,[m("div",Wx,re(p.vote),1)])):be("",!0),p.episode_count_text?(C(),R("div",Gx,[m("div",Kx,re(p.episode_count_text),1)])):be("",!0)])],8,zx))),256))])])]),_:1},8,["store"])]),_:1},8,["store"]))}});function Jx(){return De.post("/api/v2/wechat/auth/code/create",{})}function Xx(e){return De.post("/api/v2/wechat/auth/code/check",e)}const Qx=e=>{const{unique_id:r,step:t=ht.Loading,client:n}=e;let s=r,i=t,o=null,a=null;const c=new Ee(Xx,{client:n}),l=new Ee(Jx,{client:n}),u={step:i,error:a};let h;(p=>{p[p.Scan=0]="Scan",p[p.Confirm=1]="Confirm",p[p.Expired=2]="Expired",p[p.StateChange=3]="StateChange"})(h||(h={}));const f=vu();return{state:u,async refresh(){i=ht.Loading,a=null,f.emit(3,{step:i,error:a});const p=await l.run();return console.log("after $create.run",p),p.error?(i=ht.Error,a=p.error,f.emit(3,{step:i,error:a}),b.Err(p.error.message)):(s=p.data.code,i=p.data.step,f.emit(3,{step:i,error:a}),b.Ok({id:s,step:i}))},async startCheck(){o===null&&(o=setInterval(()=>{this.check()},2e3))},async clearCheck(){o!==null&&clearInterval(o)},async check(){const p=await c.run({code:s});if(p.error)return b.Err(p.error);if(p.data.step===ht.Scanned&&f.emit(0),p.data.step===ht.Confirmed){const{id:g,email:y,token:S}=p.data;this.clearCheck(),f.emit(1,{id:g,email:y,token:S})}return p.data.step===ht.Expired&&(this.clearCheck(),f.emit(2)),p.data.step!==i&&(i=p.data.step,f.emit(3,{step:i,error:a})),b.Ok(p.data)},onScan(p){return f.on(0,p)},onConfirm(p){return f.on(1,p)},onExpired(p){return f.on(2,p)},onStateChange(p){return f.on(3,p)}}};var gt={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},zt={L:1,M:0,Q:3,H:2},nr={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Me={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo(e){let r=e<<10;for(;Me.getBCHDigit(r)-Me.getBCHDigit(Me.G15)>=0;)r^=Me.G15<<Me.getBCHDigit(r)-Me.getBCHDigit(Me.G15);return(e<<10|r)^Me.G15_MASK},getBCHTypeNumber(e){let r=e<<12;for(;Me.getBCHDigit(r)-Me.getBCHDigit(Me.G18)>=0;)r^=Me.G18<<Me.getBCHDigit(r)-Me.getBCHDigit(Me.G18);return e<<12|r},getBCHDigit(e){let r=0;for(;e!=0;)r++,e>>>=1;return r},getPatternPosition(e){return Me.PATTERN_POSITION_TABLE[e-1]},getMask(e,r,t){switch(e){case nr.PATTERN000:return(r+t)%2==0;case nr.PATTERN001:return r%2==0;case nr.PATTERN010:return t%3==0;case nr.PATTERN011:return(r+t)%3==0;case nr.PATTERN100:return(Math.floor(r/2)+Math.floor(t/3))%2==0;case nr.PATTERN101:return r*t%2+r*t%3==0;case nr.PATTERN110:return(r*t%2+r*t%3)%2==0;case nr.PATTERN111:return(r*t%3+(r+t)%2)%2==0;default:throw new Error(`bad maskPattern:${e}`)}},getErrorCorrectPolynomial(e){let r=new Co([1],0);for(let t=0;t<e;t++)r=r.multiply(new Co([1,Ye.gexp(t)],0));return r},getLengthInBits(e,r){if(r>=1&&r<10)switch(e){case gt.MODE_NUMBER:return 10;case gt.MODE_ALPHA_NUM:return 9;case gt.MODE_8BIT_BYTE:return 8;case gt.MODE_KANJI:return 8;default:throw new Error(`mode:${e}`)}else if(r<27)switch(e){case gt.MODE_NUMBER:return 12;case gt.MODE_ALPHA_NUM:return 11;case gt.MODE_8BIT_BYTE:return 16;case gt.MODE_KANJI:return 10;default:throw new Error(`mode:${e}`)}else if(r<41)switch(e){case gt.MODE_NUMBER:return 14;case gt.MODE_ALPHA_NUM:return 13;case gt.MODE_8BIT_BYTE:return 16;case gt.MODE_KANJI:return 12;default:throw new Error(`mode:${e}`)}else throw new Error(`type:${r}`)},getLostPoint(e){let r=e.getModuleCount(),t=0;for(var n=0;n<r;n++)for(var s=0;s<r;s++){let a=0,c=e.isDark(n,s);for(let l=-1;l<=1;l++)if(!(n+l<0||r<=n+l))for(let u=-1;u<=1;u++)s+u<0||r<=s+u||l==0&&u==0||c==e.isDark(n+l,s+u)&&a++;a>5&&(t+=3+a-5)}for(let a=0;a<r-1;a+=1)for(let c=0;c<r-1;c+=1){let l=0;e.isDark(a,c)&&l++,e.isDark(a+1,c)&&l++,e.isDark(a,c+1)&&l++,e.isDark(a+1,c+1)&&l++,(l==0||l==4)&&(t+=3)}for(var n=0;n<r;n++)for(var s=0;s<r-6;s++)e.isDark(n,s)&&!e.isDark(n,s+1)&&e.isDark(n,s+2)&&e.isDark(n,s+3)&&e.isDark(n,s+4)&&!e.isDark(n,s+5)&&e.isDark(n,s+6)&&(t+=40);for(var s=0;s<r;s++)for(var n=0;n<r-6;n++)e.isDark(n,s)&&!e.isDark(n+1,s)&&e.isDark(n+2,s)&&e.isDark(n+3,s)&&e.isDark(n+4,s)&&!e.isDark(n+5,s)&&e.isDark(n+6,s)&&(t+=40);let i=0;for(var s=0;s<r;s++)for(var n=0;n<r;n++)e.isDark(n,s)&&i++;let o=Math.abs(100*i/r/r-50)/5;return t+=o*10,t}},Ye={glog(e){if(e<1)throw new Error(`glog(${e})`);return Ye.LOG_TABLE[e]},gexp(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Ye.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};(()=>{for(let e=0;e<8;e+=1)Ye.EXP_TABLE[e]=1<<e;for(let e=8;e<256;e+=1)Ye.EXP_TABLE[e]=Ye.EXP_TABLE[e-4]^Ye.EXP_TABLE[e-5]^Ye.EXP_TABLE[e-6]^Ye.EXP_TABLE[e-8];for(let e=0;e<255;e+=1)Ye.LOG_TABLE[Ye.EXP_TABLE[e]]=e})();var Co=class $o{constructor(r,t){d(this,"num");if(r.length===void 0)throw new Error(`${r.length}/${t}`);let n=0;for(;n<r.length&&r[n]===0;)n++;this.num=new Array(r.length-n+t);for(let s=0;s<r.length-n;s+=1)this.num[s]=r[s+n]}get(r){return this.num[r]}getLength(){return this.num.length}multiply(r){let t=new Array(this.getLength()+r.getLength()-1);for(let n=0;n<this.getLength();n++)for(let s=0;s<r.getLength();s++)t[n+s]^=Ye.gexp(Ye.glog(this.get(n))+Ye.glog(r.get(s)));return new $o(t,0)}mod(r){if(this.getLength()-r.getLength()<0)return this;let t=Ye.glog(this.get(0))-Ye.glog(r.get(0)),n=new Array(this.getLength());for(let s=0;s<this.getLength();s++)n[s]=this.get(s);for(let s=0;s<r.getLength();s++)n[s]^=Ye.gexp(Ye.glog(r.get(s))+t);return new $o(n,0).mod(r)}},Zx=class{constructor(e){d(this,"mode");d(this,"parsedData");d(this,"data");this.mode=gt.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(let r=0,t=this.data.length;r<t;r++){let n=[],s=this.data.charCodeAt(r);s>65536?(n[0]=240|(s&1835008)>>>18,n[1]=128|(s&258048)>>>12,n[2]=128|(s&4032)>>>6,n[3]=128|s&63):s>2048?(n[0]=224|(s&61440)>>>12,n[1]=128|(s&4032)>>>6,n[2]=128|s&63):s>128?(n[0]=192|(s&1984)>>>6,n[1]=128|s&63):n[0]=s,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(e){for(let r=0,t=this.parsedData.length;r<t;r++)e.put(this.parsedData[r],8)}},wt,e2=(wt=class{constructor(r,t){d(this,"typeNumber");d(this,"errorCorrectLevel");d(this,"modules",[]);d(this,"moduleCount");d(this,"dataCache");d(this,"dataList");this.typeNumber=r,this.errorCorrectLevel=t,this.modules=[],this.moduleCount=0,this.dataCache=null,this.dataList=[]}addData(r){let t=new Zx(r);this.dataList.push(t),this.dataCache=null}isDark(r,t){if(r<0||this.moduleCount<=r||t<0||this.moduleCount<=t)throw new Error(`${r},${t}`);return this.modules[r][t]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(r,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(let n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(let s=0;s<this.moduleCount;s++)this.modules[n][s]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(r,t),this.typeNumber>=7&&this.setupTypeNumber(r),this.dataCache==null&&(this.dataCache=wt.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)}setupPositionProbePattern(r,t){for(let n=-1;n<=7;n++)if(!(r+n<=-1||this.moduleCount<=r+n))for(let s=-1;s<=7;s++)t+s<=-1||this.moduleCount<=t+s||(n>=0&&n<=6&&(s==0||s==6)||s>=0&&s<=6&&(n==0||n==6)||n>=2&&n<=4&&s>=2&&s<=4?this.modules[r+n][t+s]=!0:this.modules[r+n][t+s]=!1)}getBestMaskPattern(){let r=0,t=0;for(let n=0;n<8;n++){this.makeImpl(!0,n);let s=Me.getLostPoint(this);(n==0||r>s)&&(r=s,t=n)}return t}setupTimingPattern(){for(let r=8;r<this.moduleCount-8;r++)this.modules[r][6]==null&&(this.modules[r][6]=r%2==0);for(let r=8;r<this.moduleCount-8;r++)this.modules[6][r]==null&&(this.modules[6][r]=r%2==0)}setupPositionAdjustPattern(){let r=Me.getPatternPosition(this.typeNumber);for(let t=0;t<r.length;t++)for(let n=0;n<r.length;n++){let s=r[t],i=r[n];if(this.modules[s][i]==null)for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o==-2||o==2||a==-2||a==2||o==0&&a==0?this.modules[s+o][i+a]=!0:this.modules[s+o][i+a]=!1}}setupTypeNumber(r){let t=Me.getBCHTypeNumber(this.typeNumber);for(var n=0;n<18;n++){var s=!r&&(t>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=s}for(var n=0;n<18;n++){var s=!r&&(t>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=s}}setupTypeInfo(r,t){let n=this.errorCorrectLevel<<3|t,s=Me.getBCHTypeInfo(n);for(var i=0;i<15;i++){var o=!r&&(s>>i&1)==1;i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(var i=0;i<15;i++){var o=!r&&(s>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!r}mapData(r,t){let n=-1,s=this.moduleCount-1,i=7,o=0;for(let a=this.moduleCount-1;a>0;a-=2)for(a==6&&a--;;){for(let c=0;c<2;c++)if(this.modules[s][a-c]==null){let l=!1;o<r.length&&(l=(r[o]>>>i&1)==1),Me.getMask(t,s,a-c)&&(l=!l),this.modules[s][a-c]=l,i--,i==-1&&(o++,i=7)}if(s+=n,s<0||this.moduleCount<=s){s-=n,n=-n;break}}}},d(wt,"PAD0",236),d(wt,"PAD1",17),d(wt,"createData",function(r,t,n){let s=t2.getRSBlocks(r,t),i=new r2;for(let a=0;a<n.length;a+=1){let c=n[a];i.put(c.mode,4),i.put(c.getLength(),Me.getLengthInBits(c.mode,r)),c.write(i)}let o=0;for(let a=0;a<s.length;a+=1)o+=s[a].dataCount;if(i.getLengthInBits()>o*8)throw new Error(`code length overflow. (${i.getLengthInBits()}>${o*8})`);for(i.getLengthInBits()+4<=o*8&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(!1);for(;!(i.getLengthInBits()>=o*8||(i.put(wt.PAD0,8),i.getLengthInBits()>=o*8));)i.put(wt.PAD1,8);return wt.createBytes(i,s)}),d(wt,"createBytes",function(r,t){let n=0,s=0,i=0,o=new Array(t.length),a=new Array(t.length);for(let p=0;p<t.length;p+=1){let g=t[p].dataCount,y=t[p].totalCount-g;s=Math.max(s,g),i=Math.max(i,y),o[p]=new Array(g);for(let P=0;P<o[p].length;P+=1)o[p][P]=255&r.buffer[P+n];n+=g;let S=Me.getErrorCorrectPolynomial(y),x=new Co(o[p],S.getLength()-1).mod(S);a[p]=new Array(S.getLength()-1);for(let P=0;P<a[p].length;P+=1){let J=P+x.getLength()-a[p].length;a[p][P]=J>=0?x.get(J):0}}let c=0;for(let p=0;p<t.length;p+=1)c+=t[p].totalCount;let l=new Array(c),u=0;for(let p=0;p<s;p+=1)for(let g=0;g<t.length;g+=1)p<o[g].length&&(l[u++]=o[g][p]);for(var h=0;h<i;h++)for(var f=0;f<t.length;f++)h<a[f].length&&(l[u++]=a[f][h]);return l}),wt),yt,t2=(yt=class{constructor(r,t){d(this,"totalCount");d(this,"dataCount");this.totalCount=r,this.dataCount=t}},d(yt,"RS_BLOCK_TABLE",[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]]),d(yt,"getRSBlocks",function(r,t){let n=yt.getRsBlockTable(r,t);if(n==null)throw new Error(`bad rs block @ typeNumber:${r}/errorCorrectLevel:${t}`);let s=n.length/3,i=[];for(let o=0;o<s;o++){let a=n[o*3+0],c=n[o*3+1],l=n[o*3+2];for(let u=0;u<a;u++)i.push(new yt(c,l))}return i}),d(yt,"getRsBlockTable",function(r,t){switch(t){case zt.L:return yt.RS_BLOCK_TABLE[(r-1)*4+0];case zt.M:return yt.RS_BLOCK_TABLE[(r-1)*4+1];case zt.Q:return yt.RS_BLOCK_TABLE[(r-1)*4+2];case zt.H:return yt.RS_BLOCK_TABLE[(r-1)*4+3];default:return}}),yt),r2=class{constructor(){d(this,"length");d(this,"buffer");this.buffer=[],this.length=0}get(e){let r=Math.floor(e/8);return(this.buffer[r]>>>7-e%8&1)==1}put(e,r){for(let t=0;t<r;t++)this.putBit((e>>>r-t-1&1)==1)}getLengthInBits(){return this.length}putBit(e){let r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),e&&(this.buffer[r]|=128>>>this.length%8),this.length++}},Hr=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function n2(e,r){let t=1,n=s2(e);for(let s=0,i=Hr.length;s<=i;s++){let o=0;switch(r){case zt.L:o=Hr[s][0];break;case zt.M:o=Hr[s][1];break;case zt.Q:o=Hr[s][2];break;case zt.H:o=Hr[s][3];break}if(n<=o)break;t++}if(t>Hr.length)throw new Error("Too long data");return t}function s2(e){let r=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return r.length+(r.length!=e?3:0)}var Hi,i2=(Hi=class{constructor(e){d(this,"_htOption");d(this,"_oQRCode",null);this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:zt.H,text:""};let r=typeof e=="string"?{text:e}:e||{};for(let t in r)this._htOption[t]=r[t];this._oQRCode=null}fetchModel(e,r={}){return[void 0,null,""].includes(e)?(console.error("二维码内容不能为空"),null):(this._oQRCode=new e2(n2(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._oQRCode)}},d(Hi,"CorrectLevel",zt),Hi);class o2{constructor(r){d(this,"ctx");d(this,"isPainted",!1);d(this,"options");const{ctx:t}=r;this.options=r,this.ctx=t}draw(r){const{ctx:t}=this,{options:n}=this,s=r.getModuleCount(),i=n.width/s,o=n.height/s,a=Math.round(i),c=Math.round(o);console.log("count",s,a,c),this.clear();for(let l=0;l<s;l++)for(let u=0;u<s;u++){const h=r.isDark(l,u),f=u*i,p=l*o;t.strokeStyle=h?"#000000":"#ffffff",t.lineWidth=1,t.fillStyle=h?"#000000":"#ffffff",t.fillRect(f,p,i,o),t.strokeRect(Math.floor(f)+.5,Math.floor(p)+.5,a,c),t.strokeRect(Math.ceil(f)-.5,Math.ceil(p)-.5,a,c)}this.isPainted=!0}clear(){this.ctx.clearRect(0,0,this.options.width,this.options.height),this.isPainted=!1}round(r){return r&&Math.floor(r*1e3)/1e3}}async function a2(e,r){const{width:t,height:n}=r,s=new o2(r),i=await new i2({width:t,height:n}).fetchModel(e,r);s.draw(i)}const l2={class:"w-full h-screen"},c2={class:"w-[920px] mx-auto pt-12"},u2=m("div",{class:"relative w-[136px] cursor-pointer"},[m("div",{class:"z-10 absolute left-2 top-[36px] w-[280px] h-[32px] rounded-2xl bg-green-500"}),m("div",{class:"z-20 relative text-w-bg-1 text-6xl italic"},"FamilyFlix")],-1),h2={class:"flex mt-8 min-h-[480px] border rounded-xl shadow-xl"},d2={class:"flex items-center justify-center w-[360px]"},f2={class:"qrcode relative inline-block p-2 border"},p2={key:0,class:"z-20 absolute inset-0"},m2=m("div",{class:"z-10 absolute inset-0 bg-white opacity-80"},null,-1),g2=m("div",{class:"z-20 absolute inset-0 flex items-center justify-center"},[m("div",{class:"flex flex-col items-center justify-center"},"加载中")],-1),y2=[m2,g2],v2={key:1,class:"z-20 absolute inset-0"},_2=m("div",{class:"z-10 absolute inset-0 bg-white opacity-80"},null,-1),b2=m("div",{class:"z-20 absolute inset-0 flex items-center justify-center"},[m("div",{class:"flex flex-col items-center justify-center"},[m("div",{class:"text-lg"},"请确认登录")])],-1),w2=[_2,b2],x2={key:2,class:"z-20 absolute inset-0"},S2=m("div",{class:"z-10 absolute inset-0 bg-white opacity-80"},null,-1),C2=m("div",{class:"z-20 absolute inset-0 flex items-center justify-center"},[m("div",{class:"flex flex-col items-center justify-center"},[m("div",{class:"text-lg"},"已确认")])],-1),$2=[S2,C2],T2=m("div",{class:"z-10 absolute inset-0 bg-white opacity-80"},null,-1),E2=m("div",{class:"z-20 absolute inset-0 flex items-center justify-center"},[m("div",{class:"flex flex-col items-center justify-center"},[m("div",{class:"text-lg"},"二维码失效")])],-1),P2=[T2,E2],k2=m("div",{class:"z-10 absolute inset-0 bg-white opacity-80"},null,-1),A2={class:"z-20 absolute inset-0 flex items-center justify-center"},O2={class:"flex flex-col items-center justify-center"},R2=m("div",{class:"text-lg"},"发生错误",-1),M2={class:"mt-1 text-center"},N2={class:"flex-1 flex items-center justify-center"},L2={class:"w-[320px]"},I2={className:"space-y-4 rounded-md"},D2=m("div",{class:"text-w-bg-1"},"邮箱",-1),F2=m("div",{class:"text-w-bg-1"},"密码",-1),B2={className:"w-full mt-8"},z2=ue({__name:"index",props:{app:{},history:{},client:{},view:{},storage:{},pages:{},parent:{}},setup(e){const r=e,{history:t}=r;function n(c){const{app:l,view:u,history:h,client:f}=c,p=new Us({defaultValue:"",placeholder:"请输入邮箱"}),g=new Us({defaultValue:"",placeholder:"请输入密码",type:"password",autoComplete:!0}),y=new Wn({async onClick(){const x={email:p.value,pwd:g.value};y.setLoading(!0);const P=await l.$user.loginWithEmailAndPwd(x);if(y.setLoading(!1),P.error){l.tip({text:["登录失败",P.error.message]});return}l.tip({text:["登录成功"]}),h.replace("root.home_layout.home_index",{})}}),S=Qx({unique_id:u.query.code,step:ht.Loading,client:f});return S.onConfirm(x=>{const P=l.$user.authWithToken(x);if(P.error){l.tip({text:["登录失败",P.error.message]});return}l.tip({text:["登录成功"]}),h.replace("root.home_layout.home_index",{})}),{$code:S,ui:{$username:p,$password:g,$login:y}}}const s=n(r),i=ie(),o=ie(s.$code.state);function a(){s.$code.refresh()}return s.$code.onStateChange(c=>{console.log("$page.$code.onStateChange",c,s.$code.state),o.value=c}),_t(async()=>{const c=i.value;if(!c)return;const l=c.getContext("2d");if(!l)return;const u=await s.$code.refresh();if(u.error){r.app.tip({text:[u.error.message]});return}s.$code.startCheck();const h=(()=>r.app.env.prod==="develop"?"https://media-t.funzm.com":t.$router.origin)();a2(`${h}/mobile/scan?code=${u.data.id}`,{width:198,height:198,ctx:l})}),(c,l)=>{var u;return C(),R("div",l2,[m("div",c2,[u2,m("div",h2,[m("div",d2,[m("div",f2,[m("canvas",{ref_key:"qrcodeRef",ref:i,class:"z-10 relative",width:"198",height:"198"},null,512),o.value.step===$(ht).Loading?(C(),R("div",p2,y2)):be("",!0),o.value.step===$(ht).Scanned?(C(),R("div",v2,w2)):be("",!0),o.value.step===$(ht).Confirmed?(C(),R("div",x2,$2)):be("",!0),o.value.step===$(ht).Expired?(C(),R("div",{key:3,class:"z-20 absolute inset-0",onClick:a},P2)):be("",!0),o.value.step===$(ht).Error?(C(),R("div",{key:4,class:"z-20 absolute inset-0",onClick:a},[k2,m("div",A2,[m("div",O2,[R2,m("div",M2,re((u=o.value.error)==null?void 0:u.message),1)])])])):be("",!0)])]),m("div",N2,[m("div",L2,[m("div",I2,[m("div",null,[D2,z(Ls,{class:"mt-1 bg-w-bg-0",store:$(s).ui.$username},null,8,["store"])]),m("div",null,[F2,z(Ls,{class:"mt-1 bg-w-bg-0",store:$(s).ui.$password},null,8,["store"])])]),m("div",B2,[z(pu,{variant:"",size:"lg",class:"w-full",store:$(s).ui.$login},{default:Q(()=>[pr("登录")]),_:1},8,["store"])])])])])])])}}}),H2={class:"relative flex flex-wrap w-full h-screen"},U2=ue({__name:"index",props:{app:{},history:{},client:{},view:{},storage:{},pages:{},parent:{}},setup(e){function r(){}return(t,n)=>(C(),R("div",H2,[m("div",{class:"absolute top-4 left-4 cursor-pointer",style:{"z-index":"100"},onClick:r},[z($(ma),{size:32})])]))}}),ic={"root.home_layout":P_,"root.home_layout.home_index":X_,"root.home_layout.season_list":ix,"root.home_layout.movie_list":Yx,"root.home_layout.search":cb,"root.home_layout.history":Eb,"root.home_layout.mine":Pb,"root.season_playing":Ww,"root.movie_playing":Ix,"root.login":z2,"root.notfound":U2},j2=["data-state"],q2=ue({__name:"StackRouteView",props:{store:{},className:{},index:{}},setup(e){const{store:r,className:t,index:n}=e,s=ie(r.$presence.state);r.$presence.onStateChange(o=>{s.value=o}),r.ready(),_t(()=>{if(!r.mounted)return r.setShow(),()=>{r.setUnmounted(),r.destroy()}});const i=rt("presence",s.value.enter&&r.animation.in?`animate-in ${r.animation.in}`:"",s.value.exit&&r.animation.out?`animate-out ${r.animation.out}`:"",t);return(o,a)=>s.value.mounted?(C(),R("div",{key:0,class:Ce($(i)),"data-state":s.value.visible?"open":"closed",style:dt({"z-index":o.index,display:s.value.visible?"block":"none"})},[Se(o.$slots,"default")],14,j2)):be("",!0)}}),V2=ue({__name:"portal",props:{store:{},className:{}},setup(e){return(r,t)=>(C(),ge(xh,{store:r.store.present,"class-name":r.className},{default:Q(()=>[(C(),ge(Yc,{to:"body"},[Se(r.$slots,"default")]))]),_:3},8,["store","class-name"]))}}),W2={class:"fixed z-[99] left-[50%] translate-x-[-50%] top-60 w-120 h-120"},G2=["data-state"],K2=ue({__name:"content",props:{store:{},className:{},role:{}},setup(e){const{store:r,className:t}=e,n=ie(r.open),s=rt("toast__content",t);return r.onOpenChange(i=>{n.value=i}),(i,o)=>(C(),R("div",W2,[m("div",{"data-state":n.value?"open":"closed",class:Ce($(s))},[Se(i.$slots,"default")],10,G2)]))}}),Y2={class:"text-center"},J2=ue({__name:"Toast",props:{store:{}},setup(e){const r=e,{store:t}=r,n=ie(t.state);t.onStateChange(o=>{console.log("[COMPONENT]Toast - state change",o.texts),n.value=o});const s=rt("data-[state=open]:fade-in-90","data-[state=closed]:animate-out data-[state=closed]:fade-out"),i=rt("grid gap-4 rounded-lg bg-w-bg-4 text-w-bg-0 dark:text-w-fg-0 p-6 sm:max-w-lg sm:rounded-lg","animate-in sm:zoom-in-90","data-[state=open]:fade-in-90","data-[state=closed]:animate-out data-[state=closed]:fade-out");return(o,a)=>(C(),ge(V2,{store:$(t),"class-name":$(s)},{default:Q(()=>[z(K2,{store:$(t),"class-name":$(i)},{default:Q(()=>[(C(!0),R(fe,null,Le(n.value.texts,c=>(C(),R("div",Y2,re(c),1))),256))]),_:1},8,["store","class-name"])]),_:1},8,["store","class-name"]))}}),X2={class:"screen w-screen h-screen bg-w-bg-2"},Q2=ue({__name:"App",setup(e){const r=Ne.$view,t=new t1,n=ie(r.subViews);_t(()=>{r.onSubViewsChange(i=>{n.value=i}),Je.onTip(i=>{const{text:o}=i;t.show({texts:o})}),Ne.$router.prepare(location),Je.start({width:innerWidth,height:innerHeight})});const s=rt("absolute inset-0 bg-w-bg-2 opacity-100 overflow-y-auto","animate-in fade-in","data-[state=closed]:animate-out data-[state=closed]:fade-out");return(i,o)=>(C(),R(fe,null,[m("div",X2,[(C(!0),R(fe,null,Le(n.value,(a,c)=>(C(),ge(q2,{key:a.id,store:a,className:$(s),index:c},{default:Q(()=>[(C(),ge(Bc($(ic)[a.name]),{app:$(Je),history:$(Ne),client:$(vr),storage:$(fn),pages:$(ic),view:a},null,8,["app","history","client","storage","pages","view"]))]),_:2},1032,["store","className","index"]))),128))]),z(J2,{store:$(t)},null,8,["store"])],64))}});const is=mp(Q2);is.mount("#app");is.component("Button",pu);is.component("Input",Ls);is.component("scroll-view",Dr);is.component("show",Lt);
